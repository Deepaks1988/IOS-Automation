{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"The Appium XCUITest Driver is a combined solution, which allows performing automated black-box testing of iOS and tvOS native applications and WebKit web views. The native testing is based on Apple's XCTest framework and the fork of Facebook's WebDriverAgent server (the original project is not supported anymore). Web views communication is done via Webkit remote debugger protocol . Real devices communication is ensured by appium-ios-device library. Simulators communication is ensured by appium-ios-simulator library. In the native mode the driver operates in scope of WebDriver W3C protocol with several platform-specific extensions. Web views communication only supports the obsolete JWP protocol . Use the navigation on the left or proceed to Setup !","title":"Overview"},{"location":"actions/","text":"What Are Input Events iOS uses events concept to handle signals received from different input devices. An event is an object, which is generated in response to a signal from an input device. These objects are then delivered to the corresponding kernel subsystem, which processes them and notifies all listening processes about taps, key presses, swipes, etc. This means that in order to emulate a signal generated by an external device, such as touch screen, it is necessary to just send event objects with the same properties and in the same sequence as they would be generated by a real device. Lets Simulate a Single Tap The events API itself is a part of Apple private API and is not open sourced and neither it is documented. XCTest framework also does not expose any public APIs for input events generation. Although, there is a possibility to perform events generation via XCTest private undocumented APIs. In particular, we are interested in XCPointerEventPath and XCSynthesizedEventRecord interfaces. These APIs allow to create chains of input events and supply them to the system kernel for execution. In order to synthesize a single tap it is necessary to: - Create a new XCPointerEventPath instance and init it for touch at the starting point - Add a new liftUp event at 0.125s offset using liftUpAtOffset: method - Add the generated event path object to XCSynthesizedEventRecord instance using addPointerEventPath: method - Execute the events using synthesizeWithError: method of XCSynthesizedEventRecord instance and control the returned error There are several limitations to these APIs: - Each XCPointerEventPath instance can only be executed for a single action. If one tries to add, for example, two taps to a single path, then these are effectively ignored - Each XCPointerEventPath instance can only be initialized for a particular pointer type: touch, mouse (since Xcode 10.2) or keyboard (since Xcode 10.2) - Events can only be added with increasing offset values to an existing XCPointerEventPath instance How About More Complicated Actions Unfortunately, the API is private and has zero documentation. That is why one can only figure out what it really can while playing with it and trying different input combinations. It is known that providing multiple XCPointerEventPath instances with overlapping timeouts will generate a multitouch action with the amount of fingers equal to the amount of the supplied event paths. So, in order to generate two-finger symmetric swipe we need to supply the following events: Create a two XCPointerEventPath instances and init them for touch at the starting point Add a moveToPoint event at 0.525s offset using moveToPoint: method to each path Add a liftUp eventa at 0.525s offset using liftUpAtOffset: method to each path Add the generated event paths to XCSynthesizedEventRecord instance using addPointerEventPath: method Execute the events using synthesizeWithError: method of XCSynthesizedEventRecord instance and control the returned error Further Reading Unfortunately, there is no information on this topic at all (private API \u00af\\_(\u30c4)_/\u00af ). Consider visiting the following resources: https://github.com/appium/WebDriverAgent/tree/master/PrivateHeaders/XCTest https://github.com/appium/WebDriverAgent/blob/master/WebDriverAgentTests/IntegrationTests/FBW3CTouchActionsIntegrationTests.m https://github.com/appium/WebDriverAgent/blob/master/WebDriverAgentTests/IntegrationTests/FBW3CMultiTouchActionsIntegrationTests.m https://github.com/appium/WebDriverAgent/blob/master/WebDriverAgentLib/Utilities/FBW3CActionsSynthesizer.m","title":"About iOS Input Events"},{"location":"actions/#what-are-input-events","text":"iOS uses events concept to handle signals received from different input devices. An event is an object, which is generated in response to a signal from an input device. These objects are then delivered to the corresponding kernel subsystem, which processes them and notifies all listening processes about taps, key presses, swipes, etc. This means that in order to emulate a signal generated by an external device, such as touch screen, it is necessary to just send event objects with the same properties and in the same sequence as they would be generated by a real device.","title":"What Are Input Events"},{"location":"actions/#lets-simulate-a-single-tap","text":"The events API itself is a part of Apple private API and is not open sourced and neither it is documented. XCTest framework also does not expose any public APIs for input events generation. Although, there is a possibility to perform events generation via XCTest private undocumented APIs. In particular, we are interested in XCPointerEventPath and XCSynthesizedEventRecord interfaces. These APIs allow to create chains of input events and supply them to the system kernel for execution. In order to synthesize a single tap it is necessary to: - Create a new XCPointerEventPath instance and init it for touch at the starting point - Add a new liftUp event at 0.125s offset using liftUpAtOffset: method - Add the generated event path object to XCSynthesizedEventRecord instance using addPointerEventPath: method - Execute the events using synthesizeWithError: method of XCSynthesizedEventRecord instance and control the returned error There are several limitations to these APIs: - Each XCPointerEventPath instance can only be executed for a single action. If one tries to add, for example, two taps to a single path, then these are effectively ignored - Each XCPointerEventPath instance can only be initialized for a particular pointer type: touch, mouse (since Xcode 10.2) or keyboard (since Xcode 10.2) - Events can only be added with increasing offset values to an existing XCPointerEventPath instance","title":"Lets Simulate a Single Tap"},{"location":"actions/#how-about-more-complicated-actions","text":"Unfortunately, the API is private and has zero documentation. That is why one can only figure out what it really can while playing with it and trying different input combinations. It is known that providing multiple XCPointerEventPath instances with overlapping timeouts will generate a multitouch action with the amount of fingers equal to the amount of the supplied event paths. So, in order to generate two-finger symmetric swipe we need to supply the following events: Create a two XCPointerEventPath instances and init them for touch at the starting point Add a moveToPoint event at 0.525s offset using moveToPoint: method to each path Add a liftUp eventa at 0.525s offset using liftUpAtOffset: method to each path Add the generated event paths to XCSynthesizedEventRecord instance using addPointerEventPath: method Execute the events using synthesizeWithError: method of XCSynthesizedEventRecord instance and control the returned error","title":"How About More Complicated Actions"},{"location":"actions/#further-reading","text":"Unfortunately, there is no information on this topic at all (private API \u00af\\_(\u30c4)_/\u00af ). Consider visiting the following resources: https://github.com/appium/WebDriverAgent/tree/master/PrivateHeaders/XCTest https://github.com/appium/WebDriverAgent/blob/master/WebDriverAgentTests/IntegrationTests/FBW3CTouchActionsIntegrationTests.m https://github.com/appium/WebDriverAgent/blob/master/WebDriverAgentTests/IntegrationTests/FBW3CMultiTouchActionsIntegrationTests.m https://github.com/appium/WebDriverAgent/blob/master/WebDriverAgentLib/Utilities/FBW3CActionsSynthesizer.m","title":"Further Reading"},{"location":"audio-capture/","text":"Client Side API Since Appium 1.18.0 there is a possibility to record iOS audio stream and save it to a file, which could be then retrieved on the client side. Apple does not provide any API to directly retrieve the audio stream from a Simulator or a real device, but it is possible to redirect that stream to the host machine, where it could be captured. mobile: startAudioRecording mobile: stopAudioRecording Server Requirements Appium version should be 1.18.0 or newer. It is mandatory that the host machine has FFMPEG installed and available in PATH. On macOS it could be installed via Brew : brew install ffmpeg . macOS since version 10.15 requires applications that record Microphone audio to be explicitly enabled in System Preferences->Security & Privacy->Privacy->Microphone tab. Make sure either FFMPEG itself or the parent Appium process (e.g. Terminal) is present in that list. The feature is potentially unsecure, so it must be explicitly allowed on the server side. The feature name is audio_record . See Security for more details. Simulator Setup The following steps are necessary to setup iOS Simulator audio capture: Install Soundflower Redirect Simulator audio output to Soundflower. From the main Simulator menu select I/O->Audio Output->Soundflower (2ch) Run ffmpeg -f avfoundation -list_devices true -i \"\" command in Terminal to get the identifier of the Soundflower (2ch) device. This identifier prefixed with : will be then used as audioInput argument to mobile: startAudioRecording call Test that your setup works as expected. Run any audio playback in Simulator and execute the following command in Terminal (do not forget to replace the -i argument value with the one you got from the previous step): ffmpeg -t 5 -f avfoundation -i \":1\" -c:a aac -b:a 128k -ac 2 -ar 44100 -y ~/Desktop/out.mp4 . After 5 seconds there should be out.mp4 file on your Desktop containing the recorded audio stream. Real Device Setup The following steps are necessary to setup iOS Real Device audio capture: Connect your device to the Mac host with a cable Run open -a /System/Applications/Utilities/Audio\\ MIDI\\ Setup.app application Find your phone in the list of devices there and click Enable button next to it Run ffmpeg -f avfoundation -list_devices true -i \"\" command in Terminal and find the identifier of your device in the AVFoundation audio devices list. This identifier prefixed with : will be then used as audioInput argument to mobile: startAudioRecording call Test that your setup works as expected. Run any audio playback on the device and execute the following command in Terminal (do not forget to replace the -i argument value with the value you got from the previous step): ffmpeg -t 5 -f avfoundation -i \":1\" -c:a aac -b:a 128k -ac 2 -ar 44100 -y ~/Desktop/out.mp4 . After 5 seconds there should be out.mp4 file on your Desktop containing the recorded audio stream. Apple does not allow phone calls to be redirected this way. You can only record application or system sounds. Further Reading https://github.com/appium/appium-xcuitest-driver/pull/1207 https://www.macobserver.com/tips/quick-tip/iphone-audio-input-mac/ http://www.lorisware.com/blog/2012/04/28/recording-iphone-emulator-video-with-sound/","title":"Audio Capture"},{"location":"audio-capture/#client-side-api","text":"Since Appium 1.18.0 there is a possibility to record iOS audio stream and save it to a file, which could be then retrieved on the client side. Apple does not provide any API to directly retrieve the audio stream from a Simulator or a real device, but it is possible to redirect that stream to the host machine, where it could be captured. mobile: startAudioRecording mobile: stopAudioRecording","title":"Client Side API"},{"location":"audio-capture/#server-requirements","text":"Appium version should be 1.18.0 or newer. It is mandatory that the host machine has FFMPEG installed and available in PATH. On macOS it could be installed via Brew : brew install ffmpeg . macOS since version 10.15 requires applications that record Microphone audio to be explicitly enabled in System Preferences->Security & Privacy->Privacy->Microphone tab. Make sure either FFMPEG itself or the parent Appium process (e.g. Terminal) is present in that list. The feature is potentially unsecure, so it must be explicitly allowed on the server side. The feature name is audio_record . See Security for more details.","title":"Server Requirements"},{"location":"audio-capture/#simulator-setup","text":"The following steps are necessary to setup iOS Simulator audio capture: Install Soundflower Redirect Simulator audio output to Soundflower. From the main Simulator menu select I/O->Audio Output->Soundflower (2ch) Run ffmpeg -f avfoundation -list_devices true -i \"\" command in Terminal to get the identifier of the Soundflower (2ch) device. This identifier prefixed with : will be then used as audioInput argument to mobile: startAudioRecording call Test that your setup works as expected. Run any audio playback in Simulator and execute the following command in Terminal (do not forget to replace the -i argument value with the one you got from the previous step): ffmpeg -t 5 -f avfoundation -i \":1\" -c:a aac -b:a 128k -ac 2 -ar 44100 -y ~/Desktop/out.mp4 . After 5 seconds there should be out.mp4 file on your Desktop containing the recorded audio stream.","title":"Simulator Setup"},{"location":"audio-capture/#real-device-setup","text":"The following steps are necessary to setup iOS Real Device audio capture: Connect your device to the Mac host with a cable Run open -a /System/Applications/Utilities/Audio\\ MIDI\\ Setup.app application Find your phone in the list of devices there and click Enable button next to it Run ffmpeg -f avfoundation -list_devices true -i \"\" command in Terminal and find the identifier of your device in the AVFoundation audio devices list. This identifier prefixed with : will be then used as audioInput argument to mobile: startAudioRecording call Test that your setup works as expected. Run any audio playback on the device and execute the following command in Terminal (do not forget to replace the -i argument value with the value you got from the previous step): ffmpeg -t 5 -f avfoundation -i \":1\" -c:a aac -b:a 128k -ac 2 -ar 44100 -y ~/Desktop/out.mp4 . After 5 seconds there should be out.mp4 file on your Desktop containing the recorded audio stream. Apple does not allow phone calls to be redirected this way. You can only record application or system sounds.","title":"Real Device Setup"},{"location":"audio-capture/#further-reading","text":"https://github.com/appium/appium-xcuitest-driver/pull/1207 https://www.macobserver.com/tips/quick-tip/iphone-audio-input-mac/ http://www.lorisware.com/blog/2012/04/28/recording-iphone-emulator-video-with-sound/","title":"Further Reading"},{"location":"capabilities/","text":"General Capability Description platformName Could be set to ios . Appium itself is not strict about this capability value if automationName is provided, so feel free to assign it to any supported platform name if this is needed, for example, to make Selenium Grid working. appium:automationName Must always be set to xcuitest . Values of automationName are compared case-insensitively. appium:deviceName The name of the device under test. Consider setting udid for real devices and use this one for Simulator selection instead appium:platformVersion The platform version of an emulator or a real device. This capability is used for device autodetection if udid is not provided appium:udid UDID of the device to be tested. Could be retrieved from Xcode->Window->Devices and Simulators window. Always set this capability if you run parallel tests or use a real device to run your tests. appium:noReset Prevents the device to be reset before the session startup if set to true . This means that the application under test is not going to be terminated neither its data cleaned. false by default appium:fullReset Being set to true always enforces the application under test to be fully uninstalled before starting a new session. false by default appium:printPageSourceOnFindFailure Enforces the server to dump the actual XML page source into the log if any error happens. false by default. browserName The name of the browser to run the test on. If this capability is provided then the driver will try to start the test in Web context mode (Native mode is applied by default). Read Automating hybrid apps for more details. Usually equals to safari . appium:includeDeviceCapsToSessionInfo Whether to include screen information as the result of Get Session Capabilities . It includes pixelRatio , statBarHeight and viewportRect , but it causes an extra API call to WDA which may increase the response time like this issue . Defaults to true . appium:resetLocationService Whether reset the location service in the session deletion on real device. Defaults to false . appium:customSSLCert App Capability Description appium:bundleId Bundle identifier of the app under test, for example com.mycompany.myapp . The capability value is calculated automatically if app is provided. If neither app or bundleId capability is provided then XCUITest driver starts from the Home screen. appium:app Full path to the application to be tested (the app must be located on the same machine where the server is running). .ipa and .app application extensions are supported. Zipped .app bundles are supported as well. Could also be an URL to a remote location. If neither of the app or bundleId capabilities are provided then the driver starts from the Home screen and expects the test to know what to do next. Do not provide both app and browserName capabilities at once. appium:localizableStringsDir Where to look for localizable strings in the application bundle. Defaults to en.lproj appium:otherApps App or list of apps (as a JSON array) to install prior to running tests. Note that it will not work with iOS real devices. Fore example: [\"http://appium.github.io/appium/assets/TestApp9.4.app.zip\", \"/path/to/app-b.app\"] appium:language Language to set for iOS app, for example fr . Please read Language IDs to get more details about available values for this capability. If a test is executed on a Simulator then UI language is changed as well. You can also change Simulator language in runtime using mobile: configureLocalization extension. appium:locale Locale to set for iOS app, for example fr_CA . Please read Locale IDs to get more details about available values for this capability. If a test is executed on a Simulator then UI locale is changed as well. You can also change Simulator locale in runtime using mobile: configureLocalization extension. appium:calendarFormat Calendar format to set for iOS Simulator, for example gregorian or persian . Can only be set in conjunction with appium:locale . appium:appPushTimeout The timeout for application upload in milliseconds. Works for real devices only. The default value is 30000 ms appium:appInstallStrategy Select application installation strategy for real devices. The following strategies are supported: serial (default) - pushes app files to the device in a sequential order; this is the least performant strategy, although the most reliable; parallel - pushes app files simultaneously; this is usually the the most performant strategy, but sometimes could not be very stable; ios-deploy - tells the driver to use a third-party tool ios-deploy to install the app; obviously the tool must be installed separately first and must be present in PATH before it could be used. WebDriverAgent Capability Description Values appium:xcodeOrgId Apple developer team identifier string. Must be used in conjunction with xcodeSigningId to take effect. e.g., JWL241K123 appium:xcodeSigningId String representing a signing certificate. Must be used in conjunction with xcodeOrgId . This is usually just iPhone Developer , so the default (if not included) is iPhone Developer e.g., iPhone Developer appium:xcodeConfigFile Full path to an optional Xcode configuration file that specifies the code signing identity and team for running the WebDriverAgent on the real device. e.g., /path/to/myconfig.xcconfig appium:updatedWDABundleId Bundle id to update WDA to before building and launching on real devices. This bundle id must be associated with a valid provisioning profile. e.g., io.appium.WebDriverAgentRunner appium:keychainPath Full path to the private development key exported from the system keychain. Used in conjunction with keychainPassword when testing on real devices. e.g., /path/to/MyPrivateKey.p12 appium:keychainPassword Password for unlocking keychain specified in keychainPath . e.g., super awesome password appium:derivedDataPath Use along with usePrebuiltWDA capability and choose where to search for the existing WDA app. If the capability is not set then Xcode will store the derived data in the default root taken from preferences. appium:webDriverAgentUrl If provided, Appium will connect to an existing WebDriverAgent instance at this URL instead of starting a new one. e.g., http://localhost:8100 appium:useNewWDA If true , forces uninstall of any existing WebDriverAgent app on device. Set it to true if you want to apply different startup options for WebDriverAgent for each session. Although, it is only guaranteed to work stable on Simulator. Real devices require WebDriverAgent client to run for as long as possible without reinstall/restart to avoid issues like https://github.com/facebook/WebDriverAgent/issues/507. The false value (the default behaviour since driver version 2.35.0) will try to detect currently running WDA listener executed by previous testing session(s) and reuse it if possible, which is highly recommended for real device testing and to speed up suites of multiple tests in general. A new WDA session will be triggered at the default URL (http://localhost:8100) if WDA is not listening and webDriverAgentUrl capability is not set. The negative/unset value of useNewWDA capability has no effect prior to xcuitest driver version 2.35.0. e.g., true appium:wdaLaunchTimeout Time, in ms, to wait for WebDriverAgent to be pingable. Defaults to 60000ms. e.g., 30000 appium:wdaConnectionTimeout Timeout, in ms, for waiting for a response from WebDriverAgent . Defaults to 240000ms. e.g., 1000 appium:wdaStartupRetries Number of times to try to build and launch WebDriverAgent onto the device. Defaults to 2. e.g., 4 appium:wdaStartupRetryInterval Time, in ms, to wait between tries to build and launch WebDriverAgent . Defaults to 10000ms. e.g., 20000 appium:wdaLocalPort This value if specified, will be used to forward traffic from Mac host to real ios devices over USB. Default value is same as port number used by WDA on device. e.g., 8100 appium:wdaBaseUrl This value if specified, will be used as a prefix to build a custom WebDriverAgent url. It is different from webDriverAgentUrl , because if the latter is set then it expects WebDriverAgent to be already listening and skips the building phase. Defaults to http://localhost e.g., http://192.168.1.100 appium:showXcodeLog Whether to display the output of the Xcode command used to run the tests. If this is true , there will be lots of extra logging at startup. Defaults to false e.g., true appium:iosInstallPause Time in milliseconds to pause between installing the application and starting WebDriverAgent on the device. Used particularly for larger applications. Defaults to 0 e.g., 8000 appium:usePrebuiltWDA Skips the build phase of running the WDA app. Building is then the responsibility of the user. Only works for Xcode 8+. Defaults to false . e.g., true appium:shouldUseSingletonTestManager Use default proxy for test management within WebDriverAgent . Setting this to false sometimes helps with socket hangup problems. Defaults to true . e.g., false appium:waitForIdleTimeout The amount of time in float seconds to wait until the application under test is idling. XCTest requires the app's main thread to be idling in order to execute any action on it, so WDA might not even start/freeze if the app under test is constantly hogging the main thread. The default value is 10 (seconds). Setting it to zero disables idling checks completely (not recommended) and has the same effect as setting waitForQuiescence to false . Available since Appium 1.20.0. appium:useXctestrunFile Use Xctestrun file to launch WDA. It will search for such file in bootstrapPath . Expected name of file is WebDriverAgentRunner_iphoneos<sdkVersion>-arm64.xctestrun for real device and WebDriverAgentRunner_iphonesimulator<sdkVersion>-x86_64.xctestrun for simulator. One can do build-for-testing for WebDriverAgent project for simulator and real device and then you will see Product Folder like this and you need to copy content of this folder at bootstrapPath location. Since this capability expects that you have already built WDA project, it neither checks whether you have necessary dependencies to build WDA nor will it try to build project. Defaults to false . Tips: Xcodebuild builds for the target platform version. We'd recommend you to build with minimal OS version which you'd like to run as the original WDA module. e.g. If you build WDA for 12.2, the module cannot run on iOS 11.4 because of loading some module error on simulator. A module built with 11.4 can work on iOS 12.2. (This is xcodebuild's expected behaviour.) e.g., true appium:useSimpleBuildTest Build with build and run test with test in xcodebuild for all Xcode version if this is true , or build with build-for-testing and run tests with test-without-building for over Xcode 8 if this is false . Defaults to false . true or false appium:wdaEventloopIdleDelay Delays the invocation of -[XCUIApplicationProcess setEventLoopHasIdled:] by the number of seconds specified with this capability. This can help quiescence apps that fail to do so for no obvious reason (and creating a session fails for that reason). This increases the time for session creation because -[XCUIApplicationProcess setEventLoopHasIdled:] is called multiple times. If you enable this capability start with at least 3 seconds and try increasing it, if creating the session still fails. Defaults to 0 . e.g. 5 appium:processArguments Process arguments and environment which will be sent to the WebDriverAgent server in a new session request. Please use mobile:launchApp to launch an application with process arguments in the middle of a session. { args: [\"a\", \"b\", \"c\"] , env: { \"a\": \"b\", \"c\": \"d\" } } or '{\"args\": [\"a\", \"b\", \"c\"], \"env\": { \"a\": \"b\", \"c\": \"d\" }}' appium:autoLaunch When set to false , prevents the application under test from being launched automatically as a part of the new session startup process. The launch become the responsibility of the user. Defaults to true . true or false appium:allowProvisioningDeviceRegistration Allow xcodebuild to register your destination device on the developer portal if necessary. Requires a developer account to have been added in Xcode's Accounts preference pane. Defaults to false . true or false appium:resultBundlePath Specify the path to the result bundle path as xcodebuild argument for WebDriverAgent build under a security flag (Please check Opt-in Features section below). WebDriverAgent process must start/stop every time to pick up changed value of this property. Specifying useNewWDA to true may help there. Please read man xcodebuild for more details. e.g. /path/to/resultbundle appium:resultBundleVersion Specify the version of result bundle as xcodebuild argument for WebDriverAgent build. The default value depends on your Xcode version. Please read man xcodebuild for more details. e.g. /path/to/resultbundle appium:maxTypingFrequency Maximum frequency of keystrokes for typing and clear. If your tests are failing because of typing errors, you may want to adjust this. Defaults to 60 keystrokes per minute. e.g., 30 appium:simpleIsVisibleCheck Use native methods for determining visibility of elements. In some cases this takes a long time. Setting this capability to false will cause the system to use the position and size of elements to make sure they are visible on the screen. This can, however, lead to false results in some situations. Defaults to false , except iOS 9.3, where it defaults to true . e.g., true , false appium:waitForQuiescence It allows to turn on/off waiting for application quiescence in WebDriverAgent , while performing queries. The default value is true . You can avoid this kind of issues if you turn it off. Consider using waitForIdleTimeout capability instead for this purpose since Appium 1.20.0 e.g false appium:mjpegServerPort The port number on which WDA broadcasts screenshots stream encoded into MJPEG format from the device under test. It might be necessary to change this value if the default port is busy because of other tests running in parallel. Default value: 9100 e.g. 12000 appium:screenshotQuality Changes the quality of phone display screenshots following xctest/xctimagequality Default value is 1 . 0 is the highest and 2 is the lowest quality. You can also change it via settings command. 0 might cause OutOfMemory crash on high-resolution devices like iPad Pro. e.g. 0 , 1 , 2 appium:autoAcceptAlerts Accept all iOS alerts automatically if they pop up. This includes privacy access permission alerts (e.g., location, contacts, photos). Default is false . true or false appium:autoDismissAlerts Dismiss all iOS alerts automatically if they pop up. This includes privacy access permission alerts (e.g., location, contacts, photos). Default is false . true or false appium:disableAutomaticScreenshots Disable automatic screenshots taken by XCTest at every interaction. Default is up to WebDriverAgent 's config to decide, which currently defaults to true . true or false appium:shouldTerminateApp Specify if the app should be terminated on session end. This capability only has an effect if an application identifier has been passed to the test session (either explicitly, by setting bundleId, or implicitly, by providing app). Default is true unless noReset capability is set to true . true or false appium:forceAppLaunch Specify if the app should be forcefully restarted if it is already running on session startup. This capability only has an effect if an application identifier has been passed to the test session (either explicitly, by setting bundleId, or implicitly, by providing app). Default is true unless noReset capability is set to true . true or false appium:useNativeCachingStrategy Set this capability to false in order to use the custom elements caching strategy. This might help to avoid stale element exception on property change. By default the native XCTest cache resolution is used ( true ) for all native locators (e.g. all, but xpath). Check the corresponding WebDriverAgent pull request for more details. true or false Simulator Capability Description Values appium:orientation Start a test session in a certain orientation. Note, that Simulator may ignore this capability if the simulated device itself does not support orientation change in its current state. For example, iPhones only allow orientation change to landscape if an app that declares landscape support in its manifest is running. Thus changing the orientation from portrait to something else being on home screen won't have any effect. LANDSCAPE or PORTRAIT appium:scaleFactor Simulator scale factor. This is useful to have if the default resolution of simulated device is greater than the actual display resolution. So you can scale the simulator to see the whole device screen without scrolling. Acceptable values for simulators running Xcode SDK 8 and older are: '1.0', '0.75', '0.5', '0.33' and '0.25' , where '1.0' means 100% scale. For simulators running Xcode SDK 9 and above the value could be any valid positive float number. The capability must be of a string type. appium:connectHardwareKeyboard Set this option to true in order to enable hardware keyboard in Simulator. The preference works only when XCUITest driver launches a simulator instance with this value. It is set to false by default, because this helps to workaround some XCTest bugs. connectHardwareKeyboard: true makes forceSimulatorSoftwareKeyboardPresence: false if no explicit value is set for forceSimulatorSoftwareKeyboardPresence capability since Appium 1.22.0. true or false appium:forceSimulatorSoftwareKeyboardPresence Set this option to true in order to turn software keyboard on and turn hardware keyboard off in Simulator since Appium 1.22.0. This option helps to avoid Keyboard is not present error. It is set to true by default. XCUITest driver respects preset simulator software/hardware keyboard preference when this value is false , so connectHardwareKeyboard: false and forceSimulatorSoftwareKeyboardPresence: false means for XCUITest driver to keep the current Simulator keyboard preferences. This option has priority over connectHardwareKeyboard . true or false Deprecated appium:calendarAccessAuthorized This capability is obsolete. Please use appium:permissions one instead with the calendar key. true or false appium:isHeadless Set this capability to true if automated tests are running on Simulator and the device display is not needed to be visible. This only has an effect since Xcode9 and only for simulators. All running instances of Simulator UI are going to be automatically terminated if headless test is started. false is the default value. e.g., true appium:simulatorWindowCenter Allows to explicitly set the coordinates of Simulator window center for Xcode9+ SDK. This capability only has an effect if Simulator window has not been opened yet for the current session before it started. e.g. {-100.0,100.0} or {500,500} , spaces are not allowed appium:simulatorStartupTimeout Allows to change the default timeout for Simulator startup. By default this value is set to 120000ms (2 minutes), although the startup could take longer on a weak hardware or if other concurrent processes use much system resources during the boot up procedure. e.g. 300000 appium:simulatorTracePointer Whether to highlight pointer moves in the Simulator window. The Simulator UI client must be shut down before the session startup in order for this capability to be applied properly. false by default. e.g. true appium:shutdownOtherSimulators If this capability set to true and the current device under test is an iOS Simulator then Appium will try to shutdown all the other running Simulators before to start a new session. This might be useful while executing webview tests on different devices, since only one device can be debugged remotely at once due to an Apple bug. The capability only has an effect if --relaxed-security command line argument is provided to the server. Defaults to false . e.g. true appium:enforceFreshSimulatorCreation Creates a new simulator in session creation and deletes it in session deletion. Defaults to false . true or false appium:keepKeyChains Set the capability to true in order to preserve Simulator keychains folder after full reset. This feature has no effect on real devices. Defaults to false e.g. true appium:keychainsExcludePatterns This capability accepts comma-separated path patterns, which are going to be excluded from keychains restore while full reset is being performed on Simulator. It might be useful if you want to exclude only particular keychain types from being restored, like the applications keychain. This feature has no effect on real devices. e.g. *keychain*.db* to exclude applications keychain from being restored appium:reduceMotion It allows to turn on/off reduce motion accessibility preference. Setting reduceMotion on helps to reduce flakiness during tests. Only on simulators e.g true appium:reduceTransparency It allows you to turn on/off reduce transparency accessibility preference. Setting reduceTransparency on helps to reduce screenshot image distortion during tests. Only on simulators e.g true appium:permissions Allows to set permissions for the specified application bundle on Simulator only. The capability value is expected to be a valid JSON string with {\"<bundleId1>\": {\"<serviceName1>\": \"<serviceStatus1>\", ...}, ...} format. Since Xcode SDK 11.4 Apple provides native APIs to interact with application settings. Check the output of xcrun simctl privacy booted command to get the list of available permission names. Use yes , no and unset as values in order to grant , revoke or reset the corresponding permission. Below Xcode SDK 11.4 it is required that applesimutils package is installed and available in PATH. The list of available service names and statuses can be found at https://github.com/wix/AppleSimulatorUtils. e. g. {\"com.apple.mobilecal\": {\"calendar\": \"YES\"}} appium:iosSimulatorLogsPredicate Set the --predicate flag in the ios simulator logs e.g.: 'process != \"locationd\" AND process != \"DTServiceHub\"' AND process != \"mobileassetd\" appium:simulatorPasteboardAutomaticSync Handle the -PasteboardAutomaticSync flag when simulator process launches. It could improve launching simulator performance not to sync pasteboard with the system when this value is off . on forces the flag enabled. system does not provide the flag to the launching command. on , off , or system is available. They are case insensitive. Defaults to off e.g. system appium:simulatorDevicesSetPath This capability allows to set an alternative path to the simulator devices set in case you have multiple sets deployed on your local system. Such feature could be useful if you, for example, would like to save disk space on the main system volume. e.g. /MyVolume/Devices appium:webkitResponseTimeout (Real device only) Set the time, in ms, to wait for a response from WebKit in a Safari session. Defaults to 5000 e.g., 10000 appium:safariGlobalPreferences Allows changing of Mobile Safari's preferences at the session startup. Check the documentation on arguments of mobile: updateSafariPreferences extension to get more details on the value type requirements. { ShowTabBar: 0, WarnAboutFraudulentWebsites: 0 } Web Context Capability Description Values appium:absoluteWebLocations This capability will direct the Get Element Location command, when used within webviews, to return coordinates which are relative to the origin of the page, rather than relative to the current scroll offset. This capability has no effect outside of webviews. Default false . e.g., true appium:safariGarbageCollect Turns on/off Web Inspector garbage collection when executing scripts on Safari. Turning on may improve performance. Defaults to false . true or false appium:includeSafariInWebviews Add Safari web contexts to the list of contexts available during a native/webview app test. This is useful if the test opens Safari and needs to be able to interact with it. Defaults to false . true or false appium:safariLogAllCommunication Log all plists sent to and received from the Web Inspector, as plain text. For some operations this can be a lot of data, so it is recommended to be used only when necessary. Defaults to false . true or false appium:safariLogAllCommunicationHexDump Log all communication sent to and received from the Web Inspector, as raw hex dump and printable characters. This logging is done before any data manipulation, and so can elucidate some communication issues. Like appium:safariLogAllCommunication , this can produce a lot of data in some cases, so it is recommended to be used only when necessary. Defaults to false . true or false appium:safariSocketChunkSize The size, in bytes , of the data to be sent to the Web Inspector on iOS 11+ real devices. Some devices hang when sending large amounts of data to the Web Inspector, and breaking them into smaller parts can be helpful in those cases. Defaults to 16384 (also the maximum possible) e.g., 1000 appium:safariWebInspectorMaxFrameLength The maximum size in bytes of a single data frame for the Web Inspector. Too high values could introduce slowness and/or memory leaks. Too low values could introduce possible buffer overflow exceptions. Defaults to 20MB ( 20*1024*1024 ) e.g. 1024 , 100*1024*1024 appium:additionalWebviewBundleIds Array (or JSON array) of possible bundle identifiers for webviews. This is sometimes necessary if the Web Inspector is found to be returning a modified bundle identifier for the app. Defaults to [] e.g., ['io.appium.modifiedId', 'ABCDEF'] appium:webviewConnectTimeout The time to wait, in ms , for the initial presence of webviews in MobileSafari or hybrid apps. Defaults to 0 e.g., '5000' appium:safariIgnoreWebHostnames Provide a list of hostnames (comma-separated) that the Safari automation tools should ignore. This is to provide a workaround to prevent a webkit bug where the web context is unintentionally changed to a 3rd party website and the test gets stuck. The common culprits are search engines (yahoo, bing, google) and about:blank e.g. 'www.yahoo.com, www.bing.com, www.google.com, about:blank' appium:nativeWebTap Enable native, non-javascript-based taps being in web context mode. Defaults to false . Warning: sometimes the preciseness of native taps could be broken, because there is no reliable way to map web element coordinates to native ones. true appium:nativeWebTapStrict Enforce native taps to be done by XCUITest driver rather than WebDriverAgent. Only applicable if nativeWebTap is enabled. false by default false appium:safariInitialUrl Initial safari url, default is a local welcome page. Setting it to an empty string will skip the initial navigation. e.g. https://www.github.com appium:safariAllowPopups (Simulator only) Allow javascript to open new windows in Safari. Default keeps current sim setting. true or false appium:safariIgnoreFraudWarning (Simulator only) Prevent Safari from showing a fraudulent website warning. Default keeps current sim setting. true or false appium:safariOpenLinksInBackground (Simulator only) Whether Safari should allow links to open in new windows. Default keeps current sim setting. true or false appium:webviewConnectRetries Number of times to send connection message to remote debugger, to get webview. Default: 8 e.g., 12 appium:webkitResponseTimeout (Real device only) Set the time, in ms, to wait for a response from WebKit in a Safari session. Defaults to 5000 e.g., 10000 appium:enableAsyncExecuteFromHttps Capability to allow simulators to execute asynchronous JavaScript on pages using HTTPS. Defaults to false true or false appium:fullContextList Returns the detailed information on contexts for the get available context command. If this capability is enabled, then each item in the returned contexts list would additionally include WebView title, full URL and the bundle identifier. Defaults to false . true or false appium:enablePerformanceLogging Enable Safari's performance logging (default false ) true , false appium:autoWebview Move directly into Webview context if available. Default false true , false Other Capability Description Values appium:resetOnSessionStartOnly Whether to perform reset on test session finish ( false ) or not ( true ). Keeping this variable set to true and Simulator running (the default behaviour since version 1.6.4) may significantly shorten the duration of test session initialization. Either true or false . Defaults to true appium:commandTimeouts Custom timeout(s) in milliseconds for WDA backend commands execution. This might be useful if WDA backend freezes unexpectedly or requires too much time to fail and blocks automated test execution. The value is expected to be of type string and can either contain max milliseconds to wait for each WDA command to be executed before terminating the session forcefully or a valid JSON string, where keys are internal Appium command names (you can find these in logs, look for \"Executing command 'command_name'\" records) and values are timeouts in milliseconds. You can also set the 'default' key to assign the timeout for all other commands not explicitly enumerated as JSON keys. '120000' , '{\"findElement\": 40000, \"findElements\": 40000, \"setValue\": 20000, \"default\": 120000}' appium:useJSONSource Get JSON source from WDA and transform it to XML on the Appium server side. Defaults to false . e.g., true appium:skipLogCapture Skips to start capturing logs such as crash, system, safari console and safari network. It might improve performance such as network. Log related commands will not work. Defaults to false . true or false appium:launchWithIDB Launch WebDriverAgentRunner with idb instead of xcodebuild. This could save a significant amout of time by skiping the xcodebuild process, although the idb might not be very reliable, especially with fresh Xcode SDKs. Check the idb repository for more details on possible compatibility issues. Defaults to false true or false appium:showIOSLog Whether to show any logs captured from a device in the appium logs. Default false true or false appium:clearSystemFiles Whether to clean temporary XCTest files (for example logs) when a testing session is closed. false by default true or false appium:newCommandTimeout How long (in seconds) the driver should wait for a new command from the client before assuming the client has stopped sending requests. After the timeout the session is going to be deleted. 60 seconds by default. Setting it to zero disables the timer. e.g. 100","title":"Capabilities"},{"location":"capabilities/#general","text":"Capability Description platformName Could be set to ios . Appium itself is not strict about this capability value if automationName is provided, so feel free to assign it to any supported platform name if this is needed, for example, to make Selenium Grid working. appium:automationName Must always be set to xcuitest . Values of automationName are compared case-insensitively. appium:deviceName The name of the device under test. Consider setting udid for real devices and use this one for Simulator selection instead appium:platformVersion The platform version of an emulator or a real device. This capability is used for device autodetection if udid is not provided appium:udid UDID of the device to be tested. Could be retrieved from Xcode->Window->Devices and Simulators window. Always set this capability if you run parallel tests or use a real device to run your tests. appium:noReset Prevents the device to be reset before the session startup if set to true . This means that the application under test is not going to be terminated neither its data cleaned. false by default appium:fullReset Being set to true always enforces the application under test to be fully uninstalled before starting a new session. false by default appium:printPageSourceOnFindFailure Enforces the server to dump the actual XML page source into the log if any error happens. false by default. browserName The name of the browser to run the test on. If this capability is provided then the driver will try to start the test in Web context mode (Native mode is applied by default). Read Automating hybrid apps for more details. Usually equals to safari . appium:includeDeviceCapsToSessionInfo Whether to include screen information as the result of Get Session Capabilities . It includes pixelRatio , statBarHeight and viewportRect , but it causes an extra API call to WDA which may increase the response time like this issue . Defaults to true . appium:resetLocationService Whether reset the location service in the session deletion on real device. Defaults to false . appium:customSSLCert","title":"General"},{"location":"capabilities/#app","text":"Capability Description appium:bundleId Bundle identifier of the app under test, for example com.mycompany.myapp . The capability value is calculated automatically if app is provided. If neither app or bundleId capability is provided then XCUITest driver starts from the Home screen. appium:app Full path to the application to be tested (the app must be located on the same machine where the server is running). .ipa and .app application extensions are supported. Zipped .app bundles are supported as well. Could also be an URL to a remote location. If neither of the app or bundleId capabilities are provided then the driver starts from the Home screen and expects the test to know what to do next. Do not provide both app and browserName capabilities at once. appium:localizableStringsDir Where to look for localizable strings in the application bundle. Defaults to en.lproj appium:otherApps App or list of apps (as a JSON array) to install prior to running tests. Note that it will not work with iOS real devices. Fore example: [\"http://appium.github.io/appium/assets/TestApp9.4.app.zip\", \"/path/to/app-b.app\"] appium:language Language to set for iOS app, for example fr . Please read Language IDs to get more details about available values for this capability. If a test is executed on a Simulator then UI language is changed as well. You can also change Simulator language in runtime using mobile: configureLocalization extension. appium:locale Locale to set for iOS app, for example fr_CA . Please read Locale IDs to get more details about available values for this capability. If a test is executed on a Simulator then UI locale is changed as well. You can also change Simulator locale in runtime using mobile: configureLocalization extension. appium:calendarFormat Calendar format to set for iOS Simulator, for example gregorian or persian . Can only be set in conjunction with appium:locale . appium:appPushTimeout The timeout for application upload in milliseconds. Works for real devices only. The default value is 30000 ms appium:appInstallStrategy Select application installation strategy for real devices. The following strategies are supported: serial (default) - pushes app files to the device in a sequential order; this is the least performant strategy, although the most reliable; parallel - pushes app files simultaneously; this is usually the the most performant strategy, but sometimes could not be very stable; ios-deploy - tells the driver to use a third-party tool ios-deploy to install the app; obviously the tool must be installed separately first and must be present in PATH before it could be used.","title":"App"},{"location":"capabilities/#webdriveragent","text":"Capability Description Values appium:xcodeOrgId Apple developer team identifier string. Must be used in conjunction with xcodeSigningId to take effect. e.g., JWL241K123 appium:xcodeSigningId String representing a signing certificate. Must be used in conjunction with xcodeOrgId . This is usually just iPhone Developer , so the default (if not included) is iPhone Developer e.g., iPhone Developer appium:xcodeConfigFile Full path to an optional Xcode configuration file that specifies the code signing identity and team for running the WebDriverAgent on the real device. e.g., /path/to/myconfig.xcconfig appium:updatedWDABundleId Bundle id to update WDA to before building and launching on real devices. This bundle id must be associated with a valid provisioning profile. e.g., io.appium.WebDriverAgentRunner appium:keychainPath Full path to the private development key exported from the system keychain. Used in conjunction with keychainPassword when testing on real devices. e.g., /path/to/MyPrivateKey.p12 appium:keychainPassword Password for unlocking keychain specified in keychainPath . e.g., super awesome password appium:derivedDataPath Use along with usePrebuiltWDA capability and choose where to search for the existing WDA app. If the capability is not set then Xcode will store the derived data in the default root taken from preferences. appium:webDriverAgentUrl If provided, Appium will connect to an existing WebDriverAgent instance at this URL instead of starting a new one. e.g., http://localhost:8100 appium:useNewWDA If true , forces uninstall of any existing WebDriverAgent app on device. Set it to true if you want to apply different startup options for WebDriverAgent for each session. Although, it is only guaranteed to work stable on Simulator. Real devices require WebDriverAgent client to run for as long as possible without reinstall/restart to avoid issues like https://github.com/facebook/WebDriverAgent/issues/507. The false value (the default behaviour since driver version 2.35.0) will try to detect currently running WDA listener executed by previous testing session(s) and reuse it if possible, which is highly recommended for real device testing and to speed up suites of multiple tests in general. A new WDA session will be triggered at the default URL (http://localhost:8100) if WDA is not listening and webDriverAgentUrl capability is not set. The negative/unset value of useNewWDA capability has no effect prior to xcuitest driver version 2.35.0. e.g., true appium:wdaLaunchTimeout Time, in ms, to wait for WebDriverAgent to be pingable. Defaults to 60000ms. e.g., 30000 appium:wdaConnectionTimeout Timeout, in ms, for waiting for a response from WebDriverAgent . Defaults to 240000ms. e.g., 1000 appium:wdaStartupRetries Number of times to try to build and launch WebDriverAgent onto the device. Defaults to 2. e.g., 4 appium:wdaStartupRetryInterval Time, in ms, to wait between tries to build and launch WebDriverAgent . Defaults to 10000ms. e.g., 20000 appium:wdaLocalPort This value if specified, will be used to forward traffic from Mac host to real ios devices over USB. Default value is same as port number used by WDA on device. e.g., 8100 appium:wdaBaseUrl This value if specified, will be used as a prefix to build a custom WebDriverAgent url. It is different from webDriverAgentUrl , because if the latter is set then it expects WebDriverAgent to be already listening and skips the building phase. Defaults to http://localhost e.g., http://192.168.1.100 appium:showXcodeLog Whether to display the output of the Xcode command used to run the tests. If this is true , there will be lots of extra logging at startup. Defaults to false e.g., true appium:iosInstallPause Time in milliseconds to pause between installing the application and starting WebDriverAgent on the device. Used particularly for larger applications. Defaults to 0 e.g., 8000 appium:usePrebuiltWDA Skips the build phase of running the WDA app. Building is then the responsibility of the user. Only works for Xcode 8+. Defaults to false . e.g., true appium:shouldUseSingletonTestManager Use default proxy for test management within WebDriverAgent . Setting this to false sometimes helps with socket hangup problems. Defaults to true . e.g., false appium:waitForIdleTimeout The amount of time in float seconds to wait until the application under test is idling. XCTest requires the app's main thread to be idling in order to execute any action on it, so WDA might not even start/freeze if the app under test is constantly hogging the main thread. The default value is 10 (seconds). Setting it to zero disables idling checks completely (not recommended) and has the same effect as setting waitForQuiescence to false . Available since Appium 1.20.0. appium:useXctestrunFile Use Xctestrun file to launch WDA. It will search for such file in bootstrapPath . Expected name of file is WebDriverAgentRunner_iphoneos<sdkVersion>-arm64.xctestrun for real device and WebDriverAgentRunner_iphonesimulator<sdkVersion>-x86_64.xctestrun for simulator. One can do build-for-testing for WebDriverAgent project for simulator and real device and then you will see Product Folder like this and you need to copy content of this folder at bootstrapPath location. Since this capability expects that you have already built WDA project, it neither checks whether you have necessary dependencies to build WDA nor will it try to build project. Defaults to false . Tips: Xcodebuild builds for the target platform version. We'd recommend you to build with minimal OS version which you'd like to run as the original WDA module. e.g. If you build WDA for 12.2, the module cannot run on iOS 11.4 because of loading some module error on simulator. A module built with 11.4 can work on iOS 12.2. (This is xcodebuild's expected behaviour.) e.g., true appium:useSimpleBuildTest Build with build and run test with test in xcodebuild for all Xcode version if this is true , or build with build-for-testing and run tests with test-without-building for over Xcode 8 if this is false . Defaults to false . true or false appium:wdaEventloopIdleDelay Delays the invocation of -[XCUIApplicationProcess setEventLoopHasIdled:] by the number of seconds specified with this capability. This can help quiescence apps that fail to do so for no obvious reason (and creating a session fails for that reason). This increases the time for session creation because -[XCUIApplicationProcess setEventLoopHasIdled:] is called multiple times. If you enable this capability start with at least 3 seconds and try increasing it, if creating the session still fails. Defaults to 0 . e.g. 5 appium:processArguments Process arguments and environment which will be sent to the WebDriverAgent server in a new session request. Please use mobile:launchApp to launch an application with process arguments in the middle of a session. { args: [\"a\", \"b\", \"c\"] , env: { \"a\": \"b\", \"c\": \"d\" } } or '{\"args\": [\"a\", \"b\", \"c\"], \"env\": { \"a\": \"b\", \"c\": \"d\" }}' appium:autoLaunch When set to false , prevents the application under test from being launched automatically as a part of the new session startup process. The launch become the responsibility of the user. Defaults to true . true or false appium:allowProvisioningDeviceRegistration Allow xcodebuild to register your destination device on the developer portal if necessary. Requires a developer account to have been added in Xcode's Accounts preference pane. Defaults to false . true or false appium:resultBundlePath Specify the path to the result bundle path as xcodebuild argument for WebDriverAgent build under a security flag (Please check Opt-in Features section below). WebDriverAgent process must start/stop every time to pick up changed value of this property. Specifying useNewWDA to true may help there. Please read man xcodebuild for more details. e.g. /path/to/resultbundle appium:resultBundleVersion Specify the version of result bundle as xcodebuild argument for WebDriverAgent build. The default value depends on your Xcode version. Please read man xcodebuild for more details. e.g. /path/to/resultbundle appium:maxTypingFrequency Maximum frequency of keystrokes for typing and clear. If your tests are failing because of typing errors, you may want to adjust this. Defaults to 60 keystrokes per minute. e.g., 30 appium:simpleIsVisibleCheck Use native methods for determining visibility of elements. In some cases this takes a long time. Setting this capability to false will cause the system to use the position and size of elements to make sure they are visible on the screen. This can, however, lead to false results in some situations. Defaults to false , except iOS 9.3, where it defaults to true . e.g., true , false appium:waitForQuiescence It allows to turn on/off waiting for application quiescence in WebDriverAgent , while performing queries. The default value is true . You can avoid this kind of issues if you turn it off. Consider using waitForIdleTimeout capability instead for this purpose since Appium 1.20.0 e.g false appium:mjpegServerPort The port number on which WDA broadcasts screenshots stream encoded into MJPEG format from the device under test. It might be necessary to change this value if the default port is busy because of other tests running in parallel. Default value: 9100 e.g. 12000 appium:screenshotQuality Changes the quality of phone display screenshots following xctest/xctimagequality Default value is 1 . 0 is the highest and 2 is the lowest quality. You can also change it via settings command. 0 might cause OutOfMemory crash on high-resolution devices like iPad Pro. e.g. 0 , 1 , 2 appium:autoAcceptAlerts Accept all iOS alerts automatically if they pop up. This includes privacy access permission alerts (e.g., location, contacts, photos). Default is false . true or false appium:autoDismissAlerts Dismiss all iOS alerts automatically if they pop up. This includes privacy access permission alerts (e.g., location, contacts, photos). Default is false . true or false appium:disableAutomaticScreenshots Disable automatic screenshots taken by XCTest at every interaction. Default is up to WebDriverAgent 's config to decide, which currently defaults to true . true or false appium:shouldTerminateApp Specify if the app should be terminated on session end. This capability only has an effect if an application identifier has been passed to the test session (either explicitly, by setting bundleId, or implicitly, by providing app). Default is true unless noReset capability is set to true . true or false appium:forceAppLaunch Specify if the app should be forcefully restarted if it is already running on session startup. This capability only has an effect if an application identifier has been passed to the test session (either explicitly, by setting bundleId, or implicitly, by providing app). Default is true unless noReset capability is set to true . true or false appium:useNativeCachingStrategy Set this capability to false in order to use the custom elements caching strategy. This might help to avoid stale element exception on property change. By default the native XCTest cache resolution is used ( true ) for all native locators (e.g. all, but xpath). Check the corresponding WebDriverAgent pull request for more details. true or false","title":"WebDriverAgent"},{"location":"capabilities/#simulator","text":"Capability Description Values appium:orientation Start a test session in a certain orientation. Note, that Simulator may ignore this capability if the simulated device itself does not support orientation change in its current state. For example, iPhones only allow orientation change to landscape if an app that declares landscape support in its manifest is running. Thus changing the orientation from portrait to something else being on home screen won't have any effect. LANDSCAPE or PORTRAIT appium:scaleFactor Simulator scale factor. This is useful to have if the default resolution of simulated device is greater than the actual display resolution. So you can scale the simulator to see the whole device screen without scrolling. Acceptable values for simulators running Xcode SDK 8 and older are: '1.0', '0.75', '0.5', '0.33' and '0.25' , where '1.0' means 100% scale. For simulators running Xcode SDK 9 and above the value could be any valid positive float number. The capability must be of a string type. appium:connectHardwareKeyboard Set this option to true in order to enable hardware keyboard in Simulator. The preference works only when XCUITest driver launches a simulator instance with this value. It is set to false by default, because this helps to workaround some XCTest bugs. connectHardwareKeyboard: true makes forceSimulatorSoftwareKeyboardPresence: false if no explicit value is set for forceSimulatorSoftwareKeyboardPresence capability since Appium 1.22.0. true or false appium:forceSimulatorSoftwareKeyboardPresence Set this option to true in order to turn software keyboard on and turn hardware keyboard off in Simulator since Appium 1.22.0. This option helps to avoid Keyboard is not present error. It is set to true by default. XCUITest driver respects preset simulator software/hardware keyboard preference when this value is false , so connectHardwareKeyboard: false and forceSimulatorSoftwareKeyboardPresence: false means for XCUITest driver to keep the current Simulator keyboard preferences. This option has priority over connectHardwareKeyboard . true or false Deprecated appium:calendarAccessAuthorized This capability is obsolete. Please use appium:permissions one instead with the calendar key. true or false appium:isHeadless Set this capability to true if automated tests are running on Simulator and the device display is not needed to be visible. This only has an effect since Xcode9 and only for simulators. All running instances of Simulator UI are going to be automatically terminated if headless test is started. false is the default value. e.g., true appium:simulatorWindowCenter Allows to explicitly set the coordinates of Simulator window center for Xcode9+ SDK. This capability only has an effect if Simulator window has not been opened yet for the current session before it started. e.g. {-100.0,100.0} or {500,500} , spaces are not allowed appium:simulatorStartupTimeout Allows to change the default timeout for Simulator startup. By default this value is set to 120000ms (2 minutes), although the startup could take longer on a weak hardware or if other concurrent processes use much system resources during the boot up procedure. e.g. 300000 appium:simulatorTracePointer Whether to highlight pointer moves in the Simulator window. The Simulator UI client must be shut down before the session startup in order for this capability to be applied properly. false by default. e.g. true appium:shutdownOtherSimulators If this capability set to true and the current device under test is an iOS Simulator then Appium will try to shutdown all the other running Simulators before to start a new session. This might be useful while executing webview tests on different devices, since only one device can be debugged remotely at once due to an Apple bug. The capability only has an effect if --relaxed-security command line argument is provided to the server. Defaults to false . e.g. true appium:enforceFreshSimulatorCreation Creates a new simulator in session creation and deletes it in session deletion. Defaults to false . true or false appium:keepKeyChains Set the capability to true in order to preserve Simulator keychains folder after full reset. This feature has no effect on real devices. Defaults to false e.g. true appium:keychainsExcludePatterns This capability accepts comma-separated path patterns, which are going to be excluded from keychains restore while full reset is being performed on Simulator. It might be useful if you want to exclude only particular keychain types from being restored, like the applications keychain. This feature has no effect on real devices. e.g. *keychain*.db* to exclude applications keychain from being restored appium:reduceMotion It allows to turn on/off reduce motion accessibility preference. Setting reduceMotion on helps to reduce flakiness during tests. Only on simulators e.g true appium:reduceTransparency It allows you to turn on/off reduce transparency accessibility preference. Setting reduceTransparency on helps to reduce screenshot image distortion during tests. Only on simulators e.g true appium:permissions Allows to set permissions for the specified application bundle on Simulator only. The capability value is expected to be a valid JSON string with {\"<bundleId1>\": {\"<serviceName1>\": \"<serviceStatus1>\", ...}, ...} format. Since Xcode SDK 11.4 Apple provides native APIs to interact with application settings. Check the output of xcrun simctl privacy booted command to get the list of available permission names. Use yes , no and unset as values in order to grant , revoke or reset the corresponding permission. Below Xcode SDK 11.4 it is required that applesimutils package is installed and available in PATH. The list of available service names and statuses can be found at https://github.com/wix/AppleSimulatorUtils. e. g. {\"com.apple.mobilecal\": {\"calendar\": \"YES\"}} appium:iosSimulatorLogsPredicate Set the --predicate flag in the ios simulator logs e.g.: 'process != \"locationd\" AND process != \"DTServiceHub\"' AND process != \"mobileassetd\" appium:simulatorPasteboardAutomaticSync Handle the -PasteboardAutomaticSync flag when simulator process launches. It could improve launching simulator performance not to sync pasteboard with the system when this value is off . on forces the flag enabled. system does not provide the flag to the launching command. on , off , or system is available. They are case insensitive. Defaults to off e.g. system appium:simulatorDevicesSetPath This capability allows to set an alternative path to the simulator devices set in case you have multiple sets deployed on your local system. Such feature could be useful if you, for example, would like to save disk space on the main system volume. e.g. /MyVolume/Devices appium:webkitResponseTimeout (Real device only) Set the time, in ms, to wait for a response from WebKit in a Safari session. Defaults to 5000 e.g., 10000 appium:safariGlobalPreferences Allows changing of Mobile Safari's preferences at the session startup. Check the documentation on arguments of mobile: updateSafariPreferences extension to get more details on the value type requirements. { ShowTabBar: 0, WarnAboutFraudulentWebsites: 0 }","title":"Simulator"},{"location":"capabilities/#web-context","text":"Capability Description Values appium:absoluteWebLocations This capability will direct the Get Element Location command, when used within webviews, to return coordinates which are relative to the origin of the page, rather than relative to the current scroll offset. This capability has no effect outside of webviews. Default false . e.g., true appium:safariGarbageCollect Turns on/off Web Inspector garbage collection when executing scripts on Safari. Turning on may improve performance. Defaults to false . true or false appium:includeSafariInWebviews Add Safari web contexts to the list of contexts available during a native/webview app test. This is useful if the test opens Safari and needs to be able to interact with it. Defaults to false . true or false appium:safariLogAllCommunication Log all plists sent to and received from the Web Inspector, as plain text. For some operations this can be a lot of data, so it is recommended to be used only when necessary. Defaults to false . true or false appium:safariLogAllCommunicationHexDump Log all communication sent to and received from the Web Inspector, as raw hex dump and printable characters. This logging is done before any data manipulation, and so can elucidate some communication issues. Like appium:safariLogAllCommunication , this can produce a lot of data in some cases, so it is recommended to be used only when necessary. Defaults to false . true or false appium:safariSocketChunkSize The size, in bytes , of the data to be sent to the Web Inspector on iOS 11+ real devices. Some devices hang when sending large amounts of data to the Web Inspector, and breaking them into smaller parts can be helpful in those cases. Defaults to 16384 (also the maximum possible) e.g., 1000 appium:safariWebInspectorMaxFrameLength The maximum size in bytes of a single data frame for the Web Inspector. Too high values could introduce slowness and/or memory leaks. Too low values could introduce possible buffer overflow exceptions. Defaults to 20MB ( 20*1024*1024 ) e.g. 1024 , 100*1024*1024 appium:additionalWebviewBundleIds Array (or JSON array) of possible bundle identifiers for webviews. This is sometimes necessary if the Web Inspector is found to be returning a modified bundle identifier for the app. Defaults to [] e.g., ['io.appium.modifiedId', 'ABCDEF'] appium:webviewConnectTimeout The time to wait, in ms , for the initial presence of webviews in MobileSafari or hybrid apps. Defaults to 0 e.g., '5000' appium:safariIgnoreWebHostnames Provide a list of hostnames (comma-separated) that the Safari automation tools should ignore. This is to provide a workaround to prevent a webkit bug where the web context is unintentionally changed to a 3rd party website and the test gets stuck. The common culprits are search engines (yahoo, bing, google) and about:blank e.g. 'www.yahoo.com, www.bing.com, www.google.com, about:blank' appium:nativeWebTap Enable native, non-javascript-based taps being in web context mode. Defaults to false . Warning: sometimes the preciseness of native taps could be broken, because there is no reliable way to map web element coordinates to native ones. true appium:nativeWebTapStrict Enforce native taps to be done by XCUITest driver rather than WebDriverAgent. Only applicable if nativeWebTap is enabled. false by default false appium:safariInitialUrl Initial safari url, default is a local welcome page. Setting it to an empty string will skip the initial navigation. e.g. https://www.github.com appium:safariAllowPopups (Simulator only) Allow javascript to open new windows in Safari. Default keeps current sim setting. true or false appium:safariIgnoreFraudWarning (Simulator only) Prevent Safari from showing a fraudulent website warning. Default keeps current sim setting. true or false appium:safariOpenLinksInBackground (Simulator only) Whether Safari should allow links to open in new windows. Default keeps current sim setting. true or false appium:webviewConnectRetries Number of times to send connection message to remote debugger, to get webview. Default: 8 e.g., 12 appium:webkitResponseTimeout (Real device only) Set the time, in ms, to wait for a response from WebKit in a Safari session. Defaults to 5000 e.g., 10000 appium:enableAsyncExecuteFromHttps Capability to allow simulators to execute asynchronous JavaScript on pages using HTTPS. Defaults to false true or false appium:fullContextList Returns the detailed information on contexts for the get available context command. If this capability is enabled, then each item in the returned contexts list would additionally include WebView title, full URL and the bundle identifier. Defaults to false . true or false appium:enablePerformanceLogging Enable Safari's performance logging (default false ) true , false appium:autoWebview Move directly into Webview context if available. Default false true , false","title":"Web Context"},{"location":"capabilities/#other","text":"Capability Description Values appium:resetOnSessionStartOnly Whether to perform reset on test session finish ( false ) or not ( true ). Keeping this variable set to true and Simulator running (the default behaviour since version 1.6.4) may significantly shorten the duration of test session initialization. Either true or false . Defaults to true appium:commandTimeouts Custom timeout(s) in milliseconds for WDA backend commands execution. This might be useful if WDA backend freezes unexpectedly or requires too much time to fail and blocks automated test execution. The value is expected to be of type string and can either contain max milliseconds to wait for each WDA command to be executed before terminating the session forcefully or a valid JSON string, where keys are internal Appium command names (you can find these in logs, look for \"Executing command 'command_name'\" records) and values are timeouts in milliseconds. You can also set the 'default' key to assign the timeout for all other commands not explicitly enumerated as JSON keys. '120000' , '{\"findElement\": 40000, \"findElements\": 40000, \"setValue\": 20000, \"default\": 120000}' appium:useJSONSource Get JSON source from WDA and transform it to XML on the Appium server side. Defaults to false . e.g., true appium:skipLogCapture Skips to start capturing logs such as crash, system, safari console and safari network. It might improve performance such as network. Log related commands will not work. Defaults to false . true or false appium:launchWithIDB Launch WebDriverAgentRunner with idb instead of xcodebuild. This could save a significant amout of time by skiping the xcodebuild process, although the idb might not be very reliable, especially with fresh Xcode SDKs. Check the idb repository for more details on possible compatibility issues. Defaults to false true or false appium:showIOSLog Whether to show any logs captured from a device in the appium logs. Default false true or false appium:clearSystemFiles Whether to clean temporary XCTest files (for example logs) when a testing session is closed. false by default true or false appium:newCommandTimeout How long (in seconds) the driver should wait for a new command from the client before assuming the client has stopped sending requests. After the timeout the session is going to be deleted. 60 seconds by default. Setting it to zero disables the timer. e.g. 100","title":"Other"},{"location":"ci-setup/","text":"Setting up XCUItest driver in an automated environment brings a few challenges with it. Any scenario where user interaction is required must be automated or avoided all together. For real device set up you should first follow the steps in Real Device Configuration tutorial . Keychains One common such scenario is a prompt asking for a keychain to be unlocked in order to sign the WebDriverAgent. There are multiple possible solutions for this: Keychains can be set to have no timeout and be unlocked manually once. This can be done using the keychain access application. Sometimes keychains still lock themselves though and this approach is not recommended. It is possible to create a second keychain , which just stores the required certificate to sign the WebDriverAgent. The issue with this approach is, that Codesign wants to unlock all listed keychains regardless of the specified keychain, thus leading to a password prompt. This can be avoided by setting the default keychain and basically hiding the login keychain at the start of building. Stackoverflow article shows how to utelize this approach. Impractical when running other build jobs simultaneously. Stick with the existing keychains as in approach number one, but explicitly call unlock keychain before each build. This can be done using fastlane unlock_keychain or by using security unlock-keychain directly. The password can be saved as a CI variable/secret or on the machine itself. It is recommended to go with the second or third option. The third one is the easiest and most reliable one to set up at the cost of having to set the keychain password as an environment variable. Xcode When setting up a new machine as a CI server you are probably going to install Xcode, without executing it once, because you are not going to use it for development. Make sure to start Xcode at least once and do the initial set up and install the suggested extensions for iPhone, watchOS and similar. Linking Apple Account This only applies for real device set up. Make sure to link your 'Apple Developer Account' in the machine's system wide \"Account Panel\" when using the \"Basic (automatic) configuration\" described here . Troubleshooting Enable the appium:showXcodeLog capability and check the appium server output.","title":"CI Setup"},{"location":"ci-setup/#keychains","text":"One common such scenario is a prompt asking for a keychain to be unlocked in order to sign the WebDriverAgent. There are multiple possible solutions for this: Keychains can be set to have no timeout and be unlocked manually once. This can be done using the keychain access application. Sometimes keychains still lock themselves though and this approach is not recommended. It is possible to create a second keychain , which just stores the required certificate to sign the WebDriverAgent. The issue with this approach is, that Codesign wants to unlock all listed keychains regardless of the specified keychain, thus leading to a password prompt. This can be avoided by setting the default keychain and basically hiding the login keychain at the start of building. Stackoverflow article shows how to utelize this approach. Impractical when running other build jobs simultaneously. Stick with the existing keychains as in approach number one, but explicitly call unlock keychain before each build. This can be done using fastlane unlock_keychain or by using security unlock-keychain directly. The password can be saved as a CI variable/secret or on the machine itself. It is recommended to go with the second or third option. The third one is the easiest and most reliable one to set up at the cost of having to set the keychain password as an environment variable.","title":"Keychains"},{"location":"ci-setup/#xcode","text":"When setting up a new machine as a CI server you are probably going to install Xcode, without executing it once, because you are not going to use it for development. Make sure to start Xcode at least once and do the initial set up and install the suggested extensions for iPhone, watchOS and similar.","title":"Xcode"},{"location":"ci-setup/#linking-apple-account","text":"This only applies for real device set up. Make sure to link your 'Apple Developer Account' in the machine's system wide \"Account Panel\" when using the \"Basic (automatic) configuration\" described here .","title":"Linking Apple Account"},{"location":"ci-setup/#troubleshooting","text":"Enable the appium:showXcodeLog capability and check the appium server output.","title":"Troubleshooting"},{"location":"cloud-testing/","text":"Cloud Testing With a little bit of configuration, the E2E tests can be run on SauceLabs Real Device Cloud and on Simulators. Environment Variables Running tests on Sauce Real Device Cloud (RDC) or Sauce OnDemand Simulators requires a SauceLabs username and access key. Real Device Cloud Refer to real env file to see which environment variables need to be set to access the RDC Cloud To run tests locally, must set two environment variables CLOUD_PLATFORM_VERSION A supported iOS version . No need to set PLATFORM_VERSION. A device will be dynamically allocated SAUCE_RDC Needs to be set to true Simulator Cloud Refer to sim env file to see which environment variables need to be set for SauceLabs OnDemand Simulator testing To run tests locally, must set three environment variables CLOUD_PLATFORM_VERSION A supported iOS version CLOUD_DEVICE_NAME A supported iOS device that corresponds to that OS version SAUCE_EMUSIM Needs to be set to true Running the Tests Run the tests with the following command: gulp transpile && npx mocha --require build/test/env/env --timeout 4000000 --recursive build/<TEST_PATH>","title":"Cloud Testing"},{"location":"cloud-testing/#cloud-testing","text":"With a little bit of configuration, the E2E tests can be run on SauceLabs Real Device Cloud and on Simulators.","title":"Cloud Testing"},{"location":"cloud-testing/#environment-variables","text":"Running tests on Sauce Real Device Cloud (RDC) or Sauce OnDemand Simulators requires a SauceLabs username and access key.","title":"Environment Variables"},{"location":"cloud-testing/#real-device-cloud","text":"Refer to real env file to see which environment variables need to be set to access the RDC Cloud To run tests locally, must set two environment variables CLOUD_PLATFORM_VERSION A supported iOS version . No need to set PLATFORM_VERSION. A device will be dynamically allocated SAUCE_RDC Needs to be set to true","title":"Real Device Cloud"},{"location":"cloud-testing/#simulator-cloud","text":"Refer to sim env file to see which environment variables need to be set for SauceLabs OnDemand Simulator testing To run tests locally, must set three environment variables CLOUD_PLATFORM_VERSION A supported iOS version CLOUD_DEVICE_NAME A supported iOS device that corresponds to that OS version SAUCE_EMUSIM Needs to be set to true","title":"Simulator Cloud"},{"location":"cloud-testing/#running-the-tests","text":"Run the tests with the following command: gulp transpile && npx mocha --require build/test/env/env --timeout 4000000 --recursive build/<TEST_PATH>","title":"Running the Tests"},{"location":"element-attributes/","text":"XCUITest driver supports the following element attributes: Name Description Example name Could contain either element's identifier or its label , depending on which one is available first. Could also be null . It is recommended to prefer the usage of accessibilityIdentifier over accessibilityLabel for automation purposes, since the identifier property is supposed to stay constant under different locales and does not affect accessibility services such as VoiceOver. 'hello' label Element's label value. Could be null . Since XCUITest driver 4.7.3 (WebDriverAgent 4.8.0), the behavior of this value was better aligned with XCTest, so it could include line breaks ( \\n ). Before this version, line breaks were replaced by spaces. 'hello', 'hello\\nworld' type Element's type name 'XCUIElementTypeButton' visible Whether the element is visible. This value is not available in the \"vanilla\" XCTest and is read directly from the accessibility layer 'false' focused Whether the element is focused . Only available for tvOS 'true' accessible Whether the element is accessible. This value is not available in the \"vanilla\" XCTest and is read directly from the accessibility layer 'true' enabled Whether the element is enabled . 'false' selected Whether the element is selected 'false' index Element's index in the hierarchy relatively to its parent. Only available since Appium 1.20.0. Indexing starts from 0 . '2' rect Element's rectangle. The actual data of this attribute is based on element's frame . {'x': 0, 'y': 0, 'width': 100, 'height': 100} value Element's value. This is a complex attribute, whose calculation algorithm depends on the actual element type. Check WebDriverAgent sources to know more about how it is compiled (method - (NSString *)wdValue ). Could be null 'hello'","title":"Element Attributes"},{"location":"endpoints-wda/","text":"WebDriverAgent JSONWP Endpoints Session-less commands method endpoint req params opt params POST /wda/homescreen GET /source accessible GET /inspector GET /inspector.js GET /screenshot POST /session desiredCapabilities GET /status GET /* ** POST /* ** PUT /* ** DELETE /* ** Session commands method endpoint req params opt params GET /alert/text POST /alert/accept POST /alert/dismiss POST /wda/deactivateApp duration POST /timeouts * GET /source accessible GET /element/:uuid/enabled GET /element/:uuid/rect GET /element/:uuid/attribute/:name GET /element/:uuid/text GET /element/:uuid/displayed GET /wda/element/:uuid/accessible GET /element/:uuid/name POST /element/:uuid/value value POST /element/:uuid/click POST /element/:uuid/clear POST /wda/element/:uuid/doubleTap POST /wda/element/:uuid/touchAndHold duration POST /wda/element/:uuid/scroll name, direction, predicateString, toVisible POST /uiaElement/:uuid/value value POST /wda/element/:uuid/dragfromtoforduration fromX, fromY, toX, toY, duration POST /wda/tap/:uuid x, y POST /wda/keys value GET /window/size POST /element using, value POST /elements using, value GET /wda/uiaElement/:uuid/getVisibleCells POST /element/:uuid/element using, value POST /element/:uuid/elements using, value GET /orientation POST /orientation orientation GET /screenshot POST /wda/touch_id match * implemented but intentionally not supported ** not implemented handlers","title":"Endpoints wda"},{"location":"endpoints-wda/#webdriveragent-jsonwp-endpoints","text":"","title":"WebDriverAgent JSONWP Endpoints"},{"location":"endpoints-wda/#session-less-commands","text":"method endpoint req params opt params POST /wda/homescreen GET /source accessible GET /inspector GET /inspector.js GET /screenshot POST /session desiredCapabilities GET /status GET /* ** POST /* ** PUT /* ** DELETE /* **","title":"Session-less commands"},{"location":"endpoints-wda/#session-commands","text":"method endpoint req params opt params GET /alert/text POST /alert/accept POST /alert/dismiss POST /wda/deactivateApp duration POST /timeouts * GET /source accessible GET /element/:uuid/enabled GET /element/:uuid/rect GET /element/:uuid/attribute/:name GET /element/:uuid/text GET /element/:uuid/displayed GET /wda/element/:uuid/accessible GET /element/:uuid/name POST /element/:uuid/value value POST /element/:uuid/click POST /element/:uuid/clear POST /wda/element/:uuid/doubleTap POST /wda/element/:uuid/touchAndHold duration POST /wda/element/:uuid/scroll name, direction, predicateString, toVisible POST /uiaElement/:uuid/value value POST /wda/element/:uuid/dragfromtoforduration fromX, fromY, toX, toY, duration POST /wda/tap/:uuid x, y POST /wda/keys value GET /window/size POST /element using, value POST /elements using, value GET /wda/uiaElement/:uuid/getVisibleCells POST /element/:uuid/element using, value POST /element/:uuid/elements using, value GET /orientation POST /orientation orientation GET /screenshot POST /wda/touch_id match * implemented but intentionally not supported ** not implemented handlers","title":"Session commands"},{"location":"endpoints/","text":"Appium iOS JSONWP Endpoints Session-less commands method endpoint req params opt params GET /status POST /session desiredCapabilities requiredCapabilities GET /sessions Session commands method endpoint req params opt params GET /:sessionId DELETE /:sessionId POST /timeouts type, ms POST /timeouts/async_script ms POST /timeouts/implicit_wait ms GET /window_handle GET /window_handles GET /url POST /url url POST /forward none POST /back none POST /refresh none POST /execute script, args POST /execute_async script, args GET /screenshot POST /frame id POST /window name DELETE /window GET /window/:windowhandle/size GET /cookie POST /cookie cookie DELETE /cookie DELETE /cookie/:name GET /source GET /title POST /element using, value POST /elements using, value POST /element/active none POST /element/:elementId/element using, value POST /element/:elementId/elements using, value POST /element/:elementId/click none POST /element/:elementId/submit none GET /element/:elementId/text none POST /element/:elementId/value value POST /keys value GET /element/:elementId/name POST /element/:elementId/clear none GET /element/:elementId/selected GET /element/:elementId/enabled GET /element/:elementId/attribute/:name GET /element/:elementId/equals/:otherId GET /element/:elementId/displayed GET /element/:elementId/location GET /element/:elementId/location_in_view GET /element/:elementId/size GET /element/:elementId/css/:propertyName GET /orientation POST /orientation orientation GET /alert_text POST /alert_text text POST /accept_alert none POST /dismiss_alert none POST /moveto element, xoffset, yoffset POST /click button POST /touch/click element POST /touch/flick element, xspeed, yspeed, xoffset, yoffset, speed GET /location POST /location location POST /log type GET /log/types GET /context POST /context name GET /contexts POST /touch/perform actions POST /touch/multi/perform actions elementId POST /receive_async_response status, value Appium-specific commands method endpoint req params opt params POST /appium/device/shake none GET /appium/device/system_time POST /appium/device/lock seconds POST /appium/device/rotate x, y, radius, rotation, touchCount, duration element POST /appium/device/remove_app appId or bundleId POST /appium/device/hide_keyboard strategy, key, keyCode, keyName POST /appium/device/push_file path, data POST /appium/device/pull_file path POST /appium/device/pull_folder path POST /appium/simulator/touch_id match POST /appium/app/launch none POST /appium/app/close none POST /appium/app/background seconds POST /appium/app/strings language, stringFile POST /appium/element/:elementId/value value POST /appium/receive_async_response response","title":"Endpoints"},{"location":"endpoints/#appium-ios-jsonwp-endpoints","text":"","title":"Appium iOS JSONWP Endpoints"},{"location":"endpoints/#session-less-commands","text":"method endpoint req params opt params GET /status POST /session desiredCapabilities requiredCapabilities GET /sessions","title":"Session-less commands"},{"location":"endpoints/#session-commands","text":"method endpoint req params opt params GET /:sessionId DELETE /:sessionId POST /timeouts type, ms POST /timeouts/async_script ms POST /timeouts/implicit_wait ms GET /window_handle GET /window_handles GET /url POST /url url POST /forward none POST /back none POST /refresh none POST /execute script, args POST /execute_async script, args GET /screenshot POST /frame id POST /window name DELETE /window GET /window/:windowhandle/size GET /cookie POST /cookie cookie DELETE /cookie DELETE /cookie/:name GET /source GET /title POST /element using, value POST /elements using, value POST /element/active none POST /element/:elementId/element using, value POST /element/:elementId/elements using, value POST /element/:elementId/click none POST /element/:elementId/submit none GET /element/:elementId/text none POST /element/:elementId/value value POST /keys value GET /element/:elementId/name POST /element/:elementId/clear none GET /element/:elementId/selected GET /element/:elementId/enabled GET /element/:elementId/attribute/:name GET /element/:elementId/equals/:otherId GET /element/:elementId/displayed GET /element/:elementId/location GET /element/:elementId/location_in_view GET /element/:elementId/size GET /element/:elementId/css/:propertyName GET /orientation POST /orientation orientation GET /alert_text POST /alert_text text POST /accept_alert none POST /dismiss_alert none POST /moveto element, xoffset, yoffset POST /click button POST /touch/click element POST /touch/flick element, xspeed, yspeed, xoffset, yoffset, speed GET /location POST /location location POST /log type GET /log/types GET /context POST /context name GET /contexts POST /touch/perform actions POST /touch/multi/perform actions elementId POST /receive_async_response status, value","title":"Session commands"},{"location":"endpoints/#appium-specific-commands","text":"method endpoint req params opt params POST /appium/device/shake none GET /appium/device/system_time POST /appium/device/lock seconds POST /appium/device/rotate x, y, radius, rotation, touchCount, duration element POST /appium/device/remove_app appId or bundleId POST /appium/device/hide_keyboard strategy, key, keyCode, keyName POST /appium/device/push_file path, data POST /appium/device/pull_file path POST /appium/device/pull_folder path POST /appium/simulator/touch_id match POST /appium/app/launch none POST /appium/app/close none POST /appium/app/background seconds POST /appium/app/strings language, stringFile POST /appium/element/:elementId/value value POST /appium/receive_async_response response","title":"Appium-specific commands"},{"location":"execute-methods/","text":"Beside of standard W3C APIs the driver provides the following custom command extensions to execute platform specific scenarios: mobile: selectPickerWheelValue Performs selection of the next or previous picker wheel value. This might be useful if these values are populated dynamically, so you don't know which one to select or value selection suing sendKeys API does not work because of an XCTest bug. The method throws an exception if it fails to change the current picker value. Arguments Name Type Required Description Example elementId ( element before version 1.22) string yes PickerWheel's internal element id (as hexadecimal hash string) to perform value selection on. The element must be of type XCUIElementTypePickerWheel abcdef12-1111-2222-3333-444444 order string yes Either next to select the value next to the current one from the target picker wheel or previous to select the previous one. next offset number no The value in range [0.01, 0.5]. It defines how far from picker wheel's center the click should happen. The actual distance is calculated by multiplying this value to the actual picker wheel height. Too small offset value may not change the picker wheel value and too high value may cause the wheel to switch two or more values at once. Usually the optimal value is located in range [0.15, 0.3]. 0.2 by default 0.15 mobile: alert Tries to apply the given action to the currently visible alert. Arguments Name Type Required Description Example action string yes The actual action to apply. Could be either: accept , dismiss or getButtons accept buttonLabel string no The name of the button used to perform the chosen alert action. Only makes sense if the action is accept or dismiss Accept Returned Result The list of alert button names if the selected action is getButtons mobile: setPasteboard Sets the Simulator's pasteboard content to the given value. Does not work for real devices. Arguments Name Type Required Description Example content string yes The content to set hello encoding string no The content's encoding. utf8 by default ascii mobile: getPasteboard Gets the Simulator's pasteboard content. Does not work for real devices. Arguments Name Type Required Description Example encoding string no The expected encoding of the returned string. utf8 by default ascii Returned Result The pasteboard content string. mobile: source Allows to retrieve the source tree of the current page in different representation formats. Arguments Name Type Required Description Example format string yes One of possible page tree source representation formats: xml (the default value), description and json . The xml format generates the output similar to what getPageSource standard API returns. description representation is how XCTest \"sees\" the page internally and is the same string as debugDescription API would return for the root application element. This source representation format is useful for debugging purposes and is the fastest one to fetch. json representation is similar to xml , but the tree hierarchy there is represented as JSON elements tree rather than as XML nodes. description excludedAttributes string no One or more comma-separated attribute names to be excluded from the XML output, thus only makes sense if format is set to xml . It might be sometimes helpful to exclude, for example, the visible attribute, to significantly speed-up page source retrieval. visible,accessible Returned Result The page source tree formatted according to the given format argument. mobile: getContexts Retrieves the list of available contexts including the extended context information, like urls and page names. This is different from the standard getContexts API, because the latter only has web view names without any additional information. In situation where multiple web views are available at once the client code would have to connect to each of them in order to detect the one, which needs to be interacted with. Although, this extra effort is not needed with the information provided by this extension. Arguments Name Type Required Description Example waitForWebviewMs number no Tells Appium for how long (in milliseconds) to wait for web view(s) to appear. 5000 ms by default 10000 Returned Result The list of available context objects along with their properties: id: The identifier of the context. The native context will be 'NATIVE_APP' and the webviews will be 'WEBVIEW_xxx' title: The title associated with the webview content. Could be null url: The url associated with the webview content. Could be null mobile: installApp Installs the given application to the device under test. Make sure the app is built for a correct architecture and is signed with a proper developer signature (for real devices) prior to install it. Arguments Name Type Required Description Example app string yes See the description of the appium:app capability /path/to/my.app timeoutMs number no The maximum time to wait until app install is finished in milliseconds on real devices. If not provided then the value of appium:appPushTimeout capability is used. If the capability is not provided then equals to 240000ms 500000 strategy string no One of possible app installation strategies on real devices. This argument is ignored on simulators. If not provided then the value of appium:appInstallStrategy is used. If the latter is also not provided then serial is used. See the description of appium:appInstallStrategy capability for more details on available values. parallel mobile: isAppInstalled Checks whether the given application is installed on the device under test. Arguments Name Type Required Description Example bundleId string yes The bundle identifier of the application to be checked com.mycompany.myapp Returned Result Either true or false mobile: removeApp Removes the given application from the device under test. Arguments Name Type Required Description Example bundleId string yes The bundle identifier of the application to be removed com.mycompany.myapp Returned Result Either true if the app was successfully uninstalled, otherwise false mobile: launchApp Executes the given app on the device under test. If the app is already running then it would be activated. If the app is not installed or cannot be launched then an exception is thrown. Arguments Name Type Required Description Example bundleId string yes The bundle identifier of the application to be launched com.mycompany.myapp arguments string|array no One or more command line arguments for the app. If the app is already running then this argument is ignored. ['-s', '-m'] environment dict no Environment variables mapping for the app. If the app is already running then this argument is ignored. {'var': 'value'} mobile: terminateApp Terminates the given app on the device under test via XCTest's terminate API. If the app is not installed an exception is thrown. If the app is not running then nothing is done. Arguments Name Type Required Description Example bundleId string yes The bundle identifier of the application to be terminated com.mycompany.myapp Returned Result Either true if the app was successfully terminated, otherwise false mobile: killApp Kill the given app on the real device under test by instruments service. If the app is not running or failed to kill, then nothing is done. XCUITest driver 4.4 and higher does not require py-ios-device . XCUITest driver 4.3 requires py-ios-device . Arguments Name Type Required Description Example bundleId string yes The bundle identifier of the application to be terminated com.mycompany.myapp Returned Result Either true if the app was successfully killed, otherwise false mobile: queryAppState Queries the state of an installed application from the device under test. An exception will be thrown if the app with given identifier is not installed. Arguments Name Type Required Description Example bundleId string yes The bundle identifier of the application to be queried com.mycompany.myapp Returned Result An integer number is returned, which encodes the application state. Possible values are described in XCUIApplicationState XCTest documentation topic. mobile: activateApp Puts the given application to foreground if it is running in the background. An error is thrown if the app is not installed or is not running. Nothing is done if the app is already running in the foreground. Arguments Name Type Required Description Example bundleId string yes The bundle identifier of the application to be activated com.mycompany.myapp mobile: listApps List applications installed on the real device under test. This extension throws an error if called for a Simulator device. Arguments Name Type Required Description Example applicationType string no The type of applications to list. Either System or User (the default one) System Returned Result A list of apps, where each item is a map where keys are bundle identifiers and values are maps of platform-specific app properties. Having UIFileSharingEnabled set to true in the app properties map means this app supports files upload and download into its documents container. Read Pushing/Pulling files for more details. mobile: startPerfRecord Starts performance profiling for the device under test. Relaxing security is mandatory for simulators. It can always work for real devices. Since XCode 12 the method tries to use xctrace tool to record performance stats. The instruments developer utility is used as a fallback for this purpose if xctrace is not available. It is possible to record multiple profiles at the same time. Read Instruments User Guide for more details. If the recording for the given profile is already running then nothing is done. Arguments Name Type Required Description Example timeout number no The maximum count of milliseconds to record the profiling information. It is recommended to always limit the maximum duration of perf record operation, since the resulting logs are pretty huge and may easily exceed the free space on th local storage volume. 300000 ms by default (5 minutes) 600000 profileName string no The name of existing performance profile to apply. Can also contain the full path to the chosen template on the server file system. Note, that not all profiles are supported on mobile devices. Activity Monitor by default. Time Profile pid string or number no The ID of the process to measure the performance for. Set it to current in order to measure the performance of the process, which belongs to the currently active application. All processes running on the device are measured if pid is unset (the default setting). current mobile: stopPerfRecord Stops the performance recording operation previosuly started by mobile: startPerfRecord call. If the previous call has already been completed due to the timeout then its result is returned immediately. An error is thrown if the performance recording has failed to start and recorded no data. Arguments Name Type Required Description Example profileName string no The name of existing performance profile to stop the recording for. Multiple recorders for different profile names could be executed at the same time. Activity Monitor by default. Time Profile remotePath string no The path to the remote location, where the resulting zipped .trace file should be uploaded. The following protocols are supported: http/https, ftp Null or empty string value (the default setting) means the content of resulting file should be zipped, encoded as Base64 and passed as the endpoint response value. An exception will be thrown if the generated file is too big to fit into the available process memory. https://myserver/upload user string no The name of the user for the remote authentication. Only works if remotePath is provided. myuser pass string no The password for the remote authentication. Only works if remotePath is provided. mypassword method string no The http multipart upload method name. Only works if remotePath is provided. PUT by default POST headers dict no Additional headers mapping for multipart http(s) uploads {'User-Agent': 'Myserver 1.0'} fileFieldName string no The name of the form field, where the file content BLOB should be stored for http(s) uploads. file by default payload formFields dict or array no Additional form fields for multipart http(s) uploads {'field2': 'value2'} Returned Result The resulting file in .trace format can be either returned directly as base64-encoded zip archive or uploaded to a remote location (such files could be pretty large), depending on the remotePath argument value. Afterwards it is possible to unarchive and open such file with Xcode Developer Tools. mobile: installCertificate Installs a custom certificate onto the device. Since Xcode SDK 11.4 Apple has added a dedicated simctl subcommand to quickly handle certificates on Simulator over CLI. On real devices the certificate could be installed via CLI if py-ios-device tool is available on the server machine. On simulators before Xcode 11.4 SDK Apple provides no official way to do it via the command line. In such case (and also as a fallback if CLI setup fails) this method tries to wrap the certificate into .mobileconfig format and then deploys the wrapped file to the internal HTTP server, so one can open it via mobile Safari. Then the algorithm goes through the profile installation procedure by clicking the necessary buttons using WebDriverAgent. Arguments Name Type Required Description Example content string yes Base64-encoded content of the public certificate in PEM format a23234... commonName string no Common name of the certificate. If this is not set then the script will try to parse it from the given certificate content. com.myorg isRoot boolean no This option defines where the certificate should be installed to: either Trusted Root Store ( true , the default option) or the Keychain ( false ). On environments other than Xcode 11.4+ Simulator this option is ignored. false Returned Result The content of the generated .mobileconfig file as base64-encoded string. This config might be useful for debugging purposes. If the certificate has been successfully set via CLI then nothing is returned. mobile: listCertificates Lists installed certificates for real devices only if py-ios-device tool is available on the server machine since driver version 4.10.0. Returned Result Returns map of certificates installed on the real device. The response looks like: { 'OrderedIde nt i f iers' : [ 'com.org na me.pro f ile.mdmpro f ile' ], 'Pro f ileMa n i fest ' : { 'com.org na me.pro f ile.mdmpro f ile' : { 'Descrip t io n ' : 'MDM Pro f ile' , 'IsAc t ive' : True } }, 'Pro f ileMe ta da ta ' : { 'com.org na me.pro f ile.mdmpro f ile' : { 'PayloadDescrip t io n ' : 'MDM Pro f ile f or test i n g , 'PayloadDisplayName' : 'MDM Pro f ile' , 'PayloadOrga n iza t io n ' : 'My Org , I n c.' , 'PayloadRemovalDisallowed' : False , 'PayloadUUID' : ' 9 ab 3 fa 27- cc 45-4 c 23- a 94 a -714686397 a 86 ' , 'PayloadVersio n ' : 1 } }, 'S tatus ' : 'Ack n owledged' } mobile: startLogsBroadcast Starts iOS system logs broadcast websocket on the same host and port where Appium server is running at /ws/session/:sessionId:/appium/syslog endpoint. The method will return immediately if the web socket is already listening. Each connected webcoket listener will receive syslog lines as soon as they are visible to Appium. Read Using Mobile Execution Commands to Continuously Stream Device Logs with Appium Appium Pro article for more details on this feature. mobile: stopLogsBroadcast Stops the syslog broadcasting wesocket server previously started by mobile: startLogsBroadcast . This method will return immediately if no server is running. mobile: batteryInfo Reads the battery information from the device under test. This endpoint only returns reliable result on real devices. Returned Result The actual battery info map, which consists of the following entries: level: Battery level in range [0.0, 1.0], where 1.0 means 100% charge. state: Battery state as an integer number. The following values are possible: UIDeviceBatteryStateUnknown = 0 UIDeviceBatteryStateUnplugged = 1 // on battery, discharging UIDeviceBatteryStateCharging = 2 // plugged in, less than 100% UIDeviceBatteryStateFull = 3 // plugged in, at 100% mobile: deviceInfo Returns the miscellaneous information about the device under test. It includes device information via lockdown in a real device since XCUITest driver 4.2.0. Returned Result Check the + (id<FBResponsePayload>)handleGetDeviceInfo:(FBRouteRequest *)request method in FBCustomCommands.m for more details on the available map entries. mobile: getDeviceTime Returns the actual device time. Arguments Name Type Required Description Example format string no The format specifier string. Read MomentJS documentation to get the full list of supported datetime format specifiers. The default format is YYYY-MM-DDTHH:mm:ssZ , which complies to ISO-8601 YYYY-MM-DD HH ss Returned Result The retrieved datetime string formatted according to the given format specfier. mobile: activeAppInfo Returns information about the active application. Returned Result Check the + (id<FBResponsePayload>)handleActiveAppInfo:(FBRouteRequest *)request method in FBCustomCommands.m for more details on the available map entries. mobile: pressButton Emulates press action on the given physical device button. iOS is pressButton: , tvOS is pressButton: or pressButton:forDuration: . mobile: performIoHidEvent calls a more universal API to perform press with duration on any supported device. Arguments Name Type Required Description Example name string yes The name of the button to be pressed. Supported button names for iOS-based devices are (case-insensitive): home , volumeup , volumedown . For tvOS-based devices (case-insensitive): home , up , down , left , right , menu , playpause , select home durationSeconds number no Duration in float seconds for tvOS-based devices since Appium 1.22.0 10 mobile: pushNotification Simulates push notification delivery to Simulator. Only application remote push notifications are supported. VoIP, Complication, File Provider, and other types are not supported. Check the output of xcrun simctl help push command for more details. Arguments Name Type Required Description Example bundleId string yes The bundle identifier of the target application com.apple.Preferences payload map yes Valid Apple Push Notification values. Read the Create the JSON Payload topic of the official Apple documentation for more details on the payload creation. {\"aps\": {\"alert\": {\"title\": \"This is a simulated notification!\"}, \"badge\": 3, \"sound\": \"default\"} } mobile: expectNotification Blocks until the expected notification is delivered. It is a thin wrapper over XCTNSNotificationExpectation and XCTDarwinNotificationExpectation entities. The extension call throws TimeoutError if the expected notification has not been delivered within the given timeout. Arguments Name Type Required Description Example name string yes The name of the notification to expect com.example.fooAllDone type string no Which notification type to expect. Either plain (the default value) to wait for a notification from the default notification center or darwin to wait for a system notification. darwin timeoutSeconds number no For how long to wait until the notification is delivered in float seconds. 60 seconds by default 5.5 mobile: performIoHidEvent Emulates triggering of the given low-level IO HID device event. Constants for possible events are defined in XNU kernel IO HID usage tables . For example, in order to emulate single press on Home button the extension should be called with the following arguments: - page: 0x0C ( kHIDPage_Consumer , select the Customer page) - usage: 0x40 ( kHIDUsage_Csmr_Menu , the Csmr prefix here means this usage is dedicated to the Customer page) - durationSeconds: 0.005 (The event duration should be 5 milliseconds to be recognized as a single press by iOS) Some popular constants: Name Value Description kHIDPage_Consumer 0x0C The page containing all usages prefixed with kHIDUsage_Csmr_ kHIDUsage_Csmr_VolumeIncrement 0xE9 Volume Up kHIDUsage_Csmr_VolumeDecrement 0xEA Volume Down kHIDUsage_Csmr_Menu 0x40 Home kHIDUsage_Csmr_Power 0x30 Power/Lock kHIDUsage_Csmr_Snapshot 0x65 Power + Home Arguments Name Type Required Description Example page int yes The event page identifier. Look for constants perfixed with kHIDPage_ in the table above 0x0C usage int yes The event usage identifier (usages are defined per-page). Look for constants prefixed with kHIDUsage_ in the table above 0x40 durationSeconds number yes The event duration in float seconds. XCTest uses 0.005 for a single press event duration 2.5 mobile: enrollBiometric Enrolls biometric authentication on Simulator. Arguments Name Type Required Description Example isEnabled boolean no Whether to enable/disable biometric enrollment. true by default. true mobile: sendBiometricMatch Emulates biometric match/non-match event on Simulator. The biometric feature is expected to be already enrolled before executing that. Arguments Name Type Required Description Example type string no The biometric feature name. Either touchId or faceId . touchId by default. faceId match boolean no Whether to simulate biometric match ( true , the default value) or non-match ( false ). true mobile: isBiometricEnrolled Checks whether biometric is currently enrolled or not on a Simulator device. Returned Result Either true or false mobile: clearKeychains Clears keychains on Simulator. An exception is thrown for real devices. mobile: getPermission Gets application permission state on Simulator. This method requires WIX applesimutils to be installed on the host where Appium server is running. Arguments Name Type Required Description Example bundleId string yes The bundle identifier of the destination app. com.mycompany.myapp service string yes One of available service names. The following services are supported: calendar , camera , contacts , homekit , microphone , photos , reminders , medialibrary , motion , health , siri , speech . true Returned Result Either 'yes', 'no' or 'unset'. mobile: setPermission Set application permission state on Simulator. This method requires WIX applesimutils to be installed on the host where Appium server is running. Arguments Name Type Required Description Example bundleId string yes The bundle identifier of the destination app. com.mycompany.myapp access map yes One or more access rules to set. The following keys are supported: all (Apply the action to all services), calendar (Allow access to calendar), contacts-limited (Allow access to basic contact info), contacts (Allow access to full contact details), location (Allow access to location services when app is in use), location-always (Allow access to location services at all times), photos-add (Allow adding photos to the photo library), photos (Allow full access to the photo library), media-library (Allow access to the media library), microphone (Allow access to audio input), motion (Allow access to motion and fitness data), reminders (Allow access to reminders), siri (Allow use of the app with Siri.). The following values are supported: yes (To grant the permission), no (To revoke the permission), unset (To reset the permission) {'all': 'yes'} mobile: resetPermission Resets the given permission for the active application under test. Works for both Simulator and real devices using Xcode SDK 11.4+ Arguments Name Type Required Description Example service string or int yes One of available service names. The supported service names are: calendar , camera , contacts , health , homekit , keyboardnet , location , medialibrary , microphone , photos , reminders , systemroot , userdesktop , userdocuments , userdownloads , bluetooth . This could also be an integer protected resource identifier taken from XCUIProtectedResource photos mobile: getAppearance Get the device's UI appearance style. Returned Result An object, with the following entries: - style: The device's UI appearance value. This could be one of: light , dark , unknown , unsupported mobile: setAppearance Set the device's UI appearance style. Arguments Name Type Required Description Example style string yes Either light or dark dark mobile: siriCommand Presents the Siri UI, if it is not currently active, and accepts a string which is then processed as if it were recognized speech. Check the documentation on activateWithVoiceRecognitionText XCTest method for more details. Arguments Name Type Required Description Example text string yes The actual command that will be passed to Siri service Hello Siri mobile: pullFile Pulls a remote file from the device. Arguments Name Type Required Description Example remotePath string yes The path to an existing remote file on the device. This variable can be prefixed with bundle id, so then the file will be pulled from the corresponding application container instead of the default media folder. Use @<app_bundle_id>:<optional_container_type>/<path_to_the_file_or_folder_inside_container> format to pull a file from an application container of the given type. The only supported container type for real devices is documents . You could use listApps extension to check whether this container is available for the particluar app. Containers available for Simulators: app , data , groups , <A specific App Group container> . Eventually the whole Simulator file system is available directly from Finder, so you may pull any file from there by providing a path to it relatively to Simulator's file system root. If the file with the given name does not exist an exception will be thrown. @com.mycompany.myapp:documents/myfile.txt Returned Result Base64-encoded string, which represents the content of the remote file. mobile: pushFile Pushes a local file to the device. Arguments Name Type Required Description Example remotePath string yes The path on the device to where the payload should be written. The value format is similar to the one used in pullFile extension. If the file with the same name already exists then it will be silently overridden. @com.mycompany.myapp:documents/myfile.txt payload string yes Base64-encoded content of the file to be pushed. QXBwaXVt mobile: pullFolder Pulls a remote folder from the device. Arguments Name Type Required Description Example remotePath string yes Same as for pullFile extension, but should be pointing to a remote folder @com.mycompany.myapp:documents/myfolder/ Returned Result Base64-encoded string, which represents the zipped content of the remote folder. mobile: deleteFile Deletes the given file from the device under test. Arguments Name Type Required Description Example remotePath string yes Same as for pullFile extension @com.mycompany.myapp:documents/myfile.txt mobile: deleteFolder Deletes the given folder from the device under test. Arguments Name Type Required Description Example remotePath string yes Same value as for mobile: deleteFile except of the fact it should be pointing to a folder and should end with a single slash / @com.mycompany.myapp:documents/myfolder/ mobile: configureLocalization Change localization settings on the currently booted Simulator. The changed settings are only applied for the newly started applications/activities. Currently running applications will stay unchanged. This means, for example, that the keyboard should be hidden and shown again in order to observe the changed layout, and curresponding apps must be restarted in order to observe their interface using the newly set locale/language. Be careful while setting the actual arguments since their actual values are not strictly checked. This could lead to an unexpected behavior if an incorrect/unsupported language or locale abbreviation is provided. Arguments Name Type Required Description Example keyboard map no On-screen keyboard properties. The name key is required and should be set to a valid locale abbreviation. The layout key is also required. The hardware key is optional and could be omitted or set to Automated . You could switch the keyboard layout in system preferences of your booted simulator, run xcrun simctl spawn booted defaults read .GlobalPreferences.plist , and inspect the value of AppleKeyboards to see possible combinations. {\"name\": \"de_CH\", \"layout\": \"QWERTZ\", \"hardware\": \"Automated\"} language map no System language properties. The name key is required and should be set to a valid language abbreviation. You could switch the system language in preferences of your booted simulator, run xcrun simctl spawn booted defaults read .GlobalPreferences.plist , and inspect the value of AppleLanguages to see possible combinations. {\"name\": \"zh-Hant-CN\"} locale map no System locale properties. The name key is required and should be set to a valid language abbreviation. The calendar key is optonal and could be set to a valid calendar format name. You could switch the system locale/calendar format in preferences of your booted simulator, run xcrun simctl spawn booted defaults read .GlobalPreferences.plist , and inspect the value of AppleLocale to see possible combinations. {\"name\": \"uk_UA\", \"calendar\": \"gregorian\"} Returned Result true if any of settings has been successfully changed. mobile: startAudioRecording Records the given hardware audio input into an .mp4 file. You must allow the audio_record security feature in order to use this extension. Also it is required that FFMpeg is installed on the machibe where Appium server is running. Arguments Name Type Required Description Example audioInput string or int yes The name of the corresponding audio input device to use for the capture. The full list of capture devices could be shown using ffmpeg -f avfoundation -list_devices true -i \"\" Terminal command. 1 audioCodec string no The name of the audio codec. The Advanced Audio Codec (aac) is used by default. aac audioBitrate string no The bitrate of the resulting audio stream. 128k by default. 256k audioChannels string or int no The count of audio channels in the resulting stream. Setting it to 1 will create a single channel (mono) audio stream. 2 By default 1 audioRate string or int no The sampling rate of the resulting audio stream. 44100 by default 22050 timeLimit string or int no The maximum recording time, in seconds. The default value is 180 , the maximum value is 43200 (12 hours). 60 forceRestart boolean no Whether to restart audio capture process forcefully when startRecordingAudio is called ( true ) or ignore the call until the current audio recording is completed ( false , the default value). true mobile: stopAudioRecording Stops recording of the audio input. If no audio recording process is running then the endpoint will try to get the recently recorded file. If no previously recorded file is found and no active audio recording processes are running then the method returns an empty string. Returned Result Base64-encoded content of the recorded media file or an empty string if no audio recording has been started before. mobile: startPcap Start mobile device network traffic capture. This extension only works if py-ios-device utility is installed on the server machine and only supports real iOS devices. Arguments Name Type Required Description Example timeLimitSec string or int no The maximum recording time, in seconds. The default value is 180 , the maximum value is 43200 (12 hours). 60 forceRestart boolean no Whether to restart traffic capture process forcefully when startPcap is called ( true ) or ignore the call until the current traffic capture is completed ( false , the default value). true mobile: stopPcap Stops network traffic capture. If no traffic capture process is running then the endpoint will try to get the recently recorded file. If no previously recorded file is found and no active traffic capture processes are running then the method returns an empty string. Returned Result Base64-encoded content of the traffic capture file (.pcap) or an empty string if no traffic capture has been started before. Netowrk capture files could be opened in Wireshark application. mobile: runXCTest Run a native XCTest script. Launches a subprocess that runs the XC Test and blocks until it is completed. Parses the stdout of the process and returns its result as an array. Facebook's IDB tool is required to run such tests. Arguments Name Type Required Description Example testRunnerBundleId string yes Test app bundle io.appium.XCTesterAppUITests.xctrunner appUnderTestBundleId string yes App-under-test bundle com.mycompany.myapp xcTestBundleID string yes xctest bundle id io.appium.XCTesterAppUITests testType string no Test type. Either ui (the default one), app or logic app env map no Environment variables mapping to be passed to the test {'myvar': 'myvalue'} args array no Launch arguments to start the test with (see https://developer.apple.com/documentation/xctest/xcuiapplication/1500477-launcharguments for reference) ['-arg1', '--arg2'] timeout string or int no Timeout if session doesn't complete after given time (in milliseconds). 360000 ms by default 120000 Returned Result The API calls returns a map with the following entries: results: The array of test results. Each item in this array conists of the following entries: testName: Name of the test (e.g.: 'XCTesterAppUITests - XCTesterAppUITests.XCTesterAppUITests/testExample') passed: Did the tests pass? crashed: Did the tests crash? status: Test result status (e.g.: 'passed', 'failed', 'crashed') duration: How long did the tests take (in seconds) failureMessage: Failure message (if applicable) location The geolocation of the test (if applicable) code: The exit code of the process. 0 value marks a successful execution. signal: The signal that terminated the process. Could be null (e.g.: SIGTERM ) mobile: installXCTestBundle Installs an XCTest bundle to the device under test. Facebook's IDB tool is required to for this API to work. Arguments Name Type Required Description Example xctestBundle string yes Path to your xctest .app bundle. Could be an URL /path/to/my/bundle.app mobile: listXCTestBundles List XCTest bundles that are installed on device. Facebook's IDB tool is required to for this API to work. Returned Result Array of XCTest bundles (e.g.: [\"XCTesterAppUITests.XCTesterAppUITests/testLaunchPerformance\"]) mobile: listXCTestsInTestBundle List XCTests in a test bundle. Facebook's IDB tool is required to for this API to work. Arguments Name Type Required Description Example bundle string yes Bundle ID of the XCTest 'com.bundle.myapp' Returned Result Array of xctests in the test bundle (e.g.: [ 'XCTesterAppUITests.XCTesterAppUITests/testExample', 'XCTesterAppUITests.XCTesterAppUITests/testLaunchPerformance' ] ) mobile: viewportRect Retrieves the viwport dimensions. The viewport is the device's screen size with status bar size subtracted if the latter is present/visible. Returned Result The response looks like {\"value\":{\"left\":0,\"top\":96,\"width\":828,\"height\":1696}} . left and top are distance from the left of the screen and the top of the screen. iOS Drawing Concepts could help about the relationship of coordinate. width and height are the screen's width and height. mobile: deviceScreenInfo Get information about screen. Returned Result The response looks like {\"value\":{\"statusBarSize\":{\"width\":414,\"height\":48},\"scale\":2}} statusBarSize contains status bar dimensions. It is the result of status bar . scale is screen scale . mobile: swipe This gesture performs a simple \"swipe\" gesture on the particular screen element or on the application element, which is usually the whole screen. This method does not accept coordinates and simply emulates single swipe with one finger. It might be useful for such cases like album pagination, switching views, etc. More advanced cases may require to call mobile: dragFromToForDuration , where one can supply coordinates and duration. Arguments Name Type Required Description Example elementId (\"element\" prior to Appium v 1.22) string no The internal element identifier (as hexadecimal hash string) to swipe on. Application element will be used instead if this argument is not provided fe50b60b-916d-420b-8728-ee2072ec53eb direction Either 'up', 'down', 'left' or 'right' yes The direction in which to swipe up velocity number no This argument is optional and is only supported since Appium server version 1.19 and Xcode SDK version 11.4+. The value is measured in pixels per second and same values could behave differently on different devices depending on their display density. Higher values make swipe gesture faster (which usually scrolls larger areas if we apply it to a list) and lower values slow it down. Only values greater than zero have effect. 250 Examples // Java JavascriptExecutor js = ( JavascriptExecutor ) driver ; Map < String , Object > params = new HashMap <> (); params . put ( \"direction\" , \"down\" ); params . put ( \"velocity\" , 2500 ); params . put ( \"element\" , (( RemoteWebElement ) element ). getId ()); js . executeScript ( \"mobile: swipe\" , params ); References swipeDown swipeDownWithVelocity: swipeUp swipeUpWithVelocity: swipeLeft swipeLeftWithVelocity: swipeRight swipeRightWithVelocity: mobile: scroll Scrolls the element or the whole screen. Different scrolling strategies are supported. Arguments define the choosen strategy: either 'name', 'direction', 'predicateString' or 'toVisible' in that order. All strategies are exclusive and only one strategy can be applied at a single moment of time. Use \"mobile: scroll\" to emulate precise scrolling in tables or collection views, where it is already known to which element the scrolling should be performed. Although, there is one known limitation there: in case it is necessary to perform too many scroll gestures on parent container to reach the necessary child element (tens of them) then the method call may fail. Important : The implemntation of this extension relies on several undocumented XCTest features, which might not always be reliable. Thus it might not always work as expected. Arguments Name Type Required Description Example elementId (\"element\" prior to Appium v 1.22) string no The internal element identifier (as hexadecimal hash string) to scroll on (e.g. the container). Application element will be used if this argument is not set fe50b60b-916d-420b-8728-ee2072ec53eb name string no The accessibility id of the child element, to which scrolling is performed. The same result can be achieved by setting predicateString argument to 'name == accessibilityId'. Has no effect if elementId is not a container cell12 direction Either 'up', 'down', 'left' or 'right' yes The main difference from swipe call with the same argument is that scroll will try to move the current viewport exactly to the next/previous page (the term \"page\" means the content, which fits into a single device screen) down predicateString string no The NSPredicate locator of the child element, to which the scrolling should be performed. Has no effect if elementId is not a container label == \"foo\" toVisible boolean no If set to true then asks to scroll to the first visible elementId in the parent container. Has no effect if elementId is not set true Examples # Python driver . execute_script ( 'mobile: scroll' , { 'direction' : 'down' }); mobile: pinch Performs pinch gesture on the given element or on the application element. Arguments Name Type Required Description Example elementId (\"element\" prior to Appium v 1.22) string no The internal element identifier (as hexadecimal hash string) to pinch on. Application element will be used instead if this parameter is not provided fe50b60b-916d-420b-8728-ee2072ec53eb scale number yes Pinch scale of type float. Use a scale between 0 and 1 to \"pinch close\" or zoom out and a scale greater than 1 to \"pinch open\" or zoom in. 0.5 velocity number yes The velocity of the pinch in scale factor per second (float value) 2.2 Examples # Ruby execute_script 'mobile: pinch' , scale : 0 . 5 , velocity : 1 . 1 , element : element . ref Reference pinchWithScale:velocity: mobile: doubleTap Performs double tap gesture on the given element or on the screen. Arguments Name Type Required Description Example elementId (\"element\" prior to Appium v 1.22) string no if x and y are set The internal element identifier (as hexadecimal hash string) to double tap on fe50b60b-916d-420b-8728-ee2072ec53eb x number no if elementId is set Screen x tap coordinate of type float. 100 y number no if elementId is set Screen y tap coordinate of type float. 100 Examples // javascript driver . execute ( 'mobile: doubleTap' , { element : element . value . ELEMENT }); mobile: touchAndHold Performs long press gesture on the given element or on the screen. Arguments Name Type Required Description Example elementId (\"element\" prior to Appium v 1.22) string no if x and y are set The internal element identifier (as hexadecimal hash string) to long tap on fe50b60b-916d-420b-8728-ee2072ec53eb duration number yes The float duration of press action in seconds 1.5 x number no if elementId is set Screen x tap coordinate of type float. 100 y number no if elementId is set Screen y tap coordinate of type float. 100 Examples // c# Dictionary < string , object > tfLongTap = new Dictionary < string , object >(); tfLongTap . Add ( \"element\" , element . Id ); tfLongTap . Add ( \"duration\" , 2.0 ); (( IJavaScriptExecutor ) driver ). ExecuteScript ( \"mobile: touchAndHold\" , tfLongTap ); Reference pressForDuration: mobile: twoFingerTap Performs two finger tap gesture on the given element or on the application element. Arguments Name Type Required Description Example elementId (\"element\" prior to Appium v 1.22) string no The internal element identifier (as hexadecimal hash string) to tap on. Application element will be used instead if this parameter is not provided fe50b60b-916d-420b-8728-ee2072ec53eb Examples // c# Dictionary < string , object > tfTap = new Dictionary < string , object >(); tfTap . Add ( \"element\" , element . Id ); (( IJavaScriptExecutor ) driver ). ExecuteScript ( \"mobile: twoFingerTap\" , tfTap ); Reference twoFingerTap mobile: tap Performs tap gesture by coordinates on the given element or on the screen. Arguments Name Type Required Description Example elementId (\"element\" prior to Appium v 1.22) string no The internal element identifier (as hexadecimal hash string) to tap on. x and y tap coordinates will be calulated relatively to the current element position on the screen if this argument is provided. Otherwise they should be calculated relatively to the active application element. fe50b60b-916d-420b-8728-ee2072ec53eb x number yes Screen x tap coordinate of type float. 100 y number yes Screen y tap coordinate of type float. 100 mobile: dragFromToForDuration Performs drag and drop gesture by coordinates. This can be done either on an element or on the screen Arguments Name Type Required Description Example elementId (\"element\" prior to Appium v 1.22) string no The internal element identifier (as hexadecimal hash string) to perform drag on. All the coordinates will be calculated relatively this this element position on the screen. Absolute screen coordinates are expected if this argument is not set fe50b60b-916d-420b-8728-ee2072ec53eb duration number yes Float number of seconds in range [0.5, 60]. How long the tap gesture at starting drag point should be before to start dragging 5.3 fromX number yes The x coordinate of starting drag point 100 fromY number yes The y coordinate of starting drag point 100 toX number yes The x coordinate of ending drag point 200 toY number yes The y coordinate of ending drag point 200 Examples // Java JavascriptExecutor js = ( JavascriptExecutor ) driver ; Map < String , Object > params = new HashMap <> (); params . put ( \"duration\" , 1.0 ); params . put ( \"fromX\" , 100 ); params . put ( \"fromY\" , 100 ); params . put ( \"toX\" , 200 ); params . put ( \"toY\" , 200 ); params . put ( \"element\" , (( RemoteWebElement ) element ). getId ()); js . executeScript ( \"mobile: dragFromToForDuration\" , params ); Reference clickForDuration:thenDragToElement: mobile: dragFromToWithVelocity Initiates a press-and-hold gesture, drags to another coordinate or an element with a velocity you specify, and holds for a duration you specify. Arguments Name Type Required Description Example fromElementId string no The internal element identifier (as hexadecimal hash string) to start the drag gesture from. Absolute screen coordinates are expected if this argument is not set fe50b60b-916d-420b-8728-ee2072ec53eb toElementId string no The internal element identifier (as hexadecimal hash string) to end the drag gesture on. This parameter is mandatory if fromElementId is provided fe50b60b-916d-420b-8728-ee2072ec53eb pressDuration number yes Float number of seconds in range [0, 60]. How long the tap gesture at starting drag point should be before to start dragging 0.5 holdDuration number yes Float number of seconds in range [0, 60]. The duration for which to hold over the other coordinate or the given element after dragging 0.1 velocity number yes The speed at which to move from the initial press position to the other element or coordinate, expressed in pixels per second 400 fromX number no The x coordinate of starting drag point. Must be provided if fromElementId is not defined 100 fromY number no The y coordinate of starting drag point. Must be provided if fromElementId is not defined 100 toX number no The x coordinate of ending drag point. Must be provided if fromElementId is not defined 200 toY number no The y coordinate of ending drag point. Must be provided if fromElementId is not defined 200 References pressForDuration:thenDragToElement:withVelocity:thenHoldForDuration: pressForDuration:thenDragToCoordinate:withVelocity:thenHoldForDuration: mobile: selectPickerWheelValue Performs selection of the next or previous picker wheel value. This might be useful if these values are populated dynamically, so you don't know which one to select or value selection does not work because of XCTest bug. Arguments Name Type Required Description Example elementId (\"element\" prior to Appium v 1.22) string yes PickerWheel's internal element id (as hexadecimal hash string) to perform value selection on. The element must be of type XCUIElementTypePickerWheel fe50b60b-916d-420b-8728-ee2072ec53eb order string yes Either next to select the value next to the current one from the target picker wheel or previous to select the previous one next offset number no The value in range [0.01, 0.5]. It defines how far from picker wheel's center the click should happen. The actual distance is calculated by multiplying this value to the actual picker wheel height. Too small offset value may not change the picker wheel value and too high value may cause the wheel to switch two or more values at once. Usually the optimal value is located in range [0.15, 0.3]. 0.2 by default 0.3 Examples // Java JavascriptExecutor js = ( JavascriptExecutor ) driver ; Map < String , Object > params = new HashMap <> (); params . put ( \"order\" , \"next\" ); params . put ( \"offset\" , 0.15 ); params . put ( \"element\" , (( RemoteWebElement ) element ). getId ()); js . executeScript ( \"mobile: selectPickerWheelValue\" , params ); mobile: rotateElement Performs rotate gesture on the given element. Arguments Name Type Required Description Example elementId (\"element\" prior to Appium v 1.22) string yes Internal element id (as hexadecimal hash string) to perform rotation on fe50b60b-916d-420b-8728-ee2072ec53eb rotation number yes The rotation of the gesture in radians Math.PI velocity number yes The velocity of the rotation gesture in radians per second Math.PI / 4 Examples // Java JavascriptExecutor js = ( JavascriptExecutor ) driver ; js . executeScript ( \"mobile: rotateElement\" , ImmutableMap . of ( // rotate clockwise, 90 degrees \"rotation\" , - Math . PI / 2 , // in approximately two seconds \"velocity\" , Math . PI / 4 , \"element\" , (( RemoteWebElement ) element ). getId () )); Reference rotate:withVelocity: mobile: tapWithNumberOfTaps Sends one or more taps with one or more touch points since Appium 1.17.1. Arguments Name Type Required Description Example elementId (\"element\" prior to Appium v 1.22) string yes The internal element identifier (as hexadecimal hash string) to perform one or more taps. fe50b60b-916d-420b-8728-ee2072ec53eb numberOfTaps number yes The number of taps 2 numberOfTouches number yes The number of touch points 2 Examples # Ruby e = @driver . find_element :id , 'target element' # Taps the element with a single touch point twice @driver . execute_script 'mobile: tapWithNumberOfTaps' , { element : e . ref , numberOfTaps : 2 , numberOfTouches : 1 } Reference tapWithNumberOfTaps:numberOfTouches: mobile: forcePress Emulates force press on the given element/coordinates. An error is thrown if the target device does not support force press gesture. Arguments Name Type Required Description Example elementId string no The internal element identifier (as hexadecimal hash string) to perform one or more taps. It is expected that both x and y are provided if this argument is ommitted. If the element identifier is provided without coordinates then the actual element's touch point will be calculated automatically by WebDriverAgent. fe50b60b-916d-420b-8728-ee2072ec53eb x number no x coordinate of the gesture. It is calculated relatively to the given element (if provided). Otherwise the gesture destination point is calculated relatively to the active application. 100 y number no y coordinate of the gesture. It is calculated relatively to the given element (if provided). Otherwise the gesture destination point is calculated relatively to the active application 100 duration number no The float number of seconds the force press action would take. If duration is provided then it is also expected that a custom pressure value is provided as well. 0.5 by default. 2.5 pressure number no The float number defining how much pressure to apply. If pressure is provided then it is also expected that a custom duration value is provided as well. 1.0 by default 1.5 mobile: scrollToElement Scrolls the current viewport to the given element. It is expected the destination element is inside a scrollable container and is hittable. The scroll direction is detected automatically. This API uses native XCTest calls, so it performs scrolling pretty fast. The same native call is implicitly performed by a vanilla click API if the destination element is out of the current viewport. An exception is thrown if the scrolling action cannot be performed. This extension is available since the driver version 4.7.0. Arguments Name Type Required Description Example elementId string yes The internal element identifier (as hexadecimal hash string) to scroll to. The destination element must be located in a scrollable container and must be hittable. If the element is already present in the current viewport then no action is performed. fe50b60b-916d-420b-8728-ee2072ec53eb mobile: resetLocationService Reset the location service on real device since Appium 1.22.0. It could delay a few seconds to reflect the location by the system. It raises an error if the device is simulator or an error occurred during the reset. mobile: enableConditionInducer Important: Device conditions are available for real devices running iOS 13.0 and later. This API is going to throw an error if it is called while another condition inducer has been already enabled and is not explicitly disabled. mobile: enableConditionInducer mobile: disableConditionInducer mobile: listConditionInducers The above three extensions are available since the driver version 4.9.0. You can create a condition on a connected device to test your app under adverse conditions, such as poor network connectivity or thermal constraints. When you start a device condition, the operating system on the device behaves as if its environment has changed. The device condition remains active until you stop the device condition or disconnect the device. For example, you can start a device condition, run your app, monitor your app\u2019s energy usage, and then stop the condition. Reference: Test under adverse device conditions (iOS) Name Type Required Description Example conditionID string yes Get the conditionID parameter through the command mobile: availableConditionInducer SlowNetworkCondition profileID string yes Get the profileID parameter through the command mobile: availableConditionInducer SlowNetwork100PctLoss Returned Result Either true or false , where true means enabling of the condition inducer has been successful mobile: listConditionInducers Get all condition inducer configuration profiles Returned Result The response looks like [{ \"profiles\": [ { \"name\": \"100% packet loss\", \"identifier\": \"SlowNetwork100PctLoss\", // enableConditionInducer profileID \"description\": \"Name: 100% Loss Scenario Downlink Bandwidth: 0 Mbps Downlink Latency: 0 ms Downlink Packet Loss Ratio: 100% Uplink Bandwidth: 0 Mbps Uplink Latency: 0 ms Uplink Packet Loss Ratio: 100%\" }, ], \"profilesSorted\": true, \"identifier\": \"SlowNetworkCondition\", // enableConditionInducer conditionID \"isDestructive\": false, \"isInternal\": false, \"activeProfile\": \"\", \"name\": \"Network Link\", \"isActive\": false }] mobile: disableConditionInducer Disable device condition inducer. Usually a persistent connection is maintained after enable the condition inducer, and this method is only valid for this connection. If the connection is disconnected, condition inducer will be automatically disabled Returned Result Either true or false , where true means disabling of the condition inducer has been successful mobile: updateSafariPreferences Updates preferences of Mobile Safari on Simulator Arguments Name Type Required Description Example preferences map yes An object containing Mobile Safari preferences to be updated. The list of available setting names and their values could be retrieved by changing the corresponding Safari settings under Preferences->Safari and then inspecting Library/Preferences/com.apple.mobilesafari.plist file inside of com.apple.mobilesafari app container. The full path to the Mobile Safari's container could be retrieved from xcrun simctl get_app_container <sim_udid> com.apple.mobilesafari data command output. Use the xcrun simctl spawn <sim_udid> defaults read <path_to_plist> command to print the actual .plist content to the Terminal. { ShowTabBar: 0, WarnAboutFraudulentWebsites: 0 }","title":"Execute Methods"},{"location":"execute-methods/#mobile-selectpickerwheelvalue","text":"Performs selection of the next or previous picker wheel value. This might be useful if these values are populated dynamically, so you don't know which one to select or value selection suing sendKeys API does not work because of an XCTest bug. The method throws an exception if it fails to change the current picker value.","title":"mobile: selectPickerWheelValue"},{"location":"execute-methods/#arguments","text":"Name Type Required Description Example elementId ( element before version 1.22) string yes PickerWheel's internal element id (as hexadecimal hash string) to perform value selection on. The element must be of type XCUIElementTypePickerWheel abcdef12-1111-2222-3333-444444 order string yes Either next to select the value next to the current one from the target picker wheel or previous to select the previous one. next offset number no The value in range [0.01, 0.5]. It defines how far from picker wheel's center the click should happen. The actual distance is calculated by multiplying this value to the actual picker wheel height. Too small offset value may not change the picker wheel value and too high value may cause the wheel to switch two or more values at once. Usually the optimal value is located in range [0.15, 0.3]. 0.2 by default 0.15","title":"Arguments"},{"location":"execute-methods/#mobile-alert","text":"Tries to apply the given action to the currently visible alert.","title":"mobile: alert"},{"location":"execute-methods/#arguments_1","text":"Name Type Required Description Example action string yes The actual action to apply. Could be either: accept , dismiss or getButtons accept buttonLabel string no The name of the button used to perform the chosen alert action. Only makes sense if the action is accept or dismiss Accept","title":"Arguments"},{"location":"execute-methods/#returned-result","text":"The list of alert button names if the selected action is getButtons","title":"Returned Result"},{"location":"execute-methods/#mobile-setpasteboard","text":"Sets the Simulator's pasteboard content to the given value. Does not work for real devices.","title":"mobile: setPasteboard"},{"location":"execute-methods/#arguments_2","text":"Name Type Required Description Example content string yes The content to set hello encoding string no The content's encoding. utf8 by default ascii","title":"Arguments"},{"location":"execute-methods/#mobile-getpasteboard","text":"Gets the Simulator's pasteboard content. Does not work for real devices.","title":"mobile: getPasteboard"},{"location":"execute-methods/#arguments_3","text":"Name Type Required Description Example encoding string no The expected encoding of the returned string. utf8 by default ascii","title":"Arguments"},{"location":"execute-methods/#returned-result_1","text":"The pasteboard content string.","title":"Returned Result"},{"location":"execute-methods/#mobile-source","text":"Allows to retrieve the source tree of the current page in different representation formats.","title":"mobile: source"},{"location":"execute-methods/#arguments_4","text":"Name Type Required Description Example format string yes One of possible page tree source representation formats: xml (the default value), description and json . The xml format generates the output similar to what getPageSource standard API returns. description representation is how XCTest \"sees\" the page internally and is the same string as debugDescription API would return for the root application element. This source representation format is useful for debugging purposes and is the fastest one to fetch. json representation is similar to xml , but the tree hierarchy there is represented as JSON elements tree rather than as XML nodes. description excludedAttributes string no One or more comma-separated attribute names to be excluded from the XML output, thus only makes sense if format is set to xml . It might be sometimes helpful to exclude, for example, the visible attribute, to significantly speed-up page source retrieval. visible,accessible","title":"Arguments"},{"location":"execute-methods/#returned-result_2","text":"The page source tree formatted according to the given format argument.","title":"Returned Result"},{"location":"execute-methods/#mobile-getcontexts","text":"Retrieves the list of available contexts including the extended context information, like urls and page names. This is different from the standard getContexts API, because the latter only has web view names without any additional information. In situation where multiple web views are available at once the client code would have to connect to each of them in order to detect the one, which needs to be interacted with. Although, this extra effort is not needed with the information provided by this extension.","title":"mobile: getContexts"},{"location":"execute-methods/#arguments_5","text":"Name Type Required Description Example waitForWebviewMs number no Tells Appium for how long (in milliseconds) to wait for web view(s) to appear. 5000 ms by default 10000","title":"Arguments"},{"location":"execute-methods/#returned-result_3","text":"The list of available context objects along with their properties: id: The identifier of the context. The native context will be 'NATIVE_APP' and the webviews will be 'WEBVIEW_xxx' title: The title associated with the webview content. Could be null url: The url associated with the webview content. Could be null","title":"Returned Result"},{"location":"execute-methods/#mobile-installapp","text":"Installs the given application to the device under test. Make sure the app is built for a correct architecture and is signed with a proper developer signature (for real devices) prior to install it.","title":"mobile: installApp"},{"location":"execute-methods/#arguments_6","text":"Name Type Required Description Example app string yes See the description of the appium:app capability /path/to/my.app timeoutMs number no The maximum time to wait until app install is finished in milliseconds on real devices. If not provided then the value of appium:appPushTimeout capability is used. If the capability is not provided then equals to 240000ms 500000 strategy string no One of possible app installation strategies on real devices. This argument is ignored on simulators. If not provided then the value of appium:appInstallStrategy is used. If the latter is also not provided then serial is used. See the description of appium:appInstallStrategy capability for more details on available values. parallel","title":"Arguments"},{"location":"execute-methods/#mobile-isappinstalled","text":"Checks whether the given application is installed on the device under test.","title":"mobile: isAppInstalled"},{"location":"execute-methods/#arguments_7","text":"Name Type Required Description Example bundleId string yes The bundle identifier of the application to be checked com.mycompany.myapp","title":"Arguments"},{"location":"execute-methods/#returned-result_4","text":"Either true or false","title":"Returned Result"},{"location":"execute-methods/#mobile-removeapp","text":"Removes the given application from the device under test.","title":"mobile: removeApp"},{"location":"execute-methods/#arguments_8","text":"Name Type Required Description Example bundleId string yes The bundle identifier of the application to be removed com.mycompany.myapp","title":"Arguments"},{"location":"execute-methods/#returned-result_5","text":"Either true if the app was successfully uninstalled, otherwise false","title":"Returned Result"},{"location":"execute-methods/#mobile-launchapp","text":"Executes the given app on the device under test. If the app is already running then it would be activated. If the app is not installed or cannot be launched then an exception is thrown.","title":"mobile: launchApp"},{"location":"execute-methods/#arguments_9","text":"Name Type Required Description Example bundleId string yes The bundle identifier of the application to be launched com.mycompany.myapp arguments string|array no One or more command line arguments for the app. If the app is already running then this argument is ignored. ['-s', '-m'] environment dict no Environment variables mapping for the app. If the app is already running then this argument is ignored. {'var': 'value'}","title":"Arguments"},{"location":"execute-methods/#mobile-terminateapp","text":"Terminates the given app on the device under test via XCTest's terminate API. If the app is not installed an exception is thrown. If the app is not running then nothing is done.","title":"mobile: terminateApp"},{"location":"execute-methods/#arguments_10","text":"Name Type Required Description Example bundleId string yes The bundle identifier of the application to be terminated com.mycompany.myapp","title":"Arguments"},{"location":"execute-methods/#returned-result_6","text":"Either true if the app was successfully terminated, otherwise false","title":"Returned Result"},{"location":"execute-methods/#mobile-killapp","text":"Kill the given app on the real device under test by instruments service. If the app is not running or failed to kill, then nothing is done. XCUITest driver 4.4 and higher does not require py-ios-device . XCUITest driver 4.3 requires py-ios-device .","title":"mobile: killApp"},{"location":"execute-methods/#arguments_11","text":"Name Type Required Description Example bundleId string yes The bundle identifier of the application to be terminated com.mycompany.myapp","title":"Arguments"},{"location":"execute-methods/#returned-result_7","text":"Either true if the app was successfully killed, otherwise false","title":"Returned Result"},{"location":"execute-methods/#mobile-queryappstate","text":"Queries the state of an installed application from the device under test. An exception will be thrown if the app with given identifier is not installed.","title":"mobile: queryAppState"},{"location":"execute-methods/#arguments_12","text":"Name Type Required Description Example bundleId string yes The bundle identifier of the application to be queried com.mycompany.myapp","title":"Arguments"},{"location":"execute-methods/#returned-result_8","text":"An integer number is returned, which encodes the application state. Possible values are described in XCUIApplicationState XCTest documentation topic.","title":"Returned Result"},{"location":"execute-methods/#mobile-activateapp","text":"Puts the given application to foreground if it is running in the background. An error is thrown if the app is not installed or is not running. Nothing is done if the app is already running in the foreground.","title":"mobile: activateApp"},{"location":"execute-methods/#arguments_13","text":"Name Type Required Description Example bundleId string yes The bundle identifier of the application to be activated com.mycompany.myapp","title":"Arguments"},{"location":"execute-methods/#mobile-listapps","text":"List applications installed on the real device under test. This extension throws an error if called for a Simulator device.","title":"mobile: listApps"},{"location":"execute-methods/#arguments_14","text":"Name Type Required Description Example applicationType string no The type of applications to list. Either System or User (the default one) System","title":"Arguments"},{"location":"execute-methods/#returned-result_9","text":"A list of apps, where each item is a map where keys are bundle identifiers and values are maps of platform-specific app properties. Having UIFileSharingEnabled set to true in the app properties map means this app supports files upload and download into its documents container. Read Pushing/Pulling files for more details.","title":"Returned Result"},{"location":"execute-methods/#mobile-startperfrecord","text":"Starts performance profiling for the device under test. Relaxing security is mandatory for simulators. It can always work for real devices. Since XCode 12 the method tries to use xctrace tool to record performance stats. The instruments developer utility is used as a fallback for this purpose if xctrace is not available. It is possible to record multiple profiles at the same time. Read Instruments User Guide for more details. If the recording for the given profile is already running then nothing is done.","title":"mobile: startPerfRecord"},{"location":"execute-methods/#arguments_15","text":"Name Type Required Description Example timeout number no The maximum count of milliseconds to record the profiling information. It is recommended to always limit the maximum duration of perf record operation, since the resulting logs are pretty huge and may easily exceed the free space on th local storage volume. 300000 ms by default (5 minutes) 600000 profileName string no The name of existing performance profile to apply. Can also contain the full path to the chosen template on the server file system. Note, that not all profiles are supported on mobile devices. Activity Monitor by default. Time Profile pid string or number no The ID of the process to measure the performance for. Set it to current in order to measure the performance of the process, which belongs to the currently active application. All processes running on the device are measured if pid is unset (the default setting). current","title":"Arguments"},{"location":"execute-methods/#mobile-stopperfrecord","text":"Stops the performance recording operation previosuly started by mobile: startPerfRecord call. If the previous call has already been completed due to the timeout then its result is returned immediately. An error is thrown if the performance recording has failed to start and recorded no data.","title":"mobile: stopPerfRecord"},{"location":"execute-methods/#arguments_16","text":"Name Type Required Description Example profileName string no The name of existing performance profile to stop the recording for. Multiple recorders for different profile names could be executed at the same time. Activity Monitor by default. Time Profile remotePath string no The path to the remote location, where the resulting zipped .trace file should be uploaded. The following protocols are supported: http/https, ftp Null or empty string value (the default setting) means the content of resulting file should be zipped, encoded as Base64 and passed as the endpoint response value. An exception will be thrown if the generated file is too big to fit into the available process memory. https://myserver/upload user string no The name of the user for the remote authentication. Only works if remotePath is provided. myuser pass string no The password for the remote authentication. Only works if remotePath is provided. mypassword method string no The http multipart upload method name. Only works if remotePath is provided. PUT by default POST headers dict no Additional headers mapping for multipart http(s) uploads {'User-Agent': 'Myserver 1.0'} fileFieldName string no The name of the form field, where the file content BLOB should be stored for http(s) uploads. file by default payload formFields dict or array no Additional form fields for multipart http(s) uploads {'field2': 'value2'}","title":"Arguments"},{"location":"execute-methods/#returned-result_10","text":"The resulting file in .trace format can be either returned directly as base64-encoded zip archive or uploaded to a remote location (such files could be pretty large), depending on the remotePath argument value. Afterwards it is possible to unarchive and open such file with Xcode Developer Tools.","title":"Returned Result"},{"location":"execute-methods/#mobile-installcertificate","text":"Installs a custom certificate onto the device. Since Xcode SDK 11.4 Apple has added a dedicated simctl subcommand to quickly handle certificates on Simulator over CLI. On real devices the certificate could be installed via CLI if py-ios-device tool is available on the server machine. On simulators before Xcode 11.4 SDK Apple provides no official way to do it via the command line. In such case (and also as a fallback if CLI setup fails) this method tries to wrap the certificate into .mobileconfig format and then deploys the wrapped file to the internal HTTP server, so one can open it via mobile Safari. Then the algorithm goes through the profile installation procedure by clicking the necessary buttons using WebDriverAgent.","title":"mobile: installCertificate"},{"location":"execute-methods/#arguments_17","text":"Name Type Required Description Example content string yes Base64-encoded content of the public certificate in PEM format a23234... commonName string no Common name of the certificate. If this is not set then the script will try to parse it from the given certificate content. com.myorg isRoot boolean no This option defines where the certificate should be installed to: either Trusted Root Store ( true , the default option) or the Keychain ( false ). On environments other than Xcode 11.4+ Simulator this option is ignored. false","title":"Arguments"},{"location":"execute-methods/#returned-result_11","text":"The content of the generated .mobileconfig file as base64-encoded string. This config might be useful for debugging purposes. If the certificate has been successfully set via CLI then nothing is returned.","title":"Returned Result"},{"location":"execute-methods/#mobile-listcertificates","text":"Lists installed certificates for real devices only if py-ios-device tool is available on the server machine since driver version 4.10.0.","title":"mobile: listCertificates"},{"location":"execute-methods/#returned-result_12","text":"Returns map of certificates installed on the real device. The response looks like: { 'OrderedIde nt i f iers' : [ 'com.org na me.pro f ile.mdmpro f ile' ], 'Pro f ileMa n i fest ' : { 'com.org na me.pro f ile.mdmpro f ile' : { 'Descrip t io n ' : 'MDM Pro f ile' , 'IsAc t ive' : True } }, 'Pro f ileMe ta da ta ' : { 'com.org na me.pro f ile.mdmpro f ile' : { 'PayloadDescrip t io n ' : 'MDM Pro f ile f or test i n g , 'PayloadDisplayName' : 'MDM Pro f ile' , 'PayloadOrga n iza t io n ' : 'My Org , I n c.' , 'PayloadRemovalDisallowed' : False , 'PayloadUUID' : ' 9 ab 3 fa 27- cc 45-4 c 23- a 94 a -714686397 a 86 ' , 'PayloadVersio n ' : 1 } }, 'S tatus ' : 'Ack n owledged' }","title":"Returned Result"},{"location":"execute-methods/#mobile-startlogsbroadcast","text":"Starts iOS system logs broadcast websocket on the same host and port where Appium server is running at /ws/session/:sessionId:/appium/syslog endpoint. The method will return immediately if the web socket is already listening. Each connected webcoket listener will receive syslog lines as soon as they are visible to Appium. Read Using Mobile Execution Commands to Continuously Stream Device Logs with Appium Appium Pro article for more details on this feature.","title":"mobile: startLogsBroadcast"},{"location":"execute-methods/#mobile-stoplogsbroadcast","text":"Stops the syslog broadcasting wesocket server previously started by mobile: startLogsBroadcast . This method will return immediately if no server is running.","title":"mobile: stopLogsBroadcast"},{"location":"execute-methods/#mobile-batteryinfo","text":"Reads the battery information from the device under test. This endpoint only returns reliable result on real devices.","title":"mobile: batteryInfo"},{"location":"execute-methods/#returned-result_13","text":"The actual battery info map, which consists of the following entries: level: Battery level in range [0.0, 1.0], where 1.0 means 100% charge. state: Battery state as an integer number. The following values are possible: UIDeviceBatteryStateUnknown = 0 UIDeviceBatteryStateUnplugged = 1 // on battery, discharging UIDeviceBatteryStateCharging = 2 // plugged in, less than 100% UIDeviceBatteryStateFull = 3 // plugged in, at 100%","title":"Returned Result"},{"location":"execute-methods/#mobile-deviceinfo","text":"Returns the miscellaneous information about the device under test. It includes device information via lockdown in a real device since XCUITest driver 4.2.0.","title":"mobile: deviceInfo"},{"location":"execute-methods/#returned-result_14","text":"Check the + (id<FBResponsePayload>)handleGetDeviceInfo:(FBRouteRequest *)request method in FBCustomCommands.m for more details on the available map entries.","title":"Returned Result"},{"location":"execute-methods/#mobile-getdevicetime","text":"Returns the actual device time.","title":"mobile: getDeviceTime"},{"location":"execute-methods/#arguments_18","text":"Name Type Required Description Example format string no The format specifier string. Read MomentJS documentation to get the full list of supported datetime format specifiers. The default format is YYYY-MM-DDTHH:mm:ssZ , which complies to ISO-8601 YYYY-MM-DD HH ss","title":"Arguments"},{"location":"execute-methods/#returned-result_15","text":"The retrieved datetime string formatted according to the given format specfier.","title":"Returned Result"},{"location":"execute-methods/#mobile-activeappinfo","text":"Returns information about the active application.","title":"mobile: activeAppInfo"},{"location":"execute-methods/#returned-result_16","text":"Check the + (id<FBResponsePayload>)handleActiveAppInfo:(FBRouteRequest *)request method in FBCustomCommands.m for more details on the available map entries.","title":"Returned Result"},{"location":"execute-methods/#mobile-pressbutton","text":"Emulates press action on the given physical device button. iOS is pressButton: , tvOS is pressButton: or pressButton:forDuration: . mobile: performIoHidEvent calls a more universal API to perform press with duration on any supported device.","title":"mobile: pressButton"},{"location":"execute-methods/#arguments_19","text":"Name Type Required Description Example name string yes The name of the button to be pressed. Supported button names for iOS-based devices are (case-insensitive): home , volumeup , volumedown . For tvOS-based devices (case-insensitive): home , up , down , left , right , menu , playpause , select home durationSeconds number no Duration in float seconds for tvOS-based devices since Appium 1.22.0 10","title":"Arguments"},{"location":"execute-methods/#mobile-pushnotification","text":"Simulates push notification delivery to Simulator. Only application remote push notifications are supported. VoIP, Complication, File Provider, and other types are not supported. Check the output of xcrun simctl help push command for more details.","title":"mobile: pushNotification"},{"location":"execute-methods/#arguments_20","text":"Name Type Required Description Example bundleId string yes The bundle identifier of the target application com.apple.Preferences payload map yes Valid Apple Push Notification values. Read the Create the JSON Payload topic of the official Apple documentation for more details on the payload creation. {\"aps\": {\"alert\": {\"title\": \"This is a simulated notification!\"}, \"badge\": 3, \"sound\": \"default\"} }","title":"Arguments"},{"location":"execute-methods/#mobile-expectnotification","text":"Blocks until the expected notification is delivered. It is a thin wrapper over XCTNSNotificationExpectation and XCTDarwinNotificationExpectation entities. The extension call throws TimeoutError if the expected notification has not been delivered within the given timeout.","title":"mobile: expectNotification"},{"location":"execute-methods/#arguments_21","text":"Name Type Required Description Example name string yes The name of the notification to expect com.example.fooAllDone type string no Which notification type to expect. Either plain (the default value) to wait for a notification from the default notification center or darwin to wait for a system notification. darwin timeoutSeconds number no For how long to wait until the notification is delivered in float seconds. 60 seconds by default 5.5","title":"Arguments"},{"location":"execute-methods/#mobile-performiohidevent","text":"Emulates triggering of the given low-level IO HID device event. Constants for possible events are defined in XNU kernel IO HID usage tables . For example, in order to emulate single press on Home button the extension should be called with the following arguments: - page: 0x0C ( kHIDPage_Consumer , select the Customer page) - usage: 0x40 ( kHIDUsage_Csmr_Menu , the Csmr prefix here means this usage is dedicated to the Customer page) - durationSeconds: 0.005 (The event duration should be 5 milliseconds to be recognized as a single press by iOS) Some popular constants: Name Value Description kHIDPage_Consumer 0x0C The page containing all usages prefixed with kHIDUsage_Csmr_ kHIDUsage_Csmr_VolumeIncrement 0xE9 Volume Up kHIDUsage_Csmr_VolumeDecrement 0xEA Volume Down kHIDUsage_Csmr_Menu 0x40 Home kHIDUsage_Csmr_Power 0x30 Power/Lock kHIDUsage_Csmr_Snapshot 0x65 Power + Home","title":"mobile: performIoHidEvent"},{"location":"execute-methods/#arguments_22","text":"Name Type Required Description Example page int yes The event page identifier. Look for constants perfixed with kHIDPage_ in the table above 0x0C usage int yes The event usage identifier (usages are defined per-page). Look for constants prefixed with kHIDUsage_ in the table above 0x40 durationSeconds number yes The event duration in float seconds. XCTest uses 0.005 for a single press event duration 2.5","title":"Arguments"},{"location":"execute-methods/#mobile-enrollbiometric","text":"Enrolls biometric authentication on Simulator.","title":"mobile: enrollBiometric"},{"location":"execute-methods/#arguments_23","text":"Name Type Required Description Example isEnabled boolean no Whether to enable/disable biometric enrollment. true by default. true","title":"Arguments"},{"location":"execute-methods/#mobile-sendbiometricmatch","text":"Emulates biometric match/non-match event on Simulator. The biometric feature is expected to be already enrolled before executing that.","title":"mobile: sendBiometricMatch"},{"location":"execute-methods/#arguments_24","text":"Name Type Required Description Example type string no The biometric feature name. Either touchId or faceId . touchId by default. faceId match boolean no Whether to simulate biometric match ( true , the default value) or non-match ( false ). true","title":"Arguments"},{"location":"execute-methods/#mobile-isbiometricenrolled","text":"Checks whether biometric is currently enrolled or not on a Simulator device.","title":"mobile: isBiometricEnrolled"},{"location":"execute-methods/#returned-result_17","text":"Either true or false","title":"Returned Result"},{"location":"execute-methods/#mobile-clearkeychains","text":"Clears keychains on Simulator. An exception is thrown for real devices.","title":"mobile: clearKeychains"},{"location":"execute-methods/#mobile-getpermission","text":"Gets application permission state on Simulator. This method requires WIX applesimutils to be installed on the host where Appium server is running.","title":"mobile: getPermission"},{"location":"execute-methods/#arguments_25","text":"Name Type Required Description Example bundleId string yes The bundle identifier of the destination app. com.mycompany.myapp service string yes One of available service names. The following services are supported: calendar , camera , contacts , homekit , microphone , photos , reminders , medialibrary , motion , health , siri , speech . true","title":"Arguments"},{"location":"execute-methods/#returned-result_18","text":"Either 'yes', 'no' or 'unset'.","title":"Returned Result"},{"location":"execute-methods/#mobile-setpermission","text":"Set application permission state on Simulator. This method requires WIX applesimutils to be installed on the host where Appium server is running.","title":"mobile: setPermission"},{"location":"execute-methods/#arguments_26","text":"Name Type Required Description Example bundleId string yes The bundle identifier of the destination app. com.mycompany.myapp access map yes One or more access rules to set. The following keys are supported: all (Apply the action to all services), calendar (Allow access to calendar), contacts-limited (Allow access to basic contact info), contacts (Allow access to full contact details), location (Allow access to location services when app is in use), location-always (Allow access to location services at all times), photos-add (Allow adding photos to the photo library), photos (Allow full access to the photo library), media-library (Allow access to the media library), microphone (Allow access to audio input), motion (Allow access to motion and fitness data), reminders (Allow access to reminders), siri (Allow use of the app with Siri.). The following values are supported: yes (To grant the permission), no (To revoke the permission), unset (To reset the permission) {'all': 'yes'}","title":"Arguments"},{"location":"execute-methods/#mobile-resetpermission","text":"Resets the given permission for the active application under test. Works for both Simulator and real devices using Xcode SDK 11.4+","title":"mobile: resetPermission"},{"location":"execute-methods/#arguments_27","text":"Name Type Required Description Example service string or int yes One of available service names. The supported service names are: calendar , camera , contacts , health , homekit , keyboardnet , location , medialibrary , microphone , photos , reminders , systemroot , userdesktop , userdocuments , userdownloads , bluetooth . This could also be an integer protected resource identifier taken from XCUIProtectedResource photos","title":"Arguments"},{"location":"execute-methods/#mobile-getappearance","text":"Get the device's UI appearance style.","title":"mobile: getAppearance"},{"location":"execute-methods/#returned-result_19","text":"An object, with the following entries: - style: The device's UI appearance value. This could be one of: light , dark , unknown , unsupported","title":"Returned Result"},{"location":"execute-methods/#mobile-setappearance","text":"Set the device's UI appearance style.","title":"mobile: setAppearance"},{"location":"execute-methods/#arguments_28","text":"Name Type Required Description Example style string yes Either light or dark dark","title":"Arguments"},{"location":"execute-methods/#mobile-siricommand","text":"Presents the Siri UI, if it is not currently active, and accepts a string which is then processed as if it were recognized speech. Check the documentation on activateWithVoiceRecognitionText XCTest method for more details.","title":"mobile: siriCommand"},{"location":"execute-methods/#arguments_29","text":"Name Type Required Description Example text string yes The actual command that will be passed to Siri service Hello Siri","title":"Arguments"},{"location":"execute-methods/#mobile-pullfile","text":"Pulls a remote file from the device.","title":"mobile: pullFile"},{"location":"execute-methods/#arguments_30","text":"Name Type Required Description Example remotePath string yes The path to an existing remote file on the device. This variable can be prefixed with bundle id, so then the file will be pulled from the corresponding application container instead of the default media folder. Use @<app_bundle_id>:<optional_container_type>/<path_to_the_file_or_folder_inside_container> format to pull a file from an application container of the given type. The only supported container type for real devices is documents . You could use listApps extension to check whether this container is available for the particluar app. Containers available for Simulators: app , data , groups , <A specific App Group container> . Eventually the whole Simulator file system is available directly from Finder, so you may pull any file from there by providing a path to it relatively to Simulator's file system root. If the file with the given name does not exist an exception will be thrown. @com.mycompany.myapp:documents/myfile.txt","title":"Arguments"},{"location":"execute-methods/#returned-result_20","text":"Base64-encoded string, which represents the content of the remote file.","title":"Returned Result"},{"location":"execute-methods/#mobile-pushfile","text":"Pushes a local file to the device.","title":"mobile: pushFile"},{"location":"execute-methods/#arguments_31","text":"Name Type Required Description Example remotePath string yes The path on the device to where the payload should be written. The value format is similar to the one used in pullFile extension. If the file with the same name already exists then it will be silently overridden. @com.mycompany.myapp:documents/myfile.txt payload string yes Base64-encoded content of the file to be pushed. QXBwaXVt","title":"Arguments"},{"location":"execute-methods/#mobile-pullfolder","text":"Pulls a remote folder from the device.","title":"mobile: pullFolder"},{"location":"execute-methods/#arguments_32","text":"Name Type Required Description Example remotePath string yes Same as for pullFile extension, but should be pointing to a remote folder @com.mycompany.myapp:documents/myfolder/","title":"Arguments"},{"location":"execute-methods/#returned-result_21","text":"Base64-encoded string, which represents the zipped content of the remote folder.","title":"Returned Result"},{"location":"execute-methods/#mobile-deletefile","text":"Deletes the given file from the device under test.","title":"mobile: deleteFile"},{"location":"execute-methods/#arguments_33","text":"Name Type Required Description Example remotePath string yes Same as for pullFile extension @com.mycompany.myapp:documents/myfile.txt","title":"Arguments"},{"location":"execute-methods/#mobile-deletefolder","text":"Deletes the given folder from the device under test.","title":"mobile: deleteFolder"},{"location":"execute-methods/#arguments_34","text":"Name Type Required Description Example remotePath string yes Same value as for mobile: deleteFile except of the fact it should be pointing to a folder and should end with a single slash / @com.mycompany.myapp:documents/myfolder/","title":"Arguments"},{"location":"execute-methods/#mobile-configurelocalization","text":"Change localization settings on the currently booted Simulator. The changed settings are only applied for the newly started applications/activities. Currently running applications will stay unchanged. This means, for example, that the keyboard should be hidden and shown again in order to observe the changed layout, and curresponding apps must be restarted in order to observe their interface using the newly set locale/language. Be careful while setting the actual arguments since their actual values are not strictly checked. This could lead to an unexpected behavior if an incorrect/unsupported language or locale abbreviation is provided.","title":"mobile: configureLocalization"},{"location":"execute-methods/#arguments_35","text":"Name Type Required Description Example keyboard map no On-screen keyboard properties. The name key is required and should be set to a valid locale abbreviation. The layout key is also required. The hardware key is optional and could be omitted or set to Automated . You could switch the keyboard layout in system preferences of your booted simulator, run xcrun simctl spawn booted defaults read .GlobalPreferences.plist , and inspect the value of AppleKeyboards to see possible combinations. {\"name\": \"de_CH\", \"layout\": \"QWERTZ\", \"hardware\": \"Automated\"} language map no System language properties. The name key is required and should be set to a valid language abbreviation. You could switch the system language in preferences of your booted simulator, run xcrun simctl spawn booted defaults read .GlobalPreferences.plist , and inspect the value of AppleLanguages to see possible combinations. {\"name\": \"zh-Hant-CN\"} locale map no System locale properties. The name key is required and should be set to a valid language abbreviation. The calendar key is optonal and could be set to a valid calendar format name. You could switch the system locale/calendar format in preferences of your booted simulator, run xcrun simctl spawn booted defaults read .GlobalPreferences.plist , and inspect the value of AppleLocale to see possible combinations. {\"name\": \"uk_UA\", \"calendar\": \"gregorian\"}","title":"Arguments"},{"location":"execute-methods/#returned-result_22","text":"true if any of settings has been successfully changed.","title":"Returned Result"},{"location":"execute-methods/#mobile-startaudiorecording","text":"Records the given hardware audio input into an .mp4 file. You must allow the audio_record security feature in order to use this extension. Also it is required that FFMpeg is installed on the machibe where Appium server is running.","title":"mobile: startAudioRecording"},{"location":"execute-methods/#arguments_36","text":"Name Type Required Description Example audioInput string or int yes The name of the corresponding audio input device to use for the capture. The full list of capture devices could be shown using ffmpeg -f avfoundation -list_devices true -i \"\" Terminal command. 1 audioCodec string no The name of the audio codec. The Advanced Audio Codec (aac) is used by default. aac audioBitrate string no The bitrate of the resulting audio stream. 128k by default. 256k audioChannels string or int no The count of audio channels in the resulting stream. Setting it to 1 will create a single channel (mono) audio stream. 2 By default 1 audioRate string or int no The sampling rate of the resulting audio stream. 44100 by default 22050 timeLimit string or int no The maximum recording time, in seconds. The default value is 180 , the maximum value is 43200 (12 hours). 60 forceRestart boolean no Whether to restart audio capture process forcefully when startRecordingAudio is called ( true ) or ignore the call until the current audio recording is completed ( false , the default value). true","title":"Arguments"},{"location":"execute-methods/#mobile-stopaudiorecording","text":"Stops recording of the audio input. If no audio recording process is running then the endpoint will try to get the recently recorded file. If no previously recorded file is found and no active audio recording processes are running then the method returns an empty string.","title":"mobile: stopAudioRecording"},{"location":"execute-methods/#returned-result_23","text":"Base64-encoded content of the recorded media file or an empty string if no audio recording has been started before.","title":"Returned Result"},{"location":"execute-methods/#mobile-startpcap","text":"Start mobile device network traffic capture. This extension only works if py-ios-device utility is installed on the server machine and only supports real iOS devices.","title":"mobile: startPcap"},{"location":"execute-methods/#arguments_37","text":"Name Type Required Description Example timeLimitSec string or int no The maximum recording time, in seconds. The default value is 180 , the maximum value is 43200 (12 hours). 60 forceRestart boolean no Whether to restart traffic capture process forcefully when startPcap is called ( true ) or ignore the call until the current traffic capture is completed ( false , the default value). true","title":"Arguments"},{"location":"execute-methods/#mobile-stoppcap","text":"Stops network traffic capture. If no traffic capture process is running then the endpoint will try to get the recently recorded file. If no previously recorded file is found and no active traffic capture processes are running then the method returns an empty string.","title":"mobile: stopPcap"},{"location":"execute-methods/#returned-result_24","text":"Base64-encoded content of the traffic capture file (.pcap) or an empty string if no traffic capture has been started before. Netowrk capture files could be opened in Wireshark application.","title":"Returned Result"},{"location":"execute-methods/#mobile-runxctest","text":"Run a native XCTest script. Launches a subprocess that runs the XC Test and blocks until it is completed. Parses the stdout of the process and returns its result as an array. Facebook's IDB tool is required to run such tests.","title":"mobile: runXCTest"},{"location":"execute-methods/#arguments_38","text":"Name Type Required Description Example testRunnerBundleId string yes Test app bundle io.appium.XCTesterAppUITests.xctrunner appUnderTestBundleId string yes App-under-test bundle com.mycompany.myapp xcTestBundleID string yes xctest bundle id io.appium.XCTesterAppUITests testType string no Test type. Either ui (the default one), app or logic app env map no Environment variables mapping to be passed to the test {'myvar': 'myvalue'} args array no Launch arguments to start the test with (see https://developer.apple.com/documentation/xctest/xcuiapplication/1500477-launcharguments for reference) ['-arg1', '--arg2'] timeout string or int no Timeout if session doesn't complete after given time (in milliseconds). 360000 ms by default 120000","title":"Arguments"},{"location":"execute-methods/#returned-result_25","text":"The API calls returns a map with the following entries: results: The array of test results. Each item in this array conists of the following entries: testName: Name of the test (e.g.: 'XCTesterAppUITests - XCTesterAppUITests.XCTesterAppUITests/testExample') passed: Did the tests pass? crashed: Did the tests crash? status: Test result status (e.g.: 'passed', 'failed', 'crashed') duration: How long did the tests take (in seconds) failureMessage: Failure message (if applicable) location The geolocation of the test (if applicable) code: The exit code of the process. 0 value marks a successful execution. signal: The signal that terminated the process. Could be null (e.g.: SIGTERM )","title":"Returned Result"},{"location":"execute-methods/#mobile-installxctestbundle","text":"Installs an XCTest bundle to the device under test. Facebook's IDB tool is required to for this API to work.","title":"mobile: installXCTestBundle"},{"location":"execute-methods/#arguments_39","text":"Name Type Required Description Example xctestBundle string yes Path to your xctest .app bundle. Could be an URL /path/to/my/bundle.app","title":"Arguments"},{"location":"execute-methods/#mobile-listxctestbundles","text":"List XCTest bundles that are installed on device. Facebook's IDB tool is required to for this API to work.","title":"mobile: listXCTestBundles"},{"location":"execute-methods/#returned-result_26","text":"Array of XCTest bundles (e.g.: [\"XCTesterAppUITests.XCTesterAppUITests/testLaunchPerformance\"])","title":"Returned Result"},{"location":"execute-methods/#mobile-listxctestsintestbundle","text":"List XCTests in a test bundle. Facebook's IDB tool is required to for this API to work.","title":"mobile: listXCTestsInTestBundle"},{"location":"execute-methods/#arguments_40","text":"Name Type Required Description Example bundle string yes Bundle ID of the XCTest 'com.bundle.myapp'","title":"Arguments"},{"location":"execute-methods/#returned-result_27","text":"Array of xctests in the test bundle (e.g.: [ 'XCTesterAppUITests.XCTesterAppUITests/testExample', 'XCTesterAppUITests.XCTesterAppUITests/testLaunchPerformance' ] )","title":"Returned Result"},{"location":"execute-methods/#mobile-viewportrect","text":"Retrieves the viwport dimensions. The viewport is the device's screen size with status bar size subtracted if the latter is present/visible.","title":"mobile: viewportRect"},{"location":"execute-methods/#returned-result_28","text":"The response looks like {\"value\":{\"left\":0,\"top\":96,\"width\":828,\"height\":1696}} . left and top are distance from the left of the screen and the top of the screen. iOS Drawing Concepts could help about the relationship of coordinate. width and height are the screen's width and height.","title":"Returned Result"},{"location":"execute-methods/#mobile-devicescreeninfo","text":"Get information about screen.","title":"mobile: deviceScreenInfo"},{"location":"execute-methods/#returned-result_29","text":"The response looks like {\"value\":{\"statusBarSize\":{\"width\":414,\"height\":48},\"scale\":2}} statusBarSize contains status bar dimensions. It is the result of status bar . scale is screen scale .","title":"Returned Result"},{"location":"execute-methods/#mobile-swipe","text":"This gesture performs a simple \"swipe\" gesture on the particular screen element or on the application element, which is usually the whole screen. This method does not accept coordinates and simply emulates single swipe with one finger. It might be useful for such cases like album pagination, switching views, etc. More advanced cases may require to call mobile: dragFromToForDuration , where one can supply coordinates and duration.","title":"mobile: swipe"},{"location":"execute-methods/#arguments_41","text":"Name Type Required Description Example elementId (\"element\" prior to Appium v 1.22) string no The internal element identifier (as hexadecimal hash string) to swipe on. Application element will be used instead if this argument is not provided fe50b60b-916d-420b-8728-ee2072ec53eb direction Either 'up', 'down', 'left' or 'right' yes The direction in which to swipe up velocity number no This argument is optional and is only supported since Appium server version 1.19 and Xcode SDK version 11.4+. The value is measured in pixels per second and same values could behave differently on different devices depending on their display density. Higher values make swipe gesture faster (which usually scrolls larger areas if we apply it to a list) and lower values slow it down. Only values greater than zero have effect. 250","title":"Arguments"},{"location":"execute-methods/#examples","text":"// Java JavascriptExecutor js = ( JavascriptExecutor ) driver ; Map < String , Object > params = new HashMap <> (); params . put ( \"direction\" , \"down\" ); params . put ( \"velocity\" , 2500 ); params . put ( \"element\" , (( RemoteWebElement ) element ). getId ()); js . executeScript ( \"mobile: swipe\" , params );","title":"Examples"},{"location":"execute-methods/#references","text":"swipeDown swipeDownWithVelocity: swipeUp swipeUpWithVelocity: swipeLeft swipeLeftWithVelocity: swipeRight swipeRightWithVelocity:","title":"References"},{"location":"execute-methods/#mobile-scroll","text":"Scrolls the element or the whole screen. Different scrolling strategies are supported. Arguments define the choosen strategy: either 'name', 'direction', 'predicateString' or 'toVisible' in that order. All strategies are exclusive and only one strategy can be applied at a single moment of time. Use \"mobile: scroll\" to emulate precise scrolling in tables or collection views, where it is already known to which element the scrolling should be performed. Although, there is one known limitation there: in case it is necessary to perform too many scroll gestures on parent container to reach the necessary child element (tens of them) then the method call may fail. Important : The implemntation of this extension relies on several undocumented XCTest features, which might not always be reliable. Thus it might not always work as expected.","title":"mobile: scroll"},{"location":"execute-methods/#arguments_42","text":"Name Type Required Description Example elementId (\"element\" prior to Appium v 1.22) string no The internal element identifier (as hexadecimal hash string) to scroll on (e.g. the container). Application element will be used if this argument is not set fe50b60b-916d-420b-8728-ee2072ec53eb name string no The accessibility id of the child element, to which scrolling is performed. The same result can be achieved by setting predicateString argument to 'name == accessibilityId'. Has no effect if elementId is not a container cell12 direction Either 'up', 'down', 'left' or 'right' yes The main difference from swipe call with the same argument is that scroll will try to move the current viewport exactly to the next/previous page (the term \"page\" means the content, which fits into a single device screen) down predicateString string no The NSPredicate locator of the child element, to which the scrolling should be performed. Has no effect if elementId is not a container label == \"foo\" toVisible boolean no If set to true then asks to scroll to the first visible elementId in the parent container. Has no effect if elementId is not set true","title":"Arguments"},{"location":"execute-methods/#examples_1","text":"# Python driver . execute_script ( 'mobile: scroll' , { 'direction' : 'down' });","title":"Examples"},{"location":"execute-methods/#mobile-pinch","text":"Performs pinch gesture on the given element or on the application element.","title":"mobile: pinch"},{"location":"execute-methods/#arguments_43","text":"Name Type Required Description Example elementId (\"element\" prior to Appium v 1.22) string no The internal element identifier (as hexadecimal hash string) to pinch on. Application element will be used instead if this parameter is not provided fe50b60b-916d-420b-8728-ee2072ec53eb scale number yes Pinch scale of type float. Use a scale between 0 and 1 to \"pinch close\" or zoom out and a scale greater than 1 to \"pinch open\" or zoom in. 0.5 velocity number yes The velocity of the pinch in scale factor per second (float value) 2.2","title":"Arguments"},{"location":"execute-methods/#examples_2","text":"# Ruby execute_script 'mobile: pinch' , scale : 0 . 5 , velocity : 1 . 1 , element : element . ref","title":"Examples"},{"location":"execute-methods/#reference","text":"pinchWithScale:velocity:","title":"Reference"},{"location":"execute-methods/#mobile-doubletap","text":"Performs double tap gesture on the given element or on the screen.","title":"mobile: doubleTap"},{"location":"execute-methods/#arguments_44","text":"Name Type Required Description Example elementId (\"element\" prior to Appium v 1.22) string no if x and y are set The internal element identifier (as hexadecimal hash string) to double tap on fe50b60b-916d-420b-8728-ee2072ec53eb x number no if elementId is set Screen x tap coordinate of type float. 100 y number no if elementId is set Screen y tap coordinate of type float. 100","title":"Arguments"},{"location":"execute-methods/#examples_3","text":"// javascript driver . execute ( 'mobile: doubleTap' , { element : element . value . ELEMENT });","title":"Examples"},{"location":"execute-methods/#mobile-touchandhold","text":"Performs long press gesture on the given element or on the screen.","title":"mobile: touchAndHold"},{"location":"execute-methods/#arguments_45","text":"Name Type Required Description Example elementId (\"element\" prior to Appium v 1.22) string no if x and y are set The internal element identifier (as hexadecimal hash string) to long tap on fe50b60b-916d-420b-8728-ee2072ec53eb duration number yes The float duration of press action in seconds 1.5 x number no if elementId is set Screen x tap coordinate of type float. 100 y number no if elementId is set Screen y tap coordinate of type float. 100","title":"Arguments"},{"location":"execute-methods/#examples_4","text":"// c# Dictionary < string , object > tfLongTap = new Dictionary < string , object >(); tfLongTap . Add ( \"element\" , element . Id ); tfLongTap . Add ( \"duration\" , 2.0 ); (( IJavaScriptExecutor ) driver ). ExecuteScript ( \"mobile: touchAndHold\" , tfLongTap );","title":"Examples"},{"location":"execute-methods/#reference_1","text":"pressForDuration:","title":"Reference"},{"location":"execute-methods/#mobile-twofingertap","text":"Performs two finger tap gesture on the given element or on the application element.","title":"mobile: twoFingerTap"},{"location":"execute-methods/#arguments_46","text":"Name Type Required Description Example elementId (\"element\" prior to Appium v 1.22) string no The internal element identifier (as hexadecimal hash string) to tap on. Application element will be used instead if this parameter is not provided fe50b60b-916d-420b-8728-ee2072ec53eb","title":"Arguments"},{"location":"execute-methods/#examples_5","text":"// c# Dictionary < string , object > tfTap = new Dictionary < string , object >(); tfTap . Add ( \"element\" , element . Id ); (( IJavaScriptExecutor ) driver ). ExecuteScript ( \"mobile: twoFingerTap\" , tfTap );","title":"Examples"},{"location":"execute-methods/#reference_2","text":"twoFingerTap","title":"Reference"},{"location":"execute-methods/#mobile-tap","text":"Performs tap gesture by coordinates on the given element or on the screen.","title":"mobile: tap"},{"location":"execute-methods/#arguments_47","text":"Name Type Required Description Example elementId (\"element\" prior to Appium v 1.22) string no The internal element identifier (as hexadecimal hash string) to tap on. x and y tap coordinates will be calulated relatively to the current element position on the screen if this argument is provided. Otherwise they should be calculated relatively to the active application element. fe50b60b-916d-420b-8728-ee2072ec53eb x number yes Screen x tap coordinate of type float. 100 y number yes Screen y tap coordinate of type float. 100","title":"Arguments"},{"location":"execute-methods/#mobile-dragfromtoforduration","text":"Performs drag and drop gesture by coordinates. This can be done either on an element or on the screen","title":"mobile: dragFromToForDuration"},{"location":"execute-methods/#arguments_48","text":"Name Type Required Description Example elementId (\"element\" prior to Appium v 1.22) string no The internal element identifier (as hexadecimal hash string) to perform drag on. All the coordinates will be calculated relatively this this element position on the screen. Absolute screen coordinates are expected if this argument is not set fe50b60b-916d-420b-8728-ee2072ec53eb duration number yes Float number of seconds in range [0.5, 60]. How long the tap gesture at starting drag point should be before to start dragging 5.3 fromX number yes The x coordinate of starting drag point 100 fromY number yes The y coordinate of starting drag point 100 toX number yes The x coordinate of ending drag point 200 toY number yes The y coordinate of ending drag point 200","title":"Arguments"},{"location":"execute-methods/#examples_6","text":"// Java JavascriptExecutor js = ( JavascriptExecutor ) driver ; Map < String , Object > params = new HashMap <> (); params . put ( \"duration\" , 1.0 ); params . put ( \"fromX\" , 100 ); params . put ( \"fromY\" , 100 ); params . put ( \"toX\" , 200 ); params . put ( \"toY\" , 200 ); params . put ( \"element\" , (( RemoteWebElement ) element ). getId ()); js . executeScript ( \"mobile: dragFromToForDuration\" , params );","title":"Examples"},{"location":"execute-methods/#reference_3","text":"clickForDuration:thenDragToElement:","title":"Reference"},{"location":"execute-methods/#mobile-dragfromtowithvelocity","text":"Initiates a press-and-hold gesture, drags to another coordinate or an element with a velocity you specify, and holds for a duration you specify.","title":"mobile: dragFromToWithVelocity"},{"location":"execute-methods/#arguments_49","text":"Name Type Required Description Example fromElementId string no The internal element identifier (as hexadecimal hash string) to start the drag gesture from. Absolute screen coordinates are expected if this argument is not set fe50b60b-916d-420b-8728-ee2072ec53eb toElementId string no The internal element identifier (as hexadecimal hash string) to end the drag gesture on. This parameter is mandatory if fromElementId is provided fe50b60b-916d-420b-8728-ee2072ec53eb pressDuration number yes Float number of seconds in range [0, 60]. How long the tap gesture at starting drag point should be before to start dragging 0.5 holdDuration number yes Float number of seconds in range [0, 60]. The duration for which to hold over the other coordinate or the given element after dragging 0.1 velocity number yes The speed at which to move from the initial press position to the other element or coordinate, expressed in pixels per second 400 fromX number no The x coordinate of starting drag point. Must be provided if fromElementId is not defined 100 fromY number no The y coordinate of starting drag point. Must be provided if fromElementId is not defined 100 toX number no The x coordinate of ending drag point. Must be provided if fromElementId is not defined 200 toY number no The y coordinate of ending drag point. Must be provided if fromElementId is not defined 200","title":"Arguments"},{"location":"execute-methods/#references_1","text":"pressForDuration:thenDragToElement:withVelocity:thenHoldForDuration: pressForDuration:thenDragToCoordinate:withVelocity:thenHoldForDuration:","title":"References"},{"location":"execute-methods/#mobile-selectpickerwheelvalue_1","text":"Performs selection of the next or previous picker wheel value. This might be useful if these values are populated dynamically, so you don't know which one to select or value selection does not work because of XCTest bug.","title":"mobile: selectPickerWheelValue"},{"location":"execute-methods/#arguments_50","text":"Name Type Required Description Example elementId (\"element\" prior to Appium v 1.22) string yes PickerWheel's internal element id (as hexadecimal hash string) to perform value selection on. The element must be of type XCUIElementTypePickerWheel fe50b60b-916d-420b-8728-ee2072ec53eb order string yes Either next to select the value next to the current one from the target picker wheel or previous to select the previous one next offset number no The value in range [0.01, 0.5]. It defines how far from picker wheel's center the click should happen. The actual distance is calculated by multiplying this value to the actual picker wheel height. Too small offset value may not change the picker wheel value and too high value may cause the wheel to switch two or more values at once. Usually the optimal value is located in range [0.15, 0.3]. 0.2 by default 0.3","title":"Arguments"},{"location":"execute-methods/#examples_7","text":"// Java JavascriptExecutor js = ( JavascriptExecutor ) driver ; Map < String , Object > params = new HashMap <> (); params . put ( \"order\" , \"next\" ); params . put ( \"offset\" , 0.15 ); params . put ( \"element\" , (( RemoteWebElement ) element ). getId ()); js . executeScript ( \"mobile: selectPickerWheelValue\" , params );","title":"Examples"},{"location":"execute-methods/#mobile-rotateelement","text":"Performs rotate gesture on the given element.","title":"mobile: rotateElement"},{"location":"execute-methods/#arguments_51","text":"Name Type Required Description Example elementId (\"element\" prior to Appium v 1.22) string yes Internal element id (as hexadecimal hash string) to perform rotation on fe50b60b-916d-420b-8728-ee2072ec53eb rotation number yes The rotation of the gesture in radians Math.PI velocity number yes The velocity of the rotation gesture in radians per second Math.PI / 4","title":"Arguments"},{"location":"execute-methods/#examples_8","text":"// Java JavascriptExecutor js = ( JavascriptExecutor ) driver ; js . executeScript ( \"mobile: rotateElement\" , ImmutableMap . of ( // rotate clockwise, 90 degrees \"rotation\" , - Math . PI / 2 , // in approximately two seconds \"velocity\" , Math . PI / 4 , \"element\" , (( RemoteWebElement ) element ). getId () ));","title":"Examples"},{"location":"execute-methods/#reference_4","text":"rotate:withVelocity:","title":"Reference"},{"location":"execute-methods/#mobile-tapwithnumberoftaps","text":"Sends one or more taps with one or more touch points since Appium 1.17.1.","title":"mobile: tapWithNumberOfTaps"},{"location":"execute-methods/#arguments_52","text":"Name Type Required Description Example elementId (\"element\" prior to Appium v 1.22) string yes The internal element identifier (as hexadecimal hash string) to perform one or more taps. fe50b60b-916d-420b-8728-ee2072ec53eb numberOfTaps number yes The number of taps 2 numberOfTouches number yes The number of touch points 2","title":"Arguments"},{"location":"execute-methods/#examples_9","text":"# Ruby e = @driver . find_element :id , 'target element' # Taps the element with a single touch point twice @driver . execute_script 'mobile: tapWithNumberOfTaps' , { element : e . ref , numberOfTaps : 2 , numberOfTouches : 1 }","title":"Examples"},{"location":"execute-methods/#reference_5","text":"tapWithNumberOfTaps:numberOfTouches:","title":"Reference"},{"location":"execute-methods/#mobile-forcepress","text":"Emulates force press on the given element/coordinates. An error is thrown if the target device does not support force press gesture.","title":"mobile: forcePress"},{"location":"execute-methods/#arguments_53","text":"Name Type Required Description Example elementId string no The internal element identifier (as hexadecimal hash string) to perform one or more taps. It is expected that both x and y are provided if this argument is ommitted. If the element identifier is provided without coordinates then the actual element's touch point will be calculated automatically by WebDriverAgent. fe50b60b-916d-420b-8728-ee2072ec53eb x number no x coordinate of the gesture. It is calculated relatively to the given element (if provided). Otherwise the gesture destination point is calculated relatively to the active application. 100 y number no y coordinate of the gesture. It is calculated relatively to the given element (if provided). Otherwise the gesture destination point is calculated relatively to the active application 100 duration number no The float number of seconds the force press action would take. If duration is provided then it is also expected that a custom pressure value is provided as well. 0.5 by default. 2.5 pressure number no The float number defining how much pressure to apply. If pressure is provided then it is also expected that a custom duration value is provided as well. 1.0 by default 1.5","title":"Arguments"},{"location":"execute-methods/#mobile-scrolltoelement","text":"Scrolls the current viewport to the given element. It is expected the destination element is inside a scrollable container and is hittable. The scroll direction is detected automatically. This API uses native XCTest calls, so it performs scrolling pretty fast. The same native call is implicitly performed by a vanilla click API if the destination element is out of the current viewport. An exception is thrown if the scrolling action cannot be performed. This extension is available since the driver version 4.7.0.","title":"mobile: scrollToElement"},{"location":"execute-methods/#arguments_54","text":"Name Type Required Description Example elementId string yes The internal element identifier (as hexadecimal hash string) to scroll to. The destination element must be located in a scrollable container and must be hittable. If the element is already present in the current viewport then no action is performed. fe50b60b-916d-420b-8728-ee2072ec53eb","title":"Arguments"},{"location":"execute-methods/#mobile-resetlocationservice","text":"Reset the location service on real device since Appium 1.22.0. It could delay a few seconds to reflect the location by the system. It raises an error if the device is simulator or an error occurred during the reset.","title":"mobile: resetLocationService"},{"location":"execute-methods/#mobile-enableconditioninducer","text":"Important: Device conditions are available for real devices running iOS 13.0 and later. This API is going to throw an error if it is called while another condition inducer has been already enabled and is not explicitly disabled. mobile: enableConditionInducer mobile: disableConditionInducer mobile: listConditionInducers The above three extensions are available since the driver version 4.9.0. You can create a condition on a connected device to test your app under adverse conditions, such as poor network connectivity or thermal constraints. When you start a device condition, the operating system on the device behaves as if its environment has changed. The device condition remains active until you stop the device condition or disconnect the device. For example, you can start a device condition, run your app, monitor your app\u2019s energy usage, and then stop the condition. Reference: Test under adverse device conditions (iOS) Name Type Required Description Example conditionID string yes Get the conditionID parameter through the command mobile: availableConditionInducer SlowNetworkCondition profileID string yes Get the profileID parameter through the command mobile: availableConditionInducer SlowNetwork100PctLoss","title":"mobile: enableConditionInducer"},{"location":"execute-methods/#returned-result_30","text":"Either true or false , where true means enabling of the condition inducer has been successful","title":"Returned Result"},{"location":"execute-methods/#mobile-listconditioninducers","text":"Get all condition inducer configuration profiles","title":"mobile: listConditionInducers"},{"location":"execute-methods/#returned-result_31","text":"The response looks like [{ \"profiles\": [ { \"name\": \"100% packet loss\", \"identifier\": \"SlowNetwork100PctLoss\", // enableConditionInducer profileID \"description\": \"Name: 100% Loss Scenario Downlink Bandwidth: 0 Mbps Downlink Latency: 0 ms Downlink Packet Loss Ratio: 100% Uplink Bandwidth: 0 Mbps Uplink Latency: 0 ms Uplink Packet Loss Ratio: 100%\" }, ], \"profilesSorted\": true, \"identifier\": \"SlowNetworkCondition\", // enableConditionInducer conditionID \"isDestructive\": false, \"isInternal\": false, \"activeProfile\": \"\", \"name\": \"Network Link\", \"isActive\": false }]","title":"Returned Result"},{"location":"execute-methods/#mobile-disableconditioninducer","text":"Disable device condition inducer. Usually a persistent connection is maintained after enable the condition inducer, and this method is only valid for this connection. If the connection is disconnected, condition inducer will be automatically disabled","title":"mobile: disableConditionInducer"},{"location":"execute-methods/#returned-result_32","text":"Either true or false , where true means disabling of the condition inducer has been successful","title":"Returned Result"},{"location":"execute-methods/#mobile-updatesafaripreferences","text":"Updates preferences of Mobile Safari on Simulator","title":"mobile: updateSafariPreferences"},{"location":"execute-methods/#arguments_55","text":"Name Type Required Description Example preferences map yes An object containing Mobile Safari preferences to be updated. The list of available setting names and their values could be retrieved by changing the corresponding Safari settings under Preferences->Safari and then inspecting Library/Preferences/com.apple.mobilesafari.plist file inside of com.apple.mobilesafari app container. The full path to the Mobile Safari's container could be retrieved from xcrun simctl get_app_container <sim_udid> com.apple.mobilesafari data command output. Use the xcrun simctl spawn <sim_udid> defaults read <path_to_plist> command to print the actual .plist content to the Terminal. { ShowTabBar: 0, WarnAboutFraudulentWebsites: 0 }","title":"Arguments"},{"location":"ios-predicate/","text":"NOTE : iOS predicates are usable in iOS 9.3 and below using the -ios uiautomation locator strategy and they are usable in iOS 10 and above using the -ios predicate string locator strategy It is worth looking at '-ios uiautomation' search strategy with Predicates . UIAutomation JavaScript API which has the following useful methods: (UIAElement) UIAElementArray.firstWithPredicate(PredicateString predicateString) (UIAElementArray) UIAElementArray.withPredicate(PredicateString predicateString) Native JS search strategy (powered by Apple) provides much more flexibility and is like Xpath. Predicates can be used to restrict an elements set to select only those ones for which some condition is true. '-ios uiautomation' example: // java appiumDriver . findElementsByIosUIAutomation ( \"collectionViews()[0].cells().withPredicate(\\\"ANY staticTexts.isVisible == TRUE\\\")\" ); '-ios predicate string' example: // java appiumDriver . findElementsByIosNsPredicate ( \"isWDVisible == 1\" ); - will select only those UIACollectionCell elements that have visible UIAStaticText child elements, and themselves are childs of 1st UIACollectionView element that should be located under the main app window. Here staticTexts() and isVisible() are methods available in UIAElementArray and UIAElement classes respectively. Note that UIAElementArray numbering begins with 0 unlike Xpath where indexes counting starts from 1 Here's a list of available Predicates (mostly taken from Predicates Programming Guide ) Basic Comparisons = , == - The left-hand expression is equal to the right-hand expression: tableViews()[1].cells().firstWithPredicate(\"label == 'Olivia' \") same in Xpath: /UIATableView[2]/UIATableCell[@label = 'Olivia'][1] >= , => - The left-hand expression is greater than or equal to the right-hand expression. <= , =< - The left-hand expression is less than or equal to the right-hand expression. > - The left-hand expression is greater than the right-hand expression. < - The left-hand expression is less than the right-hand expression. != , <> - The left-hand expression is not equal to the right-hand expression. BETWEEN - The left-hand expression is between, or equal to either of, the values specified in the right-hand side. The right-hand side is a two value array (an array is required to specify order) giving upper and lower bounds. For example, 1 BETWEEN { 0 , 33 } , or $INPUT BETWEEN { $LOWER, $UPPER } . In Objective-C, you could create a BETWEEN predicate as shown in the following example: NSPredicate *betweenPredicate = [NSPredicate predicateWithFormat: @\"attributeName BETWEEN %@\", @[@1, @10]]; This creates a predicate that matches ( ( 1 <= attributeValue ) && ( attributeValue <= 10 ) ) Boolean Value Predicates TRUEPREDICATE - A predicate that always evaluates to TRUE . FALSEPREDICATE - A predicate that always evaluates to FALSE . Basic Compound Predicates AND , && - Logical AND. OR , || - Logical OR. NOT , ! - Logical NOT. String Comparisons String comparisons are by default case and diacritic sensitive. You can modify an operator using the key characters c and d within square braces to specify case and diacritic insensitivity respectively, for example firstName BEGINSWITH[cd] $FIRST_NAME BEGINSWITH - The left-hand expression begins with the right-hand expression. scrollViews()[3].buttons().firstWithPredicate(\"name BEGINSWITH 'results toggle' \") same in Xpath: /UIAScrollView[4]/UIAButton[starts-with(@name, 'results toggle')][1] CONTAINS - The left-hand expression contains the right-hand expression. tableViews()[1].cells().withPredicate(\"ANY collectionViews[0].buttons.name CONTAINS 'opera'\") same in Xpath: /UIATableView[2]/UIATableCell[UIACollectionView[1]/UIAButton[contains(@name, 'opera')]] ENDSWITH - The left-hand expression ends with the right-hand expression. LIKE - The left hand expression equals the right-hand expression: ? and * are allowed as wildcard characters, where ? matches 1 character and * matches 0 or more characters. In Mac OS X v10.4, wildcard characters do not match newline characters. tableViews()[0].cells().firstWithPredicate(\"name LIKE '*Total: $*' \") same in Xpath: /UIATableView[1]/UIATableCell[matches(@name, '.*Total: \\$.*')][1] MATCHES - The left hand expression equals the right hand expression using a regex -style comparison according to ICU v3 (for more details see the ICU User Guide for Regular Expressions ). tableViews().firstWithPredicate(\"value MATCHES '.*of 7' \") same in Xpath: /UIATableView[matches(@value, '.*of 7')][1] Aggregate Operations ANY , SOME - Specifies any of the elements in the following expression. For example ANY children.age < 18 . tableViews()[0].cells().firstWithPredicate(\"SOME staticTexts.name = 'red'\").staticTexts().withName('red') same in Xpath: /UIATableView[1]/UIATableCell[UIAStaticText/@name = 'red'][1]/UIAStaticText[@name = 'red'] ALL - Specifies all of the elements in the following expression. For example ALL children.age < 18 . NONE - Specifies none of the elements in the following expression. For example, NONE children.age < 18 . This is logically equivalent to NOT (ANY ...) . IN - Equivalent to an SQL IN operation, the left-hand side must appear in the collection specified by the right-hand side. For example, name IN { 'Ben', 'Melissa', 'Matthew' } . The collection may be an array, a set, or a dictionary\u2014in the case of a dictionary, its values are used. array[index] - Specifies the element at the specified index in the array. array[FIRST] - Specifies the first element in the array. array[LAST] - Specifies the last element in the array. array[SIZE] - Specifies the size of the array elements()[0].tableViews()[0].cells().withPredicate(\"staticTexts[SIZE] > 2\") same in Xpath: /*[1]/UIATableView[1]/UIATableCell[count(UIAStaticText) > 2] Identifiers C style identifier - Any C style identifier that is not a reserved word. #symbol - Used to escape a reserved word into a user identifier. [\\]{octaldigit}{3} - Used to escape an octal number ( \\ followed by 3 octal digits). [\\][xX]{hexdigit}{2} - Used to escape a hex number ( \\x or \\X followed by 2 hex digits). [\\][uU]{hexdigit}{4} - Used to escape a Unicode number ( \\u or \\U followed by 4 hex digits). Literals Single and double quotes produce the same result, but they do not terminate each other. For example, \"abc\" and 'abc' are identical, whereas \"a'b'c\" is equivalent to a space-separated concatenation of a, 'b', c . FALSE , NO - Logical false. TRUE , YES - Logical true. NULL , NIL - A null value. SELF - Represents the object being evaluated. \"text\" - A character string. 'text' - A character string. Comma-separated literal array - For example, { 'comma', 'separated', 'literal', 'array' } . Standard integer and fixed-point notations - For example, 1 , 27 , 2.71828 , 19.75 . Floating-point notation with exponentiation - For example, 9.2e-5 . 0x - Prefix used to denote a hexadecimal digit sequence. 0o - Prefix used to denote an octal digit sequence. 0b - Prefix used to denote a binary digit sequence. Reserved Words The following words are reserved: AND, OR, IN, NOT, ALL, ANY, SOME, NONE, LIKE, CASEINSENSITIVE, CI, MATCHES, CONTAINS, BEGINSWITH, ENDSWITH, BETWEEN, NULL, NIL, SELF, TRUE, YES, FALSE, NO, FIRST, LAST, SIZE, ANYKEY, SUBQUERY, CAST, TRUEPREDICATE, FALSEPREDICATE Appium predicate helpers Appium has helpers for predicate search in app.js: getFirstWithPredicate getFirstWithPredicateWeighted getAllWithPredicate getNameContains Here's a Ruby example: # Ruby example text = 'Various uses' predicate = \"name contains[c] ' #{ text } ' || label contains[c] ' #{ text } ' || value contains[c] ' #{ text } '\" element = execute_script ( %Q(au.mainApp().getFirstWithPredicate(\" #{ predicate } \");) ) puts element . name # Buttons, Various uses of UIButton","title":"iOS Predicates"},{"location":"ios-predicate/#basic-comparisons","text":"= , == - The left-hand expression is equal to the right-hand expression: tableViews()[1].cells().firstWithPredicate(\"label == 'Olivia' \") same in Xpath: /UIATableView[2]/UIATableCell[@label = 'Olivia'][1] >= , => - The left-hand expression is greater than or equal to the right-hand expression. <= , =< - The left-hand expression is less than or equal to the right-hand expression. > - The left-hand expression is greater than the right-hand expression. < - The left-hand expression is less than the right-hand expression. != , <> - The left-hand expression is not equal to the right-hand expression. BETWEEN - The left-hand expression is between, or equal to either of, the values specified in the right-hand side. The right-hand side is a two value array (an array is required to specify order) giving upper and lower bounds. For example, 1 BETWEEN { 0 , 33 } , or $INPUT BETWEEN { $LOWER, $UPPER } . In Objective-C, you could create a BETWEEN predicate as shown in the following example: NSPredicate *betweenPredicate = [NSPredicate predicateWithFormat: @\"attributeName BETWEEN %@\", @[@1, @10]]; This creates a predicate that matches ( ( 1 <= attributeValue ) && ( attributeValue <= 10 ) )","title":"Basic Comparisons"},{"location":"ios-predicate/#boolean-value-predicates","text":"TRUEPREDICATE - A predicate that always evaluates to TRUE . FALSEPREDICATE - A predicate that always evaluates to FALSE .","title":"Boolean Value Predicates"},{"location":"ios-predicate/#basic-compound-predicates","text":"AND , && - Logical AND. OR , || - Logical OR. NOT , ! - Logical NOT.","title":"Basic Compound Predicates"},{"location":"ios-predicate/#string-comparisons","text":"String comparisons are by default case and diacritic sensitive. You can modify an operator using the key characters c and d within square braces to specify case and diacritic insensitivity respectively, for example firstName BEGINSWITH[cd] $FIRST_NAME BEGINSWITH - The left-hand expression begins with the right-hand expression. scrollViews()[3].buttons().firstWithPredicate(\"name BEGINSWITH 'results toggle' \") same in Xpath: /UIAScrollView[4]/UIAButton[starts-with(@name, 'results toggle')][1] CONTAINS - The left-hand expression contains the right-hand expression. tableViews()[1].cells().withPredicate(\"ANY collectionViews[0].buttons.name CONTAINS 'opera'\") same in Xpath: /UIATableView[2]/UIATableCell[UIACollectionView[1]/UIAButton[contains(@name, 'opera')]] ENDSWITH - The left-hand expression ends with the right-hand expression. LIKE - The left hand expression equals the right-hand expression: ? and * are allowed as wildcard characters, where ? matches 1 character and * matches 0 or more characters. In Mac OS X v10.4, wildcard characters do not match newline characters. tableViews()[0].cells().firstWithPredicate(\"name LIKE '*Total: $*' \") same in Xpath: /UIATableView[1]/UIATableCell[matches(@name, '.*Total: \\$.*')][1] MATCHES - The left hand expression equals the right hand expression using a regex -style comparison according to ICU v3 (for more details see the ICU User Guide for Regular Expressions ). tableViews().firstWithPredicate(\"value MATCHES '.*of 7' \") same in Xpath: /UIATableView[matches(@value, '.*of 7')][1]","title":"String Comparisons"},{"location":"ios-predicate/#aggregate-operations","text":"ANY , SOME - Specifies any of the elements in the following expression. For example ANY children.age < 18 . tableViews()[0].cells().firstWithPredicate(\"SOME staticTexts.name = 'red'\").staticTexts().withName('red') same in Xpath: /UIATableView[1]/UIATableCell[UIAStaticText/@name = 'red'][1]/UIAStaticText[@name = 'red'] ALL - Specifies all of the elements in the following expression. For example ALL children.age < 18 . NONE - Specifies none of the elements in the following expression. For example, NONE children.age < 18 . This is logically equivalent to NOT (ANY ...) . IN - Equivalent to an SQL IN operation, the left-hand side must appear in the collection specified by the right-hand side. For example, name IN { 'Ben', 'Melissa', 'Matthew' } . The collection may be an array, a set, or a dictionary\u2014in the case of a dictionary, its values are used. array[index] - Specifies the element at the specified index in the array. array[FIRST] - Specifies the first element in the array. array[LAST] - Specifies the last element in the array. array[SIZE] - Specifies the size of the array elements()[0].tableViews()[0].cells().withPredicate(\"staticTexts[SIZE] > 2\") same in Xpath: /*[1]/UIATableView[1]/UIATableCell[count(UIAStaticText) > 2]","title":"Aggregate Operations"},{"location":"ios-predicate/#identifiers","text":"C style identifier - Any C style identifier that is not a reserved word. #symbol - Used to escape a reserved word into a user identifier. [\\]{octaldigit}{3} - Used to escape an octal number ( \\ followed by 3 octal digits). [\\][xX]{hexdigit}{2} - Used to escape a hex number ( \\x or \\X followed by 2 hex digits). [\\][uU]{hexdigit}{4} - Used to escape a Unicode number ( \\u or \\U followed by 4 hex digits).","title":"Identifiers"},{"location":"ios-predicate/#literals","text":"Single and double quotes produce the same result, but they do not terminate each other. For example, \"abc\" and 'abc' are identical, whereas \"a'b'c\" is equivalent to a space-separated concatenation of a, 'b', c . FALSE , NO - Logical false. TRUE , YES - Logical true. NULL , NIL - A null value. SELF - Represents the object being evaluated. \"text\" - A character string. 'text' - A character string. Comma-separated literal array - For example, { 'comma', 'separated', 'literal', 'array' } . Standard integer and fixed-point notations - For example, 1 , 27 , 2.71828 , 19.75 . Floating-point notation with exponentiation - For example, 9.2e-5 . 0x - Prefix used to denote a hexadecimal digit sequence. 0o - Prefix used to denote an octal digit sequence. 0b - Prefix used to denote a binary digit sequence.","title":"Literals"},{"location":"ios-predicate/#reserved-words","text":"The following words are reserved: AND, OR, IN, NOT, ALL, ANY, SOME, NONE, LIKE, CASEINSENSITIVE, CI, MATCHES, CONTAINS, BEGINSWITH, ENDSWITH, BETWEEN, NULL, NIL, SELF, TRUE, YES, FALSE, NO, FIRST, LAST, SIZE, ANYKEY, SUBQUERY, CAST, TRUEPREDICATE, FALSEPREDICATE","title":"Reserved Words"},{"location":"ios-predicate/#appium-predicate-helpers","text":"Appium has helpers for predicate search in app.js: getFirstWithPredicate getFirstWithPredicateWeighted getAllWithPredicate getNameContains Here's a Ruby example: # Ruby example text = 'Various uses' predicate = \"name contains[c] ' #{ text } ' || label contains[c] ' #{ text } ' || value contains[c] ' #{ text } '\" element = execute_script ( %Q(au.mainApp().getFirstWithPredicate(\" #{ predicate } \");) ) puts element . name # Buttons, Various uses of UIButton","title":"Appium predicate helpers"},{"location":"ios-tvos/","text":"tvOS is supported since XCUITest driver bundled with Appium 1.13.0+ Warning Apple TV 4K is not supported because appium-ios-device library, that we use to support low-level communication with devices, only supports devices connected via USB. Setup You can run tests for tvOS by changing the platformName capability to tvOS like it is done below. { \"automationName\" : \"XCUITest\" , \"platformName\" : \"tvOS\" , // here \"platformVersion\" : \"12.2\" , \"deviceName\" : \"Apple TV\" , ... } Note Make sure tvOS simulator exists in your simulator list if you would like to run your test on tvOS simulators, e.g. xcrun simctl list | grep \"com.apple.CoreSimulator.SimRuntime.tvOS\" command shows some results Limitations Gesture commands do not work for tvOS. Some commands such as pasteboard do not work as well. We can handle focus on tvOS by simply pressing keys such as up/down/left/right/home. tvOS performs actions on the focused element. You can get the value of the focus attribute via Attributes API . Get active element API returns the focused element. Basic Actions pressButton and getting the focused element by get active element are basic actions for tvOS. Consider using wait methods since tvOS also has animation. # Ruby element = @driver . find_element :accessibility_id , 'element on the app' # Returns true if the element is focused, otherwise false element . focused #=> 'true' # Appium moves the focus to the element by pressing the corresponding keys and clicking the element element . click # Get the app state @driver . app_state ( 'test.package.name' ) # => :running_in_foreground # Press keys @driver . execute_script 'mobile: pressButton' , { name : 'Home' } # Move focus and get the focused element @driver . execute_script 'mobile: pressButton' , { name : 'Up' } # Get a focused element element = @driver . switch_to . active_element element . label #=> \"Settings\" # Python element = driver . find_element_by_accessibility_id ( 'element on the app' ) element . get_attribute ( 'focused' ) element . click () driver . query_app_state ( 'test.package.name' ) driver . execute_script ( 'mobile: pressButton' , { 'name' : 'Home' }) driver . execute_script ( 'mobile: pressButton' , { 'name' : 'Up' }) element = driver . switch_to . active_element element . get_attribute ( 'label' ) // Java WebElement element = driver . findElementByAccessibilityId ( \"element on the app\" ); element . getAttribute ( \"focused\" ); element . click (); driver . queryAppState ( \"test.package.name\" ); driver . executeScript ( \"mobile: pressButton\" , ImmutableMap . of ( \"name\" , \"Home\" )); driver . executeScript ( \"mobile: pressButton\" , ImmutableMap . of ( \"name\" , \"Up\" )); element = driver . switchTo (). activeElement (); element . getAttribute ( \"label\" ); // webdriver.io example const element = $ ( '~SomeAccessibilityId' ); element . getAttribute ( 'focused' ); element . click (); driver . execute ( 'mobile: pressButton' , { name : 'Home' }); driver . execute ( 'mobile: pressButton' , { name : 'Up' }); const activeElement = driver . getActiveElement (); activeElement . getAttribute ( 'label' ); // WD example const element = await driver . elementByAccessibilityId ( 'element on the app' ); await element . getAttribute ( 'focused' ); await element . click (); await driver . execute ( 'mobile: pressButton' , { name : 'Home' }); await driver . execute ( 'mobile: pressButton' , { name : 'Up' }); const activeElement = await driver . active (); await activeElement . getAttribute ( 'label' ); More actions tvOS provides remote controller based actions. Appium provides Buttons actions via mobile: pressButton . These are menu , up/down/left/right , home , playpause and select . Available actions are enumerated in the error message if you send unsupported button name to the server. Appium calculates up/down/left/right and select sequence automatically if the combination of find element/s and click is provided. You should not care about which keys should be pressed to reach an arbitrary element every time. You can also handle setting a focus or starting/pausing a playback pressing button actions. menu button works as back for iOS context in tvOS. Resources Related issues https://github.com/appium/appium/pull/12401 e.g. appium-xcuitest-driver#911 , appium-xcuitest-driver#939 , appium-xcuitest-driver#931 , appium/WebDriverAgent/pull/163","title":"tvOS Support"},{"location":"ios-tvos/#setup","text":"You can run tests for tvOS by changing the platformName capability to tvOS like it is done below. { \"automationName\" : \"XCUITest\" , \"platformName\" : \"tvOS\" , // here \"platformVersion\" : \"12.2\" , \"deviceName\" : \"Apple TV\" , ... } Note Make sure tvOS simulator exists in your simulator list if you would like to run your test on tvOS simulators, e.g. xcrun simctl list | grep \"com.apple.CoreSimulator.SimRuntime.tvOS\" command shows some results","title":"Setup"},{"location":"ios-tvos/#limitations","text":"Gesture commands do not work for tvOS. Some commands such as pasteboard do not work as well. We can handle focus on tvOS by simply pressing keys such as up/down/left/right/home. tvOS performs actions on the focused element. You can get the value of the focus attribute via Attributes API . Get active element API returns the focused element.","title":"Limitations"},{"location":"ios-tvos/#basic-actions","text":"pressButton and getting the focused element by get active element are basic actions for tvOS. Consider using wait methods since tvOS also has animation. # Ruby element = @driver . find_element :accessibility_id , 'element on the app' # Returns true if the element is focused, otherwise false element . focused #=> 'true' # Appium moves the focus to the element by pressing the corresponding keys and clicking the element element . click # Get the app state @driver . app_state ( 'test.package.name' ) # => :running_in_foreground # Press keys @driver . execute_script 'mobile: pressButton' , { name : 'Home' } # Move focus and get the focused element @driver . execute_script 'mobile: pressButton' , { name : 'Up' } # Get a focused element element = @driver . switch_to . active_element element . label #=> \"Settings\" # Python element = driver . find_element_by_accessibility_id ( 'element on the app' ) element . get_attribute ( 'focused' ) element . click () driver . query_app_state ( 'test.package.name' ) driver . execute_script ( 'mobile: pressButton' , { 'name' : 'Home' }) driver . execute_script ( 'mobile: pressButton' , { 'name' : 'Up' }) element = driver . switch_to . active_element element . get_attribute ( 'label' ) // Java WebElement element = driver . findElementByAccessibilityId ( \"element on the app\" ); element . getAttribute ( \"focused\" ); element . click (); driver . queryAppState ( \"test.package.name\" ); driver . executeScript ( \"mobile: pressButton\" , ImmutableMap . of ( \"name\" , \"Home\" )); driver . executeScript ( \"mobile: pressButton\" , ImmutableMap . of ( \"name\" , \"Up\" )); element = driver . switchTo (). activeElement (); element . getAttribute ( \"label\" ); // webdriver.io example const element = $ ( '~SomeAccessibilityId' ); element . getAttribute ( 'focused' ); element . click (); driver . execute ( 'mobile: pressButton' , { name : 'Home' }); driver . execute ( 'mobile: pressButton' , { name : 'Up' }); const activeElement = driver . getActiveElement (); activeElement . getAttribute ( 'label' ); // WD example const element = await driver . elementByAccessibilityId ( 'element on the app' ); await element . getAttribute ( 'focused' ); await element . click (); await driver . execute ( 'mobile: pressButton' , { name : 'Home' }); await driver . execute ( 'mobile: pressButton' , { name : 'Up' }); const activeElement = await driver . active (); await activeElement . getAttribute ( 'label' );","title":"Basic Actions"},{"location":"ios-tvos/#more-actions","text":"tvOS provides remote controller based actions. Appium provides Buttons actions via mobile: pressButton . These are menu , up/down/left/right , home , playpause and select . Available actions are enumerated in the error message if you send unsupported button name to the server. Appium calculates up/down/left/right and select sequence automatically if the combination of find element/s and click is provided. You should not care about which keys should be pressed to reach an arbitrary element every time. You can also handle setting a focus or starting/pausing a playback pressing button actions. menu button works as back for iOS context in tvOS.","title":"More actions"},{"location":"ios-tvos/#resources","text":"","title":"Resources"},{"location":"ios-tvos/#related-issues","text":"https://github.com/appium/appium/pull/12401 e.g. appium-xcuitest-driver#911 , appium-xcuitest-driver#939 , appium-xcuitest-driver#931 , appium/WebDriverAgent/pull/163","title":"Related issues"},{"location":"ios-xctest-file-movement/","text":"Appium provides Pull Folder , Pull File and Push File to move files. This documentation aims to help to understand how they work for iOS. Format Below is the basic format. @<app_bundle_id>:<optional_container_type>/<path_to_the_file_or_folder_inside_container> @<app_bundle_id>/<path_to_the_file_or_folder_inside_container> <path_to_the_file_or_folder_inside_container> Real device Format The format of method argument should be the following: @<app_bundle_id> is the application bundle identifier optional_container_type is the container type documents is the only available option You may specify documents container type only for bundle ids that exists in the device Since appium-xcuitest-driver v3.55.0, mobile: listApps provides a list of available applications. Applications which have UIFileSharingEnabled attribute as true can be specified. e.g. Below On My iPhone image has Slack folder, but com.tinyspeck.chatlyio does not exist in installed bundle ids. Then, we cannot mount it as com.tinyspeck.chatlyio@documents/ - The others work as format 2 - Only apps having the flag UIFileSharingEnabled in their info.plist can be mounted - path_to_the_file_or_folder_inside_container is the target to push/pull to/from them. - If the optional_container_type is documents , this path will be mapped to On My iPhone/<app name> in Files app format 3 is not allowed for real devices. Example If you would like to pull Presentation.key form Keynote app, you can get it as below. Pull file // webdriver.io let data = driver . pullFile ( '@io.appium.example:documents/Presentation.key' ); await fs . writeFile ( 'presentation.key' , Buffer . from ( data , 'base64' ), 'binary' ); # ruby_lib_core file = @driver . pull_file '@com.apple.Keynote:documents/Presentation.key' File . open ( 'presentation.key' , 'wb' ) { | f | f << file } The file is in On My iPhone/Keynote of Files app. Top On My iPhone Keynote If the file is in deeper place like On My iPhone/Keynote/Dir1/Dir2 , then the Ruby command should be: // webdriver.io let data = driver . pullFile ( '@io.appium.example:documents/Dir1/Dir2/Presentation.key' ); await fs . writeFile ( 'presentation.key' , Buffer . from ( data , 'base64' ), 'binary' ); # ruby_lib_core file = @driver . pull_file '@com.apple.Keynote:documents/Dir1/Dir2/Presentation.key' File . open ( 'presentation.key' , 'wb' ) { | f | f << file } Pull folder You can pull documents root of On My iPhone/Keynote as @driver.pull_folder '@com.apple.Keynote:documents/' . @driver.pull_folder '@com.apple.Keynote:documents/Keynote' is to get files in the Keynote folder. Then, Keynote is the documentation root to get. // webdriver.io let data = driver . pullFolder ( '@io.appium.example:documents/' ); await fs . writeFile ( 'documents.zip' , Buffer . from ( data , 'base64' ), 'binary' ); let data = driver . pullFolder ( '@io.appium.example:documents/Keynote' ); await fs . writeFile ( 'keynote.zip' , Buffer . from ( data , 'base64' ), 'binary' ); # ruby_lib_core file = @driver . pull_folder '@com.apple.Keynote:documents/' File . open ( 'documents.zip' , 'wb' ) { | f | f << file } file = @driver . pull_folder '@com.apple.Keynote:documents/Keynote' File . open ( 'keynote.zip' , 'wb' ) { | f | f << file } Push file Same as pull: // webdriver.io driver . pushFile ( '@com.apple.Keynote:documents/text.txt' , new Buffer ( \"Hello World\" ). toString ( 'base64' )); # ruby_lib_core @driver . push_file '@com.apple.Keynote:documents/text.txt' , ( File . read 'path/to/file' ) Simulator Format The format of method argument should be the following: @<app_bundle_id> is the application bundle identifier optional_container_type is the container type app , data , groups or <A specific App Group container> format 2 case is handled as app container path_to_the_file_or_folder_inside_container is the target to push/pull to/from them format 3 format handles as app container Example // Java // Get AddressBook.sqlitedb in test app package ('app' container) byte [] fileContent = driver . pullFile ( \"Library/AddressBook/AddressBook.sqlitedb\" ); Path dstPath = Paths . get ( new File ( \"/local/path/AddressBook.sqlitedb\" )); Files . write ( dstPath , fileContent ); references https://stackoverflow.com/questions/1108076/where-does-the-iphone-simulator-store-its-data https://stackoverflow.com/questions/48884248/how-can-i-add-files-to-the-ios-simulator https://apple.stackexchange.com/questions/299413/how-to-allow-the-files-app-to-save-to-on-my-iphone-or-to-on-my-ipad-in-ios/299565#299565","title":"Pushing/Pulling Files"},{"location":"ios-xctest-file-movement/#format","text":"Below is the basic format. @<app_bundle_id>:<optional_container_type>/<path_to_the_file_or_folder_inside_container> @<app_bundle_id>/<path_to_the_file_or_folder_inside_container> <path_to_the_file_or_folder_inside_container>","title":"Format"},{"location":"ios-xctest-file-movement/#real-device","text":"","title":"Real device"},{"location":"ios-xctest-file-movement/#format_1","text":"The format of method argument should be the following: @<app_bundle_id> is the application bundle identifier optional_container_type is the container type documents is the only available option You may specify documents container type only for bundle ids that exists in the device Since appium-xcuitest-driver v3.55.0, mobile: listApps provides a list of available applications. Applications which have UIFileSharingEnabled attribute as true can be specified. e.g. Below On My iPhone image has Slack folder, but com.tinyspeck.chatlyio does not exist in installed bundle ids. Then, we cannot mount it as com.tinyspeck.chatlyio@documents/ - The others work as format 2 - Only apps having the flag UIFileSharingEnabled in their info.plist can be mounted - path_to_the_file_or_folder_inside_container is the target to push/pull to/from them. - If the optional_container_type is documents , this path will be mapped to On My iPhone/<app name> in Files app format 3 is not allowed for real devices.","title":"Format"},{"location":"ios-xctest-file-movement/#example","text":"If you would like to pull Presentation.key form Keynote app, you can get it as below. Pull file // webdriver.io let data = driver . pullFile ( '@io.appium.example:documents/Presentation.key' ); await fs . writeFile ( 'presentation.key' , Buffer . from ( data , 'base64' ), 'binary' ); # ruby_lib_core file = @driver . pull_file '@com.apple.Keynote:documents/Presentation.key' File . open ( 'presentation.key' , 'wb' ) { | f | f << file } The file is in On My iPhone/Keynote of Files app. Top On My iPhone Keynote If the file is in deeper place like On My iPhone/Keynote/Dir1/Dir2 , then the Ruby command should be: // webdriver.io let data = driver . pullFile ( '@io.appium.example:documents/Dir1/Dir2/Presentation.key' ); await fs . writeFile ( 'presentation.key' , Buffer . from ( data , 'base64' ), 'binary' ); # ruby_lib_core file = @driver . pull_file '@com.apple.Keynote:documents/Dir1/Dir2/Presentation.key' File . open ( 'presentation.key' , 'wb' ) { | f | f << file } Pull folder You can pull documents root of On My iPhone/Keynote as @driver.pull_folder '@com.apple.Keynote:documents/' . @driver.pull_folder '@com.apple.Keynote:documents/Keynote' is to get files in the Keynote folder. Then, Keynote is the documentation root to get. // webdriver.io let data = driver . pullFolder ( '@io.appium.example:documents/' ); await fs . writeFile ( 'documents.zip' , Buffer . from ( data , 'base64' ), 'binary' ); let data = driver . pullFolder ( '@io.appium.example:documents/Keynote' ); await fs . writeFile ( 'keynote.zip' , Buffer . from ( data , 'base64' ), 'binary' ); # ruby_lib_core file = @driver . pull_folder '@com.apple.Keynote:documents/' File . open ( 'documents.zip' , 'wb' ) { | f | f << file } file = @driver . pull_folder '@com.apple.Keynote:documents/Keynote' File . open ( 'keynote.zip' , 'wb' ) { | f | f << file } Push file Same as pull: // webdriver.io driver . pushFile ( '@com.apple.Keynote:documents/text.txt' , new Buffer ( \"Hello World\" ). toString ( 'base64' )); # ruby_lib_core @driver . push_file '@com.apple.Keynote:documents/text.txt' , ( File . read 'path/to/file' )","title":"Example"},{"location":"ios-xctest-file-movement/#simulator","text":"","title":"Simulator"},{"location":"ios-xctest-file-movement/#format_2","text":"The format of method argument should be the following: @<app_bundle_id> is the application bundle identifier optional_container_type is the container type app , data , groups or <A specific App Group container> format 2 case is handled as app container path_to_the_file_or_folder_inside_container is the target to push/pull to/from them format 3 format handles as app container","title":"Format"},{"location":"ios-xctest-file-movement/#example_1","text":"// Java // Get AddressBook.sqlitedb in test app package ('app' container) byte [] fileContent = driver . pullFile ( \"Library/AddressBook/AddressBook.sqlitedb\" ); Path dstPath = Paths . get ( new File ( \"/local/path/AddressBook.sqlitedb\" )); Files . write ( dstPath , fileContent );","title":"Example"},{"location":"ios-xctest-file-movement/#references","text":"https://stackoverflow.com/questions/1108076/where-does-the-iphone-simulator-store-its-data https://stackoverflow.com/questions/48884248/how-can-i-add-files-to-the-ios-simulator https://apple.stackexchange.com/questions/299413/how-to-allow-the-files-app-to-save-to-on-my-iphone-or-to-on-my-ipad-in-ios/299565#299565","title":"references"},{"location":"ios-xctest-install-certificate/","text":"Unfortunately, Apple does not provide any command line options which can help to install self-signed certificate on a real device or Simulator. However, there is over-the-air enrollment technology, which allows the deployment of several entity types, including such certificates, by simply downloading specially prepared configuration files with the built-in web browser. After the configuration is downloaded it can be installed and trusted by going through several simple wizard steps. mobile: installCertificate","title":"Self-Signed Certificates"},{"location":"locator-strategies/","text":"XCUITest driver supports the following location strategies in the native context: Name Description Example id, name, accessibility id All these locator types are synonyms and internally get transformed into search by element's name attribute . my name className Performs search by element's type attribute . The full list of supported XCUIElement type names could be found in the official XCTest documentation on XCUIElementType XCUIElementTypeButton -ios predicate string This strategy is mapped to the native XCTest predicate locator. Check the NSPredicate cheat sheet for more details on how to build effective predicate expressions. All the supported element attributes could be used in these expressions. (name == 'done' OR value == 'done') AND type IN {'XCUIElementTypeButton', 'XCUIElementTypeKey'} -ios class chain This strategy is mapped to the native XCTest predicate locator, but with respect to the actual element tree hierarchy. Such locators are basically a supertype of -ios predicate string . Read Class Chain Queries Construction Rules for more details on how to build such locators. **/XCUIElementTypeCell[$name == 'done' OR value == 'done'$]/XCUIElementTypeButton[-1] xpath For elements lookup using the Xpath strategy the driver uses the same XML tree that is generated by the page source API. This means such locators are the slowest (sometimes up to 10x slower) in comparison to the ones above, which all depend on native XCTest primitives, but are the most flexible. Use Xpath locators only if there is no other way to locate the given element. Only Xpath 1.0 is supported. //XCUIElementTypeButton[@value=\\\"Regular\\\"]/parent::* Also, consider checking the How To Achieve The Best Lookup Performance article.","title":"Locator Strategies"},{"location":"multiple-xcode-versions/","text":"If you have multiple Xcode installations you may choose which toolset Appium should use with one of two ways: xcode-select tool Only available with sudo privileges, affects the whole system. Assuming you want to choose /Applications/Xcode13.app : 1. Set default Xcode. sudo xcode-select -s /Applications/Xcode13.app/Contents/Developer 2. Run Appium (from command line or with GUI). appium Environment variable No privileges needed, affects only the current shell, so Appium should be started within that shell. Assuming you want to choose /Applications/Xcode12.app : 1. Set DEVELOPER_DIR environment variable. export DEVELOPER_DIR=/Applications/Xcode12.app/Contents/Developer 2. Run Appium from the same shell. appium","title":"Managing Multiple Xcodes"},{"location":"multiple-xcode-versions/#xcode-select-tool","text":"Only available with sudo privileges, affects the whole system. Assuming you want to choose /Applications/Xcode13.app : 1. Set default Xcode. sudo xcode-select -s /Applications/Xcode13.app/Contents/Developer 2. Run Appium (from command line or with GUI). appium","title":"xcode-select tool"},{"location":"multiple-xcode-versions/#environment-variable","text":"No privileges needed, affects only the current shell, so Appium should be started within that shell. Assuming you want to choose /Applications/Xcode12.app : 1. Set DEVELOPER_DIR environment variable. export DEVELOPER_DIR=/Applications/Xcode12.app/Contents/Developer 2. Run Appium from the same shell. appium","title":"Environment variable"},{"location":"parallel-tests/","text":"It is possible to execute tests in parallel using XCUITest driver. Appium allows to do this on per-process (multiple server processes running on different ports managing single session) or per-request basis (single server process managing multiple sessions, more preferable, uses less resources and ensures better control over running sessions). Note : If you are not going to run your tests in parallel then consider enabling the --session-override Appium server argument. It forces the server to close all pending sessions before a new one could be opened, which allows you to avoid possible issues with such sessions silently running/expiring in the background. Important Real Device Capabilities udid must be a unique device UDID for each parallel session. wdaLocalPort must be a unique port number for each parallel session. The default value is 8100 . derivedDataPath set the unique derived data path root for each driver instance. This will help to avoid possible conflicts and to speed up the parallel execution. mjpegServerPort must be a unique port number for each parallel session if you are going to record a video stream from it. The default value is 9100 . Important Simulator Capabilities Either udid , which is the unique simulator UDID for each parallel session (it could be retrieved from xcrun simctl list command output), or a unique combination of deviceName and platformVersion capabilities to identify the appropriate simulator with the given name and version number for each parallel session. wdaLocalPort must be a unique port number for each parallel session. The default value is 8100 . derivedDataPath set the unique derived data path root for each driver instance. This will help to avoid possible conflicts and to speed up the parallel execution. mjpegServerPort must be a unique port number for each parallel session if you are going to record a video stream from it. The default value is 9100 .","title":"Testing in Parallel"},{"location":"parallel-tests/#important-real-device-capabilities","text":"udid must be a unique device UDID for each parallel session. wdaLocalPort must be a unique port number for each parallel session. The default value is 8100 . derivedDataPath set the unique derived data path root for each driver instance. This will help to avoid possible conflicts and to speed up the parallel execution. mjpegServerPort must be a unique port number for each parallel session if you are going to record a video stream from it. The default value is 9100 .","title":"Important Real Device Capabilities"},{"location":"parallel-tests/#important-simulator-capabilities","text":"Either udid , which is the unique simulator UDID for each parallel session (it could be retrieved from xcrun simctl list command output), or a unique combination of deviceName and platformVersion capabilities to identify the appropriate simulator with the given name and version number for each parallel session. wdaLocalPort must be a unique port number for each parallel session. The default value is 8100 . derivedDataPath set the unique derived data path root for each driver instance. This will help to avoid possible conflicts and to speed up the parallel execution. mjpegServerPort must be a unique port number for each parallel session if you are going to record a video stream from it. The default value is 9100 .","title":"Important Simulator Capabilities"},{"location":"real-device-config/","text":"Basic (automatic) configuration The easiest way to get up-and-running with Appium's XCUITest support on iOS real devices is to use the automatic configuration strategy. There are two ways to do this: Use the xcodeOrgId and xcodeSigningId capabilities : { \"xcodeOrgId\" : \"<Team ID>\" , \"xcodeSigningId\" : \"iPhone Developer\" } Create a .xcconfig file somewhere on your file system and add the following to it: DEVELOPMENT_TEAM = <Team ID> CODE_SIGN_IDENTITY = iPhone Developer In either case, the Team ID is a unique 10-character string generated by Apple that is assigned to your team. You can find your Team ID using your developer account. Sign in to developer.apple.com/account , and click Membership in the sidebar. Your Team ID appears in the Membership Information section under the team name. You can also find your team ID listed under the \"Organizational Unit\" field in your iPhone Developer certificate in your keychain. Note that these are mutually exclusive strategies; use either the xcodeConfigFile capability or the combination of xcodeOrgId and xcodeSigningId . Once this configuration is done, it should just be a matter of starting your test specifying a real device in your udid desired capability. If this has not worked it will usually manifest itself in the Appium server logs as some error followed by info XCUITest xcodebuild exited with code '65' and signal 'null' . This usually means that the necessary code signing is not set up correctly. Go on to the Basic (manual) configuration to fix. If the WebDriverAgentRunner is successfully installed on the device, but in the Appium logs there is an error message something like: 2017-01-24 09:02:18.358 xcodebuild[30385:339674] Error Domain=com.apple.platform.iphoneos Code=-12 \"Unable to launch com.apple.test.WebDriverAgentRunner-Runner\" UserInfo={NSLocalizedDescription=Unable to launch com.apple.test.WebDriverAgentRunner-Runner, NSUnderlyingError=0x7fa839cadc60 {Error Domain=DTXMessage Code=1 \"(null)\" UserInfo={DTXExceptionKey=The operation couldn\u2019t be completed. Unable to launch com.apple.test.WebDriverAgentRunner-Runner because it has an invalid code signature, inadequate entitlements or its profile has not been explicitly trusted by the user. : Failed to launch process with bundle identifier 'com.apple.test.WebDriverAgentRunner-Runner'}}} 2017-01-24 09:02:18.358 xcodebuild[30385:339674] Error Domain=IDETestOperationsObserverErrorDomain Code=5 \"Early unexpected exit, operation never finished bootstrapping - no restart will be attempted\" UserInfo={NSLocalizedDescription=Early unexpected exit, operation never finished bootstrapping - no restart will be attempted} Testing failed: Test target WebDriverAgentRunner encountered an error (Early unexpected exit, operation never finished bootstrapping - no restart will be attempted) The problem is that the developer is not trusted on the device. If you manually try to run the WebDriverAgentRunner app on the device, you will see a popup message: You can go to Settings => General => Device Management on the device to trust the developer and allow the WebDriverAgentRunner app to be run (see Apple documentation for more information ). Basic (manual) configuration There are many cases in which the basic automatic configuration is not enough. This usually has to do with code signing and the configuration of the project to be able to be run on the real device under test. Often this happens when the development account being used is a \"Free\" one, in which case it is not possible to create a wildcard provisioning profile, and will often not create one for the default application bundle. This will manifest as something like an error that Xcode failed to create provisioning profile : The easiest way around this is to create a provisioning profile by opening Xcode and creating a new project: The type does not matter, other than it being \"iOS\". \"Single View Application\" is the easiest: The important part is to use a unique \"Product Name\" and \"Organization Name\". Also, at this point, specify your \"Team\". You can confirm that the provisioning profile was created by looking at the \"Project\" tab: Or by going into your account preferences and seeing the provisioning profile: At this point you have a valid provisioning profile. Make note of the bundle id you associated with it, and add that in the updatedWDABundleId desired capability for your tests. Then follow the initial instructions for automatic configuration . Full manual configuration Alternatively, the provisioning profile can be manually associated with the project (keep in mind that this will have to be done each time the WebDriverAgent is updated, and is not recommended): Read Finding WebDriverAgent project root on the local file system to locate where WebDriverAgent is installed. You could also see the full path to WebDriverAgent's folder in Appium server logs after a session has been started. Open a terminal and go to that location, then run the following to set the project up: mkdir -p Resources/WebDriverAgent.bundle If you build WebDriverAgent with a version before 2.32.0 (e.g. as part of an Appium release before 1.20.0) you also have to run ./Scripts/bootstrap.sh -d Open WebDriverAgent.xcodeproj in Xcode. For both the WebDriverAgentLib and WebDriverAgentRunner targets, select \"Automatically manage signing\" in the \"General\" tab, and then select your Development Team . This should also auto select Signing Ceritificate . The outcome should look as shown below: Xcode may fail to create a provisioning profile for the WebDriverAgentRunner target: This necessitates manually changing the bundle id for the target by going into the \"Build Settings\" tab, and changing the \"Product Bundle Identifier\" from com.facebook.WebDriverAgentRunner to something that Xcode will accept: Going back to the \"General\" tab for the WebDriverAgentRunner target, you should now see that it has created a provisioning profile and all is well: Finally, you can verify that everything works. Build the project: xcodebuild build-for-testing test-without-building -project WebDriverAgent.xcodeproj -scheme WebDriverAgentRunner -destination 'id=<udid>' If this was successful, the output should end with something like: Test Suite 'All tests' started at 2017-01-23 15:49:12.585 Test Suite 'WebDriverAgentRunner.xctest' started at 2017-01-23 15:49:12.586 Test Suite 'UITestingUITests' started at 2017-01-23 15:49:12.587 Test Case '-[UITestingUITests testRunner]' started. t = 0.00s Start Test at 2017-01-23 15:49:12.588 t = 0.00s Set Up To completely verify, you can try accessing the WebDriverAgent server status ( note: you must be on the same network as the device, and know its IP address, from Settings => Wi-Fi => Current Network): export DEVICE_URL='http://<device IP>:8100' export JSON_HEADER='-H \"Content-Type: application/json;charset=UTF-8, accept: application/json\"' curl -X GET $JSON_HEADER $DEVICE_URL/status You ought to get back output something like this: { \"value\" : { \"state\" : \"success\" , \"os\" : { \"name\" : \"iOS\" , \"version\" : \"10.2\" }, \"ios\" : { \"simulatorVersion\" : \"10.2\" , \"ip\" : \"192.168.0.7\" }, \"build\" : { \"time\" : \"Jan 23 2017 14:59:57\" } }, \"sessionId\" : \"8951A6DD-F3AD-410E-A5DB-D042F42F68A7\" , \"status\" : 0 } Build for Generic iOS/tvOS devices, run manually Alternatively, you can build WebDriverAgentRunner for a generic iOS/tvOS device, and install the generated .app package to a real device. Building for a generic device means the package could be installed on any iOS or tvOS device depending on the chosen platform. # iOS $ xcodebuild clean build-for-testing -project WebDriverAgent.xcodeproj -derivedDataPath appium_wda_ios -scheme WebDriverAgentRunner -destination generic/platform = iOS CODE_SIGNING_ALLOWED = YES # tvOS $ xcodebuild clean build-for-testing -project WebDriverAgent.xcodeproj -derivedDataPath appium_wda_tvos -scheme WebDriverAgentRunner_tvOS -destination generic/platform = tvOS CODE_SIGNING_ALLOWED = YES On successful completion the resulting package WebDriverAgentRunner-Runner.app should be located in Build/Products/Debug-iphoneos/ subfolder under WebDriverAgent sources root, or in the path provided as derivedDataPath argument. Note Please make sure the WebDriverAgent.xcodeproj has codesigning properties configured properly according to the above description if the build action fails. For example, you may need to configure the bundle id for the provisioning profile properly. The WebDriverAgentRunner-Runner.app can be installed to any real device allowed by the provisioning profile. You can install the package with 3rd party tools and manage it separately as explained in How To Set Up And Customize WebDriverAgent Server . If the codesign is not correct, the installation will fail because of the package verification error by iOS. As a more advanced method, you can generate the package with CODE_SIGNING_ALLOWED=NO and do codesign separately by yourself. This would make the device management more flexible, but you'd need to know about advanced codesign usage scenarios. Note Generic builds with CODE_SIGNING_ALLOWED=NO are available for each version tag at https://github.com/appium/WebDriverAgent/releases. It is recommended to sign packages with a wildcard ( * ) provisioning profile. Such profiles require a paid Apple Developer account. In case of a free account, you may need to update bundle id properly before building the WebDriverAgent package. Finding WebDriverAgent project root on the local file system WebDriverAgent Xcode project is bundled with appium-webdriveragent NPM module. This means as soon as you could find WDA location on the local file system as soon as you know where this npm module has been installed. The module is a direct dependency of appium-xcuitest-driver . The actual location of the module on the file system depends on major Appium version and on the way used to install Appium or XCUITest itself. All the below tutorials assume that you use NPM (Node Package Manager) to install Appium. We do not officially support other package managers, like yarn or brew, so the actual behavior might be different if you still use them. Appium 1.x XCUITest driver is the default dependency of Appium 1.x package, so WDA must be located under Appium's installation root. Depending on whether Appium has been installed globally or locally, the package could be find either in a local or a global node_modules root. Check Where does npm install packages? Find the install path article for more details. As soon as you find where appium package is located then simply run the lookup for WebDriverAgent.xcodeproj in it. For example, if Appium has been installed globally, then the following commands could be used: npm i -g appium@1.22.3 echo \" $( dirname \" $( find \" $( npm root -g ) /appium/node_modules\" -name WebDriverAgent.xcodeproj ) \" ) \" The resulting output will contain the full path to WDA's source folder. Appium 2.x In Appium 2.x the server and drivers are separated, so you won't find WDA sources in the same package where the server is installed. WDA sources only get fetched as soon as XCUITest driver is installed using the server CLI, e.g. appium driver install xcuitest . Appium server CLI by default installs the driver package using NPM and uses APPIUM_HOME folder as the root. By default, APPIUM_HOME points to $HOME/.appium . It could also be customized by providing the corresponding CLI argument. As soon as the driver installation is completed and default values were used the WDA path could be found in one of APPIUM_HOME subfolders: appium driver install xcuitest echo \" $( dirname \" $( find \" $HOME /.appium\" -name WebDriverAgent.xcodeproj ) \" ) \" The resulting output will contain the full path to WDA's source folder. Since XCUITest driver v4.13.0 there is a possibility to open WebDriverAgent.xcodeproj in Xcode by simply executing appium driver run xcuitest open-wda command.","title":"Real Device Configuration"},{"location":"real-device-config/#basic-automatic-configuration","text":"The easiest way to get up-and-running with Appium's XCUITest support on iOS real devices is to use the automatic configuration strategy. There are two ways to do this: Use the xcodeOrgId and xcodeSigningId capabilities : { \"xcodeOrgId\" : \"<Team ID>\" , \"xcodeSigningId\" : \"iPhone Developer\" } Create a .xcconfig file somewhere on your file system and add the following to it: DEVELOPMENT_TEAM = <Team ID> CODE_SIGN_IDENTITY = iPhone Developer In either case, the Team ID is a unique 10-character string generated by Apple that is assigned to your team. You can find your Team ID using your developer account. Sign in to developer.apple.com/account , and click Membership in the sidebar. Your Team ID appears in the Membership Information section under the team name. You can also find your team ID listed under the \"Organizational Unit\" field in your iPhone Developer certificate in your keychain. Note that these are mutually exclusive strategies; use either the xcodeConfigFile capability or the combination of xcodeOrgId and xcodeSigningId . Once this configuration is done, it should just be a matter of starting your test specifying a real device in your udid desired capability. If this has not worked it will usually manifest itself in the Appium server logs as some error followed by info XCUITest xcodebuild exited with code '65' and signal 'null' . This usually means that the necessary code signing is not set up correctly. Go on to the Basic (manual) configuration to fix. If the WebDriverAgentRunner is successfully installed on the device, but in the Appium logs there is an error message something like: 2017-01-24 09:02:18.358 xcodebuild[30385:339674] Error Domain=com.apple.platform.iphoneos Code=-12 \"Unable to launch com.apple.test.WebDriverAgentRunner-Runner\" UserInfo={NSLocalizedDescription=Unable to launch com.apple.test.WebDriverAgentRunner-Runner, NSUnderlyingError=0x7fa839cadc60 {Error Domain=DTXMessage Code=1 \"(null)\" UserInfo={DTXExceptionKey=The operation couldn\u2019t be completed. Unable to launch com.apple.test.WebDriverAgentRunner-Runner because it has an invalid code signature, inadequate entitlements or its profile has not been explicitly trusted by the user. : Failed to launch process with bundle identifier 'com.apple.test.WebDriverAgentRunner-Runner'}}} 2017-01-24 09:02:18.358 xcodebuild[30385:339674] Error Domain=IDETestOperationsObserverErrorDomain Code=5 \"Early unexpected exit, operation never finished bootstrapping - no restart will be attempted\" UserInfo={NSLocalizedDescription=Early unexpected exit, operation never finished bootstrapping - no restart will be attempted} Testing failed: Test target WebDriverAgentRunner encountered an error (Early unexpected exit, operation never finished bootstrapping - no restart will be attempted) The problem is that the developer is not trusted on the device. If you manually try to run the WebDriverAgentRunner app on the device, you will see a popup message: You can go to Settings => General => Device Management on the device to trust the developer and allow the WebDriverAgentRunner app to be run (see Apple documentation for more information ).","title":"Basic (automatic) configuration"},{"location":"real-device-config/#basic-manual-configuration","text":"There are many cases in which the basic automatic configuration is not enough. This usually has to do with code signing and the configuration of the project to be able to be run on the real device under test. Often this happens when the development account being used is a \"Free\" one, in which case it is not possible to create a wildcard provisioning profile, and will often not create one for the default application bundle. This will manifest as something like an error that Xcode failed to create provisioning profile : The easiest way around this is to create a provisioning profile by opening Xcode and creating a new project: The type does not matter, other than it being \"iOS\". \"Single View Application\" is the easiest: The important part is to use a unique \"Product Name\" and \"Organization Name\". Also, at this point, specify your \"Team\". You can confirm that the provisioning profile was created by looking at the \"Project\" tab: Or by going into your account preferences and seeing the provisioning profile: At this point you have a valid provisioning profile. Make note of the bundle id you associated with it, and add that in the updatedWDABundleId desired capability for your tests. Then follow the initial instructions for automatic configuration .","title":"Basic (manual) configuration"},{"location":"real-device-config/#full-manual-configuration","text":"Alternatively, the provisioning profile can be manually associated with the project (keep in mind that this will have to be done each time the WebDriverAgent is updated, and is not recommended): Read Finding WebDriverAgent project root on the local file system to locate where WebDriverAgent is installed. You could also see the full path to WebDriverAgent's folder in Appium server logs after a session has been started. Open a terminal and go to that location, then run the following to set the project up: mkdir -p Resources/WebDriverAgent.bundle If you build WebDriverAgent with a version before 2.32.0 (e.g. as part of an Appium release before 1.20.0) you also have to run ./Scripts/bootstrap.sh -d Open WebDriverAgent.xcodeproj in Xcode. For both the WebDriverAgentLib and WebDriverAgentRunner targets, select \"Automatically manage signing\" in the \"General\" tab, and then select your Development Team . This should also auto select Signing Ceritificate . The outcome should look as shown below: Xcode may fail to create a provisioning profile for the WebDriverAgentRunner target: This necessitates manually changing the bundle id for the target by going into the \"Build Settings\" tab, and changing the \"Product Bundle Identifier\" from com.facebook.WebDriverAgentRunner to something that Xcode will accept: Going back to the \"General\" tab for the WebDriverAgentRunner target, you should now see that it has created a provisioning profile and all is well: Finally, you can verify that everything works. Build the project: xcodebuild build-for-testing test-without-building -project WebDriverAgent.xcodeproj -scheme WebDriverAgentRunner -destination 'id=<udid>' If this was successful, the output should end with something like: Test Suite 'All tests' started at 2017-01-23 15:49:12.585 Test Suite 'WebDriverAgentRunner.xctest' started at 2017-01-23 15:49:12.586 Test Suite 'UITestingUITests' started at 2017-01-23 15:49:12.587 Test Case '-[UITestingUITests testRunner]' started. t = 0.00s Start Test at 2017-01-23 15:49:12.588 t = 0.00s Set Up To completely verify, you can try accessing the WebDriverAgent server status ( note: you must be on the same network as the device, and know its IP address, from Settings => Wi-Fi => Current Network): export DEVICE_URL='http://<device IP>:8100' export JSON_HEADER='-H \"Content-Type: application/json;charset=UTF-8, accept: application/json\"' curl -X GET $JSON_HEADER $DEVICE_URL/status You ought to get back output something like this: { \"value\" : { \"state\" : \"success\" , \"os\" : { \"name\" : \"iOS\" , \"version\" : \"10.2\" }, \"ios\" : { \"simulatorVersion\" : \"10.2\" , \"ip\" : \"192.168.0.7\" }, \"build\" : { \"time\" : \"Jan 23 2017 14:59:57\" } }, \"sessionId\" : \"8951A6DD-F3AD-410E-A5DB-D042F42F68A7\" , \"status\" : 0 }","title":"Full manual configuration"},{"location":"real-device-config/#build-for-generic-iostvos-devices-run-manually","text":"Alternatively, you can build WebDriverAgentRunner for a generic iOS/tvOS device, and install the generated .app package to a real device. Building for a generic device means the package could be installed on any iOS or tvOS device depending on the chosen platform. # iOS $ xcodebuild clean build-for-testing -project WebDriverAgent.xcodeproj -derivedDataPath appium_wda_ios -scheme WebDriverAgentRunner -destination generic/platform = iOS CODE_SIGNING_ALLOWED = YES # tvOS $ xcodebuild clean build-for-testing -project WebDriverAgent.xcodeproj -derivedDataPath appium_wda_tvos -scheme WebDriverAgentRunner_tvOS -destination generic/platform = tvOS CODE_SIGNING_ALLOWED = YES On successful completion the resulting package WebDriverAgentRunner-Runner.app should be located in Build/Products/Debug-iphoneos/ subfolder under WebDriverAgent sources root, or in the path provided as derivedDataPath argument. Note Please make sure the WebDriverAgent.xcodeproj has codesigning properties configured properly according to the above description if the build action fails. For example, you may need to configure the bundle id for the provisioning profile properly. The WebDriverAgentRunner-Runner.app can be installed to any real device allowed by the provisioning profile. You can install the package with 3rd party tools and manage it separately as explained in How To Set Up And Customize WebDriverAgent Server . If the codesign is not correct, the installation will fail because of the package verification error by iOS. As a more advanced method, you can generate the package with CODE_SIGNING_ALLOWED=NO and do codesign separately by yourself. This would make the device management more flexible, but you'd need to know about advanced codesign usage scenarios. Note Generic builds with CODE_SIGNING_ALLOWED=NO are available for each version tag at https://github.com/appium/WebDriverAgent/releases. It is recommended to sign packages with a wildcard ( * ) provisioning profile. Such profiles require a paid Apple Developer account. In case of a free account, you may need to update bundle id properly before building the WebDriverAgent package.","title":"Build for Generic iOS/tvOS devices, run manually"},{"location":"real-device-config/#finding-webdriveragent-project-root-on-the-local-file-system","text":"WebDriverAgent Xcode project is bundled with appium-webdriveragent NPM module. This means as soon as you could find WDA location on the local file system as soon as you know where this npm module has been installed. The module is a direct dependency of appium-xcuitest-driver . The actual location of the module on the file system depends on major Appium version and on the way used to install Appium or XCUITest itself. All the below tutorials assume that you use NPM (Node Package Manager) to install Appium. We do not officially support other package managers, like yarn or brew, so the actual behavior might be different if you still use them.","title":"Finding WebDriverAgent project root on the local file system"},{"location":"real-device-config/#appium-1x","text":"XCUITest driver is the default dependency of Appium 1.x package, so WDA must be located under Appium's installation root. Depending on whether Appium has been installed globally or locally, the package could be find either in a local or a global node_modules root. Check Where does npm install packages? Find the install path article for more details. As soon as you find where appium package is located then simply run the lookup for WebDriverAgent.xcodeproj in it. For example, if Appium has been installed globally, then the following commands could be used: npm i -g appium@1.22.3 echo \" $( dirname \" $( find \" $( npm root -g ) /appium/node_modules\" -name WebDriverAgent.xcodeproj ) \" ) \" The resulting output will contain the full path to WDA's source folder.","title":"Appium 1.x"},{"location":"real-device-config/#appium-2x","text":"In Appium 2.x the server and drivers are separated, so you won't find WDA sources in the same package where the server is installed. WDA sources only get fetched as soon as XCUITest driver is installed using the server CLI, e.g. appium driver install xcuitest . Appium server CLI by default installs the driver package using NPM and uses APPIUM_HOME folder as the root. By default, APPIUM_HOME points to $HOME/.appium . It could also be customized by providing the corresponding CLI argument. As soon as the driver installation is completed and default values were used the WDA path could be found in one of APPIUM_HOME subfolders: appium driver install xcuitest echo \" $( dirname \" $( find \" $HOME /.appium\" -name WebDriverAgent.xcodeproj ) \" ) \" The resulting output will contain the full path to WDA's source folder. Since XCUITest driver v4.13.0 there is a possibility to open WebDriverAgent.xcodeproj in Xcode by simply executing appium driver run xcuitest open-wda command.","title":"Appium 2.x"},{"location":"security-flags/","text":"These can be enabled when running this driver through Appium, via the --allow-insecure or --relaxed-security flags. Feature Name Description shutdown_other_sims Allow any session to use a capability to shutdown any running simulators on the host perf_record Allow recording the system performance and other metrics of the simulator audio_record Allow recording of host audio input(s) customize_result_bundle_path Allow customization of paths to result bundles by resultBundlePath capability","title":"Security Feature Flags"},{"location":"server-args/","text":"These arguments are set when you launch the Appium server, with this driver installed. They are for system administrators. Usage: appium --driver-args='{\"xcuitest\": {[argName]: [argValue]}}' Argument Default Description Example wdaLocalPort 8100 Local port used for communication with ios-web-driver-agent --driver-args='{\"xcuitest\": {\"wdaLocalPort\": 8100}}'","title":"Appium Server Arguments"},{"location":"settings/","text":"XCUITest driver supports Appium Settings API . Along with the common settings the following driver-specific settings are currently available: Name Type Description elementResponseAttributes string Comma-separated list of element attribute names to be included into findElement response. By default only element UUID is present there, but it is also possible to add the following items: name , text , rect , enabled , displayed , selected , attribute/<element_attribute_name> . It is required that shouldUseCompactResponses setting is set to false in order for this one to apply. shouldUseCompactResponses boolean Used in combination with elementResponseAttributes setting. If set to false then the findElement response is going to include the items enumerated in elementResponseAttributes setting. true by default screenshotQuality int See the description of the corresponding capability. mjpegServerFramerate int The maximum count of screenshots per second taken by the MJPEG screenshots broadcaster. Must be in range 1..60. 10 by default mjpegScalingFactor int The percentage value used to apply downscaling on the screenshots generated by the MJPEG screenshots broadcaster. Must be in range 1..100. 100 is by default, which means that screenshots are not downscaled. mjpegServerScreenshotQuality int The percentage value used to apply lossy JPEG compression on the screenshots generated by the MJPEG screenshots broadcaster. Must be in range 1..100. 25 is by default, which means that screenshots are compressed to the quarter of their original quality. customSnapshotTimeout (snapshotTimeout before 1.19.1) float Set how much time in float seconds is allowed to resolve a single accessibility snapshot with custom attributes. Snapshots are mainly used for page source generation, XML lookup and custom attributes retrieval (these are visibility and accessibility ones). It might be necessary to increase this value if the actual page source is very large and contains hundreds of UI elements. Defaults to 15 seconds. Since Appium 1.19.1 if this timeout expires and no custom snapshot could be made then WDA tries to calculate the missing attributes using its own algorithms, so setting this value to zero might speed up, for example, page source retrieval, but for the cost of preciseness of some element attributes. waitForIdleTimeout float Has the same meaning as corresponding capability (see above) animationCoolOffTimeout float The amount of time in float seconds to wait until the application under test does not have any active animations. This check is usually applied after each automation action that is supposed to change the state of the application under test, like click one, and blocks XCTest until the transition of the tested application to a new state completes or the cool off timeout occurs. The default value is 2 (seconds). Setting it to zero disables animation checks completely. snapshotMaxDepth int Changes the value of maximum depth for traversing elements source tree. It may help to prevent out of memory or timeout errors while getting the elements source tree, but it might restrict the depth of source tree. Please consider restricting this value if you observed an error like Timed out snapshotting com.apple.testmanagerd... message or Cannot get 'xml' source of the current application in your Appium log since they are possibly timeout related. A part of elements source tree might be lost if the value was too small. Defaults to 50 useFirstMatch boolean Enabling this setting makes single element lookups faster, but there is the known problem related to nested elements lookup. Defaults to false . reduceMotion boolean Changes the 'reduce motion' preference of accessibility feature. Defaults to false defaultActiveApplication string Sets the hint for active application selection. This helps WebDriverAgent to select the current application if there are multiple items in the active applications list and the desired one is also one of them. The setting is particularly useful for split-screen apps automation. Defaults to auto , which makes WebDriverAgent to select the application whose element is located at screenPoint location or a single item from the active apps list if the length of this list is equal to one. activeAppDetectionPoint string Defines the coordinates of the current screen point. WebDriverAgent uses this point to detect the active application if multiple application are active on the screen. The format of this value is x,y , where x and y are float or integer numbers representing valid screen coordinates. Setting this value to a point outside the actual screen coordinates might corrupt WebDriverAgent functionality. By default the screen point coordinates equal to 20% of the minimum screen dimension each, e.g. MIN(w, h) * 0.2, MIN(w, h) * 0.2 includeNonModalElements boolean Whether returns all of elements including no modal dialogs on iOS 13+. It fixes cannot find elements on nested modal presentations , but it might make visibility attributes unreliable. You could also enable shouldUseTestManagerForVisibilityDetection setting (defaults to false ) or simpleIsVisibleCheck capability to improve the visibility detection. This issue may happen between iOS 13.0 to 13.2 (Xcode 11.0 to 11.2). The query issued in includeNonModalElements returns nil with newer iOS/Xcode versions and Appium/WDA return proper elements three without this setting being used. Defaults to false . acceptAlertButtonSelector string Allows to customize accept alert button selector. It helps you to handle an arbitrary element as accept button in accept alert command. The selector should be a valid class chain expression, where the search root is the alert element itself. The default button location algorithm is used if the provided selector is wrong or does not match any element. Example: **/XCUIElementTypeButton[`label CONTAINS[c] 'accept'`] dismissAlertButtonSelector string Allows to customize dismiss alert button selector. It helps you to handle an arbitrary element as dismiss button in dismiss alert command. The selector should be a valid class chain expression, where the search root is the alert element itself. The default button location algorithm is used if the provided selector is wrong or does not match any element. Example: **/XCUIElementTypeButton[`label CONTAINS[c] 'dismiss'`] screenshotOrientation string Adjust screenshot orientation for iOS. Appium tries to return a screenshot and adjust its orientation properly using internal heuristics, but sometimes it does not work, especially in landscape mode. The actual screenshot orientation depends on various factors such as OS versions, model versions and whether this is a real or simulator device. This option allows you to enforce the given image orientation. Acceptable values: auto (default), portrait , portraitUpsideDown , landscapeRight , landscapeLeft . boundElementsByIndex boolean Whether to look up elements with allElementsBoundByAccessibilityElement (default) or allElementsBoundByIndex . This Stack Overflow topic explains the differences. Defaults to false . keyboardAutocorrection boolean Changes the 'Auto-Correction' preference in Keyboards setting. Defaults to false . keyboardPrediction boolean Changes the 'Predictive' preference in Keyboards setting. Defaults to false . nativeWebTap boolean See the description of the corresponding capability. nativeWebTapStrict boolean See the description of the corresponding capability. nativeWebTapTabBarVisibility enum Bypass finding whether the existence of the tab bar before tapping on the element. It could make native web tap faster. If it's visible , tab bar offset will be added without checking the existence of the tab bar. It's invisible , the tab bar offset will be zero . If you want to leave Appium to check and measure the tab bar offset, unset or set detect . Only applicable if nativeWebTap and nativeWebTapStrict are enabled. Unset by default. nativeWebTapSmartAppBannerVisibility enum The same as nativeWebTapTabBarVisibility , this keyword will bypass finding whether the existence of the smart app banner . safariTabBarPosition string Handle offset of Safari tab bar in nativeWebTap enabled interactions. If platformVersion was greater than or equal to 15 and iPhone device, the value is bottom by default. Otherwise top . When the value is top , Appium considers offset as the bar length. iOS 15+ environment can customize the bar position in the settings app, so please adjust the offset with this. Acceptable values: bottom , top useJSONSource boolean See the description of the corresponding capability.","title":"Settings"},{"location":"setup/","text":"Installation Note Since version 4.0.0 XCUITest driver has dropped the support of Appium 1, and is only compatible with Appium 2. Use the Appium extension CLI to add this driver to your Appium 2 install: appium driver install xcuitest Alternatively, if you are running a Node.js project, you can include appium-xcuitest-driver as one of your dependencies. Requirements On top of standard Appium requirements XCUITest driver also expects the following prerequisites: Only macOS is supported as the host platform Xcode and developer tools must be installed. Note, that usually some time is needed for the Appium team to pick up with the support of the most recent Xcode versions, especially beta ones (check Xcode version support section below). Connected real devices must be trusted, added to your developer profile and configured properly along with WebDriverAgent signing. Read Real devices section carefully to set them up properly before running your tests. iOS/iPadOS 16 real devices require enabling developer mode. Please read Enabling Developer Mode on a device for more details. devmodectl streaming CLI on macOS 13+ and installing development signed apps also help enabling the mode. Consider using earlier releases of the driver (check Xcode version support section below) if it is necessary to test iOS versions older than the current iOS major version minus one on real devices. Also, it is highly recommended to always use the same major version of Xcode SDK, which was used to build the particular iOS/tvOS version on your real device under test (for example Xcode 11 for iOS 13, Xcode 12 for iOS 14, etc). Web views must be debuggable in order to test them. If it is not possible to connect to your web view(s) using Safari remote debugger then XCUITest won't be able to connect to them as well. Since version 3.33.0 (included into Appium 1.20.0+) of XCUITest driver the Carthage dependency is not needed anymore . Prior to that version it was required and could be installed using brew : brew install carthage . Optional dependencies xcpretty tool could be used to make Xcode output easier to read. It could be installed using gem install xcpretty command. For test video recording we use ffmpeg . It could be installed using brew : brew install ffmpeg IDB , go-ios and tidevice could be used to improve some real device/Simulator interactions WIX AppleSimulatorUtils could be used to improve some Simulator interactions py-ios-device is required in several mobile: extensions and to improve the general testing experience for real iOS devices Xcode version support Apple constantly works on various updates/improvements to XCTest framework. Thus, some major and even minor iOS releases might partially break the backward compatibility, so we need to implement multiple branches to support the legacy and the current implementations in WebDriverAgent . Eventually we just drop the support of legacy XCTest implementations in order to simplify the client code and to have access to the recent platform features. The general aim is to support the current major platform version and the previous major one. Minimum XCUITest driver version Minimum required Xcode version 2.96.0 Xcode 9 3.0.0 Xcode 10 3.32.0 Xcode 10.2 3.56.0 Xcode 11 4.2.0 Xcode 12 It could be that after a new Xcode SDK is released we figure out a part or even the whole functionality that WebDriverAgent currently provides does not work anymore and needs to be updated. The below table contains the driver versions mapping for the cases where we had known compatibility issues with newly released SDKs and addressed them. Basically, version numbers in this table mean that all XCUITest driver versions below the one in the first column won't support Xcode SDK equal or above the version in the second column and the only way to make your test working after Xcode update would be to also bump the driver version . Minimum XCUITest driver version Tested for compatibility with Xcode version 4.7.4 Xcode 14-beta.3 tvOS Support Read the tvOS support article to get more details on how to automate testing for this platform. Real devices Configuration See the real device configuration documentation .","title":"Setup & Requirements"},{"location":"setup/#installation","text":"Note Since version 4.0.0 XCUITest driver has dropped the support of Appium 1, and is only compatible with Appium 2. Use the Appium extension CLI to add this driver to your Appium 2 install: appium driver install xcuitest Alternatively, if you are running a Node.js project, you can include appium-xcuitest-driver as one of your dependencies.","title":"Installation"},{"location":"setup/#requirements","text":"On top of standard Appium requirements XCUITest driver also expects the following prerequisites: Only macOS is supported as the host platform Xcode and developer tools must be installed. Note, that usually some time is needed for the Appium team to pick up with the support of the most recent Xcode versions, especially beta ones (check Xcode version support section below). Connected real devices must be trusted, added to your developer profile and configured properly along with WebDriverAgent signing. Read Real devices section carefully to set them up properly before running your tests. iOS/iPadOS 16 real devices require enabling developer mode. Please read Enabling Developer Mode on a device for more details. devmodectl streaming CLI on macOS 13+ and installing development signed apps also help enabling the mode. Consider using earlier releases of the driver (check Xcode version support section below) if it is necessary to test iOS versions older than the current iOS major version minus one on real devices. Also, it is highly recommended to always use the same major version of Xcode SDK, which was used to build the particular iOS/tvOS version on your real device under test (for example Xcode 11 for iOS 13, Xcode 12 for iOS 14, etc). Web views must be debuggable in order to test them. If it is not possible to connect to your web view(s) using Safari remote debugger then XCUITest won't be able to connect to them as well. Since version 3.33.0 (included into Appium 1.20.0+) of XCUITest driver the Carthage dependency is not needed anymore . Prior to that version it was required and could be installed using brew : brew install carthage .","title":"Requirements"},{"location":"setup/#optional-dependencies","text":"xcpretty tool could be used to make Xcode output easier to read. It could be installed using gem install xcpretty command. For test video recording we use ffmpeg . It could be installed using brew : brew install ffmpeg IDB , go-ios and tidevice could be used to improve some real device/Simulator interactions WIX AppleSimulatorUtils could be used to improve some Simulator interactions py-ios-device is required in several mobile: extensions and to improve the general testing experience for real iOS devices","title":"Optional dependencies"},{"location":"setup/#xcode-version-support","text":"Apple constantly works on various updates/improvements to XCTest framework. Thus, some major and even minor iOS releases might partially break the backward compatibility, so we need to implement multiple branches to support the legacy and the current implementations in WebDriverAgent . Eventually we just drop the support of legacy XCTest implementations in order to simplify the client code and to have access to the recent platform features. The general aim is to support the current major platform version and the previous major one. Minimum XCUITest driver version Minimum required Xcode version 2.96.0 Xcode 9 3.0.0 Xcode 10 3.32.0 Xcode 10.2 3.56.0 Xcode 11 4.2.0 Xcode 12 It could be that after a new Xcode SDK is released we figure out a part or even the whole functionality that WebDriverAgent currently provides does not work anymore and needs to be updated. The below table contains the driver versions mapping for the cases where we had known compatibility issues with newly released SDKs and addressed them. Basically, version numbers in this table mean that all XCUITest driver versions below the one in the first column won't support Xcode SDK equal or above the version in the second column and the only way to make your test working after Xcode update would be to also bump the driver version . Minimum XCUITest driver version Tested for compatibility with Xcode version 4.7.4 Xcode 14-beta.3","title":"Xcode version support"},{"location":"setup/#tvos-support","text":"Read the tvOS support article to get more details on how to automate testing for this platform.","title":"tvOS Support"},{"location":"setup/#real-devices","text":"","title":"Real devices"},{"location":"setup/#configuration","text":"See the real device configuration documentation .","title":"Configuration"},{"location":"touch-id/","text":"Appium has the capability to simulate Touch ID on iOS Simulators. Support TouchID simulation is only supported in iOS Simulators. It is not possible to simulate touchId on real devices. Not all iOS devices have touchId so your tests should handle the case where touchId is not supported Configuration To use touchId, the application that Appium launches from (such as Terminal, AppiumDesktop, or iTerm) must be added to the accessibility preferences on your Mac. Navigate to System Preferences > Security & Privacy > Accessibility and under Allow the apps below to control your computer add the application. (The only way Appium can enable enrollment and toggling of Touch ID is to use system-level accessibility APIs to simulate mouse clicks on the Simulator menus via AppleScript. For this reason this feature requires that you give Appium's running context access to these accessibility APIs). Usage Set the desired capability allowTouchIdEnroll to true. When the Simulator starts, touch id enrollment will be enabled by default. You can toggle touchId enrollment by calling the client method associated with the endpoint /session/:sessionId/appium/simulator/toggle_touch_id_enrollment","title":"Touch ID"},{"location":"touch-id/#support","text":"TouchID simulation is only supported in iOS Simulators. It is not possible to simulate touchId on real devices. Not all iOS devices have touchId so your tests should handle the case where touchId is not supported","title":"Support"},{"location":"touch-id/#configuration","text":"To use touchId, the application that Appium launches from (such as Terminal, AppiumDesktop, or iTerm) must be added to the accessibility preferences on your Mac. Navigate to System Preferences > Security & Privacy > Accessibility and under Allow the apps below to control your computer add the application. (The only way Appium can enable enrollment and toggling of Touch ID is to use system-level accessibility APIs to simulate mouse clicks on the Simulator menus via AppleScript. For this reason this feature requires that you give Appium's running context access to these accessibility APIs).","title":"Configuration"},{"location":"touch-id/#usage","text":"Set the desired capability allowTouchIdEnroll to true. When the Simulator starts, touch id enrollment will be enabled by default. You can toggle touchId enrollment by calling the client method associated with the endpoint /session/:sessionId/appium/simulator/toggle_touch_id_enrollment","title":"Usage"},{"location":"troubleshooting/","text":"Known problems After many failures on real devices it could transition to a state where connections are no longer being accepted. To possibly remedy this issue reboot the device. Read https://github.com/facebook/WebDriverAgent/issues/507 for more details. iPhone/iPad real devices show overlay, which has Automation Running Hold both volume buttons to stop text, since iOS/iPadOS 15. This is a known limitation of XCTest framework. This limitation does not affect screenshooting APIs though (e.g. the overlay is not visible on taken screenshots). iPhone/iPad real devices require passcode or touch id when they start a XCTest session since iOS/iPadOS 15. Disabling passcode/touch id in the device preference allows to workaround the behaviour above. OpenSSL v3 breaks secure communication with real devices. It can cause a Failed to receive any data within the timeout error in appium-ios-device . Please read this issue for more details. Please make sure your environment has Open SSL v1 for NodeJS environment, or prepare an OpenSSL v3 build by patching OPENSSL_TLS_SECURITY_LEVEL=1 . (e.g. an article ) This configuration is only necessary for XCUITest driver v4.3.0 or lower. shake is implemented via AppleScript and works only on Simulator due to lack of support from Apple Weird state Note: Running WebDriverAgent tests on a real device is particularly flakey. If things stop responding, the only recourse is, most often, to restart the device. Logs in the form of the following may start to occur: info JSONWP Proxy Proxying [ POST /session ] to [ POST http://10.35.4.122:8100/session ] with body: { \"desiredCapabilities\" : { \"ap...\" dbug WebDriverAgent Device: Jul 26 13 :20:42 iamPhone XCTRunner [ 240 ] <Warning>: Listening on USB dbug WebDriverAgent Device: Jul 26 13 :21:42 iamPhone XCTRunner [ 240 ] <Warning>: Enqueue Failure: UI Testing Failure - Unable to update application state promptly. <unknown> 0 1 dbug WebDriverAgent Device: Jul 26 13 :21:57 iamPhone XCTRunner [ 240 ] <Warning>: Enqueue Failure: UI Testing Failure - Failed to get screenshot within 15s <unknown> 0 1 dbug WebDriverAgent Device: Jul 26 13 :22:57 iamPhone XCTRunner [ 240 ] <Warning>: Enqueue Failure: UI Testing Failure - App state of ( null ) is still unknown <unknown> 0 1 Real device security settings On some systems, especially CI ones, where tests are executed by a command line agents, macOS Accessibility restrictions make the WebDriverAgent system unable to retrieve the development keys from the system keychain. This is usually manifest by xcodebuild returning an error code 65 . A workaround for this is to use a private key that is not stored on the system keychain. See this issue and this Stack Exchange post . To export the key, use security create-keychain -p [keychain_password] MyKeychain.keychain security import MyPrivateKey.p12 -t agg -k MyKeychain.keychain -P [p12_Password] -A where MyPrivateKey.p12 is the private development key exported from the system keychain. The full path to the keychain can then be sent to the Appium system using the keychainPath desired capability, and the password sent through the keychainPassword capability. Sim Resetting By default, this driver will create a new iOS simulator and run tests on it, deleting the simulator afterward. If you specify a specific simulator using the udid capability, this driver will boot the specified simulator and shut it down afterwards. If a udid is provided and the simulator is already running, this driver will leave it running after the test run. In short, this driver tries to leave things as it found them. You can use the noReset capability to adjust this behavior. Setting noReset to true will leave the simulator running at the end of a test session.","title":"Troubleshooting"},{"location":"troubleshooting/#known-problems","text":"After many failures on real devices it could transition to a state where connections are no longer being accepted. To possibly remedy this issue reboot the device. Read https://github.com/facebook/WebDriverAgent/issues/507 for more details. iPhone/iPad real devices show overlay, which has Automation Running Hold both volume buttons to stop text, since iOS/iPadOS 15. This is a known limitation of XCTest framework. This limitation does not affect screenshooting APIs though (e.g. the overlay is not visible on taken screenshots). iPhone/iPad real devices require passcode or touch id when they start a XCTest session since iOS/iPadOS 15. Disabling passcode/touch id in the device preference allows to workaround the behaviour above. OpenSSL v3 breaks secure communication with real devices. It can cause a Failed to receive any data within the timeout error in appium-ios-device . Please read this issue for more details. Please make sure your environment has Open SSL v1 for NodeJS environment, or prepare an OpenSSL v3 build by patching OPENSSL_TLS_SECURITY_LEVEL=1 . (e.g. an article ) This configuration is only necessary for XCUITest driver v4.3.0 or lower. shake is implemented via AppleScript and works only on Simulator due to lack of support from Apple","title":"Known problems"},{"location":"troubleshooting/#weird-state","text":"Note: Running WebDriverAgent tests on a real device is particularly flakey. If things stop responding, the only recourse is, most often, to restart the device. Logs in the form of the following may start to occur: info JSONWP Proxy Proxying [ POST /session ] to [ POST http://10.35.4.122:8100/session ] with body: { \"desiredCapabilities\" : { \"ap...\" dbug WebDriverAgent Device: Jul 26 13 :20:42 iamPhone XCTRunner [ 240 ] <Warning>: Listening on USB dbug WebDriverAgent Device: Jul 26 13 :21:42 iamPhone XCTRunner [ 240 ] <Warning>: Enqueue Failure: UI Testing Failure - Unable to update application state promptly. <unknown> 0 1 dbug WebDriverAgent Device: Jul 26 13 :21:57 iamPhone XCTRunner [ 240 ] <Warning>: Enqueue Failure: UI Testing Failure - Failed to get screenshot within 15s <unknown> 0 1 dbug WebDriverAgent Device: Jul 26 13 :22:57 iamPhone XCTRunner [ 240 ] <Warning>: Enqueue Failure: UI Testing Failure - App state of ( null ) is still unknown <unknown> 0 1","title":"Weird state"},{"location":"troubleshooting/#real-device-security-settings","text":"On some systems, especially CI ones, where tests are executed by a command line agents, macOS Accessibility restrictions make the WebDriverAgent system unable to retrieve the development keys from the system keychain. This is usually manifest by xcodebuild returning an error code 65 . A workaround for this is to use a private key that is not stored on the system keychain. See this issue and this Stack Exchange post . To export the key, use security create-keychain -p [keychain_password] MyKeychain.keychain security import MyPrivateKey.p12 -t agg -k MyKeychain.keychain -P [p12_Password] -A where MyPrivateKey.p12 is the private development key exported from the system keychain. The full path to the keychain can then be sent to the Appium system using the keychainPath desired capability, and the password sent through the keychainPassword capability.","title":"Real device security settings"},{"location":"troubleshooting/#sim-resetting","text":"By default, this driver will create a new iOS simulator and run tests on it, deleting the simulator afterward. If you specify a specific simulator using the udid capability, this driver will boot the specified simulator and shut it down afterwards. If a udid is provided and the simulator is already running, this driver will leave it running after the test run. In short, this driver tries to leave things as it found them. You can use the noReset capability to adjust this behavior. Setting noReset to true will leave the simulator running at the end of a test session.","title":"Sim Resetting"},{"location":"wda-custom-server/","text":"Appium for iOS uses WebDriverAgent as the automation backend. This backend is based on Apple's XCTest framework and shares all the known problem that are present in XCTest. For some of them we have workarounds, but there are some that are hardly possible to workaround, for example https://github.com/facebookarchive/WebDriverAgent/issues/507. The approach described in this article enables you to have full control over how WDA is built, managed, and run on the device. This way you may fine-tune your automated tests in CI environment and make them more stable in long-running perspective. Important points: * The steps below are not necessary if default Appium capabilities are used. The server will do everything for you, however you won't have so much control over WDA. * It is mandatory to have SSH or physical access to the machine to which the device under test is connected. WDA Setup WebDriverAgent source is automatically downloaded as part of XCUITest driver package. appium driver install xcuitest installes the module in $APPIUM_HOME/node_modules/appium-xcuitest-driver/node_modules/appium-webdriveragent . APPIUM_HOME is ~/.appium by default. Real device requires some more work to be done. Follow real device configuration documentation to setup code signing. In order to make sure that WDA source is configured properly: Open $APPIUM_HOME/node_modules/appium-xcuitest-driver/node_modules/appium-webdriveragent/WebDriverAgent.xcodeproj in Xcode Select WebDriverAgentRunner project Select your real phone/Simulator you'd like to run automated tests on as build target Select Product->Test from the main menu Xcode should successfully build the project and install it on the real device/Simulator, so you'll see the icon of WebDriverAgentRunner application on the springboard. WDA Startup WebDriverAgent application acts as a REST server, which proxies external API requests to native XCTest calls for your application under test. The server address will be localhost if you run your tests on Simulator or the actual phone IP address in case of real device. Appium uses appium-ios-device to route network requests to a real device from localhost via USB, which means one can use this tool to unify WDA network address for Simulator and for real device. You can use appium-ios-device to connect to a remote device requiring the module from your JavaScript code as same as Appium. Alternatively, you can also use iproxy , go-ios or tidevice to handle WebDriverAgent process outside Appium by installing and launching the WebDriverAgent package. For instance, iproxy could be installed using npm: npm install -g iproxy . This helper class written in Java illustrates the main implementation details wit iproxy : public class WDAServer { private static final Logger log = ZLogger . getLog ( WDAServer . class . getSimpleName ()); private static final int MAX_REAL_DEVICE_RESTART_RETRIES = 1 ; private static final Timedelta REAL_DEVICE_RUNNING_TIMEOUT = Timedelta . ofMinutes ( 4 ); private static final Timedelta RESTART_TIMEOUT = Timedelta . ofMinutes ( 1 ); // These settings are needed to properly sign WDA for real device tests // See https://github.com/appium/appium-xcuitest-driver for more details private static final File KEYCHAIN = new File ( String . format ( \"%s/%s\" , System . getProperty ( \"user.home\" ), \"/Library/Keychains/MyKeychain.keychain\" )); private static final String KEYCHAIN_PASSWORD = \"******\" ; private static final File IPROXY_EXECUTABLE = new File ( \"/usr/local/bin/iproxy\" ); private static final File XCODEBUILD_EXECUTABLE = new File ( \"/usr/bin/xcodebuild\" ); private static final File WDA_PROJECT = new File ( \"~/.appium/node_modules/appium-xcuitest-driver/node_modules/appium-webdriveragent\" + \"/WebDriverAgent.xcodeproj\" ); private static final String WDA_SCHEME = \"WebDriverAgentRunner\" ; private static final String WDA_CONFIGURATION = \"Debug\" ; private static final File XCODEBUILD_LOG = new File ( \"/usr/local/var/log/appium/build.log\" ); private static final File IPROXY_LOG = new File ( \"/usr/local/var/log/appium/iproxy.log\" ); private static final int PORT = 8100 ; public static final String SERVER_URL = String . format ( \"http://127.0.0.1:%d\" , PORT ); private static final String [] IPROXY_CMDLINE = new String [] { IPROXY_EXECUTABLE . getAbsolutePath (), Integer . toString ( PORT ), Integer . toString ( PORT ), String . format ( \"> %s 2>&1 &\" , IPROXY_LOG . getAbsolutePath ()) }; private static WDAServer instance = null ; private final boolean isRealDevice ; private final String deviceId ; private final String platformVersion ; private int failedRestartRetriesCount = 0 ; private WDAServer () { try { this . isRealDevice = ! getIsSimulatorFromConfig ( getClass ()); final String udid ; if ( isRealDevice ) { udid = IOSRealDeviceHelpers . getUDID (); } else { udid = IOSSimulatorHelpers . getId (); } this . deviceId = udid ; this . platformVersion = getPlatformVersionFromConfig ( getClass ()); } catch ( Exception e ) { throw new RuntimeException ( e ); } ensureToolsExistence (); ensureParentDirExistence (); } public synchronized static WDAServer getInstance () { if ( instance == null ) { instance = new WDAServer (); } return instance ; } private boolean waitUntilIsRunning ( Timedelta timeout ) throws Exception { final URL status = new URL ( SERVER_URL + \"/status\" ); try { if ( timeout . asSeconds () > 5 ) { log . debug ( String . format ( \"Waiting max %s until WDA server starts responding...\" , timeout )); } new UrlChecker (). waitUntilAvailable ( timeout . asMillis (), TimeUnit . MILLISECONDS , status ); return true ; } catch ( UrlChecker . TimeoutException e ) { return false ; } } private static void ensureParentDirExistence () { if ( ! XCODEBUILD_LOG . getParentFile (). exists ()) { if ( ! XCODEBUILD_LOG . getParentFile (). mkdirs ()) { throw new IllegalStateException ( String . format ( \"The script has failed to create '%s' folder for Appium logs. \" + \"Please make sure your account has correct access permissions on the parent folder(s)\" , XCODEBUILD_LOG . getParentFile (). getAbsolutePath ())); } } } private void ensureToolsExistence () { if ( isRealDevice && ! IPROXY_EXECUTABLE . exists ()) { throw new IllegalStateException ( String . format ( \"%s tool is expected to be installed (`npm install -g iproxy`)\" , IPROXY_EXECUTABLE . getAbsolutePath ())); } if ( ! XCODEBUILD_EXECUTABLE . exists ()) { throw new IllegalStateException ( String . format ( \"xcodebuild tool is not detected on the current system at %s\" , XCODEBUILD_EXECUTABLE . getAbsolutePath ())); } if ( ! WDA_PROJECT . exists ()) { throw new IllegalStateException ( String . format ( \"WDA project is expected to exist at %s\" , WDA_PROJECT . getAbsolutePath ())); } } private List < String > generateXcodebuildCmdline () { final List < String > result = new ArrayList <> (); result . add ( XCODEBUILD_EXECUTABLE . getAbsolutePath ()); result . add ( \"clean build-for-testing test-without-building\" ); result . add ( String . format ( \"-project %s\" , WDA_PROJECT . getAbsolutePath ())); result . add ( String . format ( \"-scheme %s\" , WDA_SCHEME )); result . add ( String . format ( \"-destination id=%s\" , deviceId )); result . add ( String . format ( \"-configuration %s\" , WDA_CONFIGURATION )); result . add ( String . format ( \"IPHONEOS_DEPLOYMENT_TARGET=%s\" , platformVersion )); result . add ( String . format ( \"> %s 2>&1 &\" , XCODEBUILD_LOG . getAbsolutePath ())); return result ; } private static List < String > generateKeychainUnlockCmdlines () throws Exception { final List < String > result = new ArrayList <> (); result . add ( String . format ( \"/usr/bin/security -v list-keychains -s %s\" , KEYCHAIN . getAbsolutePath ())); result . add ( String . format ( \"/usr/bin/security -v unlock-keychain -p %s %s\" , KEYCHAIN_PASSWORD , KEYCHAIN . getAbsolutePath ())); result . add ( String . format ( \"/usr/bin/security set-keychain-settings -t 3600 %s\" , KEYCHAIN . getAbsolutePath ())); return result ; } public synchronized void restart () throws Exception { if ( isRealDevice && failedRestartRetriesCount >= MAX_REAL_DEVICE_RESTART_RETRIES ) { throw new IllegalStateException ( String . format ( \"WDA server cannot start on the connected device with udid %s after %s retries. \" + \"Reboot the device manually and try again\" , deviceId , MAX_REAL_DEVICE_RESTART_RETRIES )); } final String hostname = InetAddress . getLocalHost (). getHostName (); log . info ( String . format ( \"Trying to (re)start WDA server on %s:%s...\" , hostname , PORT )); UnixProcessHelpers . killProcessesGracefully ( IPROXY_EXECUTABLE . getName (), XCODEBUILD_EXECUTABLE . getName ()); final File scriptFile = File . createTempFile ( \"script\" , \".sh\" ); try { final List < String > scriptContent = new ArrayList <> (); scriptContent . add ( \"#!/bin/bash\" ); if ( isRealDevice && isRunningInJenkinsNetwork ()) { scriptContent . add ( String . join ( \"\\n\" , generateKeychainUnlockCmdlines ())); } if ( isRealDevice ) { scriptContent . add ( String . join ( \" \" , IPROXY_CMDLINE )); } final String wdaBuildCmdline = String . join ( \" \" , generateXcodebuildCmdline ()); log . debug ( String . format ( \"Building WDA with command line:\\n%s\\n\" , wdaBuildCmdline )); scriptContent . add ( wdaBuildCmdline ); try ( Writer output = new BufferedWriter ( new FileWriter ( scriptFile ))) { output . write ( String . join ( \"\\n\" , scriptContent )); } new ProcessBuilder ( \"/bin/chmod\" , \"u+x\" , scriptFile . getCanonicalPath ()) . redirectErrorStream ( true ). start (). waitFor ( 5 , TimeUnit . SECONDS ); final ProcessBuilder pb = new ProcessBuilder ( \"/bin/bash\" , scriptFile . getCanonicalPath ()); final Map < String , String > env = pb . environment (); // This is needed for Jenkins env . put ( \"BUILD_ID\" , \"dontKillMe\" ); // This line is important. If USE_PORT environment variable is not set then WDA // takes port number zero by default and won't accept any incoming requests env . put ( \"USE_PORT\" , Integer . toString ( PORT )); log . info ( String . format ( \"Waiting max %s for WDA to be (re)started on %s:%s...\" , RESTART_TIMEOUT . toString (), hostname , PORT )); final Timedelta started = Timedelta . now (); pb . redirectErrorStream ( true ). start (). waitFor ( RESTART_TIMEOUT . asMillis (), TimeUnit . MILLISECONDS ); if ( ! waitUntilIsRunning ( RESTART_TIMEOUT )) { ++ failedRestartRetriesCount ; throw new IllegalStateException ( String . format ( \"WDA server has failed to start after %s timeout on server '%s'.\\n\" + \"Please make sure that iDevice is properly connected and you can build \" + \"WDA manually from XCode.\\n\" + \"Xcodebuild logs:\\n\\n%s\\n\\n\\niproxy logs:\\n\\n%s\\n\\n\\n\" , RESTART_TIMEOUT , hostname , getLog ( XCODEBUILD_LOG ). orElse ( \"EMPTY\" ), getLog ( IPROXY_LOG ). orElse ( \"EMPTY\" )) ); } log . info ( String . format ( \"WDA server has been successfully (re)started after %s \" + \"and now is listening on %s:%s\" , Timedelta . now (). diff ( started ). toString (), hostname , PORT )); } finally { scriptFile . delete (); } } public boolean isRunning () throws Exception { if ( ! isProcessRunning ( XCODEBUILD_EXECUTABLE . getName ()) || ( isRealDevice && ! isProcessRunning ( IPROXY_EXECUTABLE . getName ()))) { return false ; } return waitUntilIsRunning ( isRealDevice ? REAL_DEVICE_RUNNING_TIMEOUT : Timedelta . ofSeconds ( 3 )); } public Optional < String > getLog ( File logFile ) { if ( logFile . exists ()) { try { return Optional . of ( new String ( Files . readAllBytes ( logFile . toPath ()), Charset . forName ( \"UTF-8\" ))); } catch ( IOException e ) { e . printStackTrace (); } } return Optional . empty (); } } One should call this piece of code before to start Appium iOS driver, for example, in setUp method: if ( ! WDAServer . getInstance (). isRunning ()) { WDAServer . getInstance (). restart (); } It is important to set webDriverAgentUrl capability for Appium driver to let it know that our WDA driver is ready for use: capabilities . setCapability ( \"webDriverAgentUrl\" , WDAServer . SERVER_URL ); Important Notes The process does not have direct access to keychain if it is executed by Jenkins agent, so we need to prepare keychain before compiling WDA for real device, otherwise codesigning will fail We kill xcodebuild and iproxy processes before restart to make sure compilation succeeds even if these are frozen We prepare a separate bash script and detach iproxy/xcodebuild processes, so they can continue running in background even after the actual code execution is finished. This is extremely important if multiple tests/suites are executed on the same machine/node in automation lab, which requires minimum human interaction The value of BUILD_ID environment variable is changed to avoid killing of the background process by Jenkins agent after the job is finished isRunning check is done by verifying the actual network endpoint The output of daemonized processes is logged, so it is possible to track errors and unexpected failures. The content of the log files is automatically added to the actual error message if the server fails to (re)start. Real device id can be parsed from system_profiler SPUSBDataType output Simulator id can be parsed from xcrun simctl list output UrlChecker class is imported from org.openqa.selenium.net package","title":"WebDriverAgent"},{"location":"wda-custom-server/#wda-setup","text":"WebDriverAgent source is automatically downloaded as part of XCUITest driver package. appium driver install xcuitest installes the module in $APPIUM_HOME/node_modules/appium-xcuitest-driver/node_modules/appium-webdriveragent . APPIUM_HOME is ~/.appium by default. Real device requires some more work to be done. Follow real device configuration documentation to setup code signing. In order to make sure that WDA source is configured properly: Open $APPIUM_HOME/node_modules/appium-xcuitest-driver/node_modules/appium-webdriveragent/WebDriverAgent.xcodeproj in Xcode Select WebDriverAgentRunner project Select your real phone/Simulator you'd like to run automated tests on as build target Select Product->Test from the main menu Xcode should successfully build the project and install it on the real device/Simulator, so you'll see the icon of WebDriverAgentRunner application on the springboard.","title":"WDA Setup"},{"location":"wda-custom-server/#wda-startup","text":"WebDriverAgent application acts as a REST server, which proxies external API requests to native XCTest calls for your application under test. The server address will be localhost if you run your tests on Simulator or the actual phone IP address in case of real device. Appium uses appium-ios-device to route network requests to a real device from localhost via USB, which means one can use this tool to unify WDA network address for Simulator and for real device. You can use appium-ios-device to connect to a remote device requiring the module from your JavaScript code as same as Appium. Alternatively, you can also use iproxy , go-ios or tidevice to handle WebDriverAgent process outside Appium by installing and launching the WebDriverAgent package. For instance, iproxy could be installed using npm: npm install -g iproxy . This helper class written in Java illustrates the main implementation details wit iproxy : public class WDAServer { private static final Logger log = ZLogger . getLog ( WDAServer . class . getSimpleName ()); private static final int MAX_REAL_DEVICE_RESTART_RETRIES = 1 ; private static final Timedelta REAL_DEVICE_RUNNING_TIMEOUT = Timedelta . ofMinutes ( 4 ); private static final Timedelta RESTART_TIMEOUT = Timedelta . ofMinutes ( 1 ); // These settings are needed to properly sign WDA for real device tests // See https://github.com/appium/appium-xcuitest-driver for more details private static final File KEYCHAIN = new File ( String . format ( \"%s/%s\" , System . getProperty ( \"user.home\" ), \"/Library/Keychains/MyKeychain.keychain\" )); private static final String KEYCHAIN_PASSWORD = \"******\" ; private static final File IPROXY_EXECUTABLE = new File ( \"/usr/local/bin/iproxy\" ); private static final File XCODEBUILD_EXECUTABLE = new File ( \"/usr/bin/xcodebuild\" ); private static final File WDA_PROJECT = new File ( \"~/.appium/node_modules/appium-xcuitest-driver/node_modules/appium-webdriveragent\" + \"/WebDriverAgent.xcodeproj\" ); private static final String WDA_SCHEME = \"WebDriverAgentRunner\" ; private static final String WDA_CONFIGURATION = \"Debug\" ; private static final File XCODEBUILD_LOG = new File ( \"/usr/local/var/log/appium/build.log\" ); private static final File IPROXY_LOG = new File ( \"/usr/local/var/log/appium/iproxy.log\" ); private static final int PORT = 8100 ; public static final String SERVER_URL = String . format ( \"http://127.0.0.1:%d\" , PORT ); private static final String [] IPROXY_CMDLINE = new String [] { IPROXY_EXECUTABLE . getAbsolutePath (), Integer . toString ( PORT ), Integer . toString ( PORT ), String . format ( \"> %s 2>&1 &\" , IPROXY_LOG . getAbsolutePath ()) }; private static WDAServer instance = null ; private final boolean isRealDevice ; private final String deviceId ; private final String platformVersion ; private int failedRestartRetriesCount = 0 ; private WDAServer () { try { this . isRealDevice = ! getIsSimulatorFromConfig ( getClass ()); final String udid ; if ( isRealDevice ) { udid = IOSRealDeviceHelpers . getUDID (); } else { udid = IOSSimulatorHelpers . getId (); } this . deviceId = udid ; this . platformVersion = getPlatformVersionFromConfig ( getClass ()); } catch ( Exception e ) { throw new RuntimeException ( e ); } ensureToolsExistence (); ensureParentDirExistence (); } public synchronized static WDAServer getInstance () { if ( instance == null ) { instance = new WDAServer (); } return instance ; } private boolean waitUntilIsRunning ( Timedelta timeout ) throws Exception { final URL status = new URL ( SERVER_URL + \"/status\" ); try { if ( timeout . asSeconds () > 5 ) { log . debug ( String . format ( \"Waiting max %s until WDA server starts responding...\" , timeout )); } new UrlChecker (). waitUntilAvailable ( timeout . asMillis (), TimeUnit . MILLISECONDS , status ); return true ; } catch ( UrlChecker . TimeoutException e ) { return false ; } } private static void ensureParentDirExistence () { if ( ! XCODEBUILD_LOG . getParentFile (). exists ()) { if ( ! XCODEBUILD_LOG . getParentFile (). mkdirs ()) { throw new IllegalStateException ( String . format ( \"The script has failed to create '%s' folder for Appium logs. \" + \"Please make sure your account has correct access permissions on the parent folder(s)\" , XCODEBUILD_LOG . getParentFile (). getAbsolutePath ())); } } } private void ensureToolsExistence () { if ( isRealDevice && ! IPROXY_EXECUTABLE . exists ()) { throw new IllegalStateException ( String . format ( \"%s tool is expected to be installed (`npm install -g iproxy`)\" , IPROXY_EXECUTABLE . getAbsolutePath ())); } if ( ! XCODEBUILD_EXECUTABLE . exists ()) { throw new IllegalStateException ( String . format ( \"xcodebuild tool is not detected on the current system at %s\" , XCODEBUILD_EXECUTABLE . getAbsolutePath ())); } if ( ! WDA_PROJECT . exists ()) { throw new IllegalStateException ( String . format ( \"WDA project is expected to exist at %s\" , WDA_PROJECT . getAbsolutePath ())); } } private List < String > generateXcodebuildCmdline () { final List < String > result = new ArrayList <> (); result . add ( XCODEBUILD_EXECUTABLE . getAbsolutePath ()); result . add ( \"clean build-for-testing test-without-building\" ); result . add ( String . format ( \"-project %s\" , WDA_PROJECT . getAbsolutePath ())); result . add ( String . format ( \"-scheme %s\" , WDA_SCHEME )); result . add ( String . format ( \"-destination id=%s\" , deviceId )); result . add ( String . format ( \"-configuration %s\" , WDA_CONFIGURATION )); result . add ( String . format ( \"IPHONEOS_DEPLOYMENT_TARGET=%s\" , platformVersion )); result . add ( String . format ( \"> %s 2>&1 &\" , XCODEBUILD_LOG . getAbsolutePath ())); return result ; } private static List < String > generateKeychainUnlockCmdlines () throws Exception { final List < String > result = new ArrayList <> (); result . add ( String . format ( \"/usr/bin/security -v list-keychains -s %s\" , KEYCHAIN . getAbsolutePath ())); result . add ( String . format ( \"/usr/bin/security -v unlock-keychain -p %s %s\" , KEYCHAIN_PASSWORD , KEYCHAIN . getAbsolutePath ())); result . add ( String . format ( \"/usr/bin/security set-keychain-settings -t 3600 %s\" , KEYCHAIN . getAbsolutePath ())); return result ; } public synchronized void restart () throws Exception { if ( isRealDevice && failedRestartRetriesCount >= MAX_REAL_DEVICE_RESTART_RETRIES ) { throw new IllegalStateException ( String . format ( \"WDA server cannot start on the connected device with udid %s after %s retries. \" + \"Reboot the device manually and try again\" , deviceId , MAX_REAL_DEVICE_RESTART_RETRIES )); } final String hostname = InetAddress . getLocalHost (). getHostName (); log . info ( String . format ( \"Trying to (re)start WDA server on %s:%s...\" , hostname , PORT )); UnixProcessHelpers . killProcessesGracefully ( IPROXY_EXECUTABLE . getName (), XCODEBUILD_EXECUTABLE . getName ()); final File scriptFile = File . createTempFile ( \"script\" , \".sh\" ); try { final List < String > scriptContent = new ArrayList <> (); scriptContent . add ( \"#!/bin/bash\" ); if ( isRealDevice && isRunningInJenkinsNetwork ()) { scriptContent . add ( String . join ( \"\\n\" , generateKeychainUnlockCmdlines ())); } if ( isRealDevice ) { scriptContent . add ( String . join ( \" \" , IPROXY_CMDLINE )); } final String wdaBuildCmdline = String . join ( \" \" , generateXcodebuildCmdline ()); log . debug ( String . format ( \"Building WDA with command line:\\n%s\\n\" , wdaBuildCmdline )); scriptContent . add ( wdaBuildCmdline ); try ( Writer output = new BufferedWriter ( new FileWriter ( scriptFile ))) { output . write ( String . join ( \"\\n\" , scriptContent )); } new ProcessBuilder ( \"/bin/chmod\" , \"u+x\" , scriptFile . getCanonicalPath ()) . redirectErrorStream ( true ). start (). waitFor ( 5 , TimeUnit . SECONDS ); final ProcessBuilder pb = new ProcessBuilder ( \"/bin/bash\" , scriptFile . getCanonicalPath ()); final Map < String , String > env = pb . environment (); // This is needed for Jenkins env . put ( \"BUILD_ID\" , \"dontKillMe\" ); // This line is important. If USE_PORT environment variable is not set then WDA // takes port number zero by default and won't accept any incoming requests env . put ( \"USE_PORT\" , Integer . toString ( PORT )); log . info ( String . format ( \"Waiting max %s for WDA to be (re)started on %s:%s...\" , RESTART_TIMEOUT . toString (), hostname , PORT )); final Timedelta started = Timedelta . now (); pb . redirectErrorStream ( true ). start (). waitFor ( RESTART_TIMEOUT . asMillis (), TimeUnit . MILLISECONDS ); if ( ! waitUntilIsRunning ( RESTART_TIMEOUT )) { ++ failedRestartRetriesCount ; throw new IllegalStateException ( String . format ( \"WDA server has failed to start after %s timeout on server '%s'.\\n\" + \"Please make sure that iDevice is properly connected and you can build \" + \"WDA manually from XCode.\\n\" + \"Xcodebuild logs:\\n\\n%s\\n\\n\\niproxy logs:\\n\\n%s\\n\\n\\n\" , RESTART_TIMEOUT , hostname , getLog ( XCODEBUILD_LOG ). orElse ( \"EMPTY\" ), getLog ( IPROXY_LOG ). orElse ( \"EMPTY\" )) ); } log . info ( String . format ( \"WDA server has been successfully (re)started after %s \" + \"and now is listening on %s:%s\" , Timedelta . now (). diff ( started ). toString (), hostname , PORT )); } finally { scriptFile . delete (); } } public boolean isRunning () throws Exception { if ( ! isProcessRunning ( XCODEBUILD_EXECUTABLE . getName ()) || ( isRealDevice && ! isProcessRunning ( IPROXY_EXECUTABLE . getName ()))) { return false ; } return waitUntilIsRunning ( isRealDevice ? REAL_DEVICE_RUNNING_TIMEOUT : Timedelta . ofSeconds ( 3 )); } public Optional < String > getLog ( File logFile ) { if ( logFile . exists ()) { try { return Optional . of ( new String ( Files . readAllBytes ( logFile . toPath ()), Charset . forName ( \"UTF-8\" ))); } catch ( IOException e ) { e . printStackTrace (); } } return Optional . empty (); } } One should call this piece of code before to start Appium iOS driver, for example, in setUp method: if ( ! WDAServer . getInstance (). isRunning ()) { WDAServer . getInstance (). restart (); } It is important to set webDriverAgentUrl capability for Appium driver to let it know that our WDA driver is ready for use: capabilities . setCapability ( \"webDriverAgentUrl\" , WDAServer . SERVER_URL );","title":"WDA Startup"},{"location":"wda-custom-server/#important-notes","text":"The process does not have direct access to keychain if it is executed by Jenkins agent, so we need to prepare keychain before compiling WDA for real device, otherwise codesigning will fail We kill xcodebuild and iproxy processes before restart to make sure compilation succeeds even if these are frozen We prepare a separate bash script and detach iproxy/xcodebuild processes, so they can continue running in background even after the actual code execution is finished. This is extremely important if multiple tests/suites are executed on the same machine/node in automation lab, which requires minimum human interaction The value of BUILD_ID environment variable is changed to avoid killing of the background process by Jenkins agent after the job is finished isRunning check is done by verifying the actual network endpoint The output of daemonized processes is logged, so it is possible to track errors and unexpected failures. The content of the log files is automatically added to the actual error message if the server fails to (re)start. Real device id can be parsed from system_profiler SPUSBDataType output Simulator id can be parsed from xcrun simctl list output UrlChecker class is imported from org.openqa.selenium.net package","title":"Important Notes"}]}